<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Baijinge &middot; English student | bitgab</title>

    <meta http-equiv="content-language" content="en" />

    <meta name="robots" content="index, follow">
    <meta name="description" content="Baijinge's profile page on bitgab, the social network to learn English" />

    <meta name="google" content="notranslate" />

    <meta name="author" content="bitgab" />
    <meta name="copyright" content="bitgab" />
    <meta name="description" content="Baijinge's profile page on bitgab, the social network to learn English" />
    <meta name="keywords" content="" />

    <meta name="google" content="notranslate" />


    <meta property="og:locale" content="en_US" />
    <meta property="og:locale:alternate" content="es_ES" />
    <meta property="og:title" content="Baijinge &middot; English student | bitgab" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://www.bitgab.com/assets-home/img/logo-png/bitgab-default.png" />
    <meta property="og:image:width" content="640" />
    <meta property="og:image:height" content="400" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:url" content="https://www.bitgab.com/baijinge" />
    <meta property="og:description" content="Baijinge's profile page on bitgab, the social network to learn English" />

    <meta property="fb:app_id" content="247805475565266" /> <!--1040071859426022 247805475565266-->
    <meta property="fb:admins" content="100010635878440" />

    <link rel="image_src" href="https://www.bitgab.com/assets-home/img/logo-png/bitgab-default.png" />



    <!--Twitter Card-->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@bitgaben">
    <meta name="twitter:creator" content="@bitgaben">
    <meta name="twitter:title" content="Baijinge &middot; English student | bitgab">
    <meta name="twitter:description" content="Baijinge's profile page on bitgab, the social network to learn English">
    <meta name="twitter:image" content="https://www.bitgab.com/assets-home/img/logo-png/bitgab-default.png">



    <!--===================================================-->
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.5 -->
    <link rel="stylesheet" href="/assets-dashboard/bootstrap/css/bootstrap.min.css">
    <!-- Google Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,400italic|Source+Sans+Pro:400,600,300,400italic,700,200,300italic|Roboto:400,300,500,400italic' rel='stylesheet' type='text/css'>
    <!-- Ionicons -->
    <link rel="stylesheet" href="/assets-dashboard/fonts/ionicons/css/ionicons.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="/assets-dashboard/fonts/font-awesome/css/font-awesome.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="/assets-dashboard/css/AdminLTE.css">
    <!-- Own CSS files -->
    <link rel="stylesheet" href="/assets-dashboard/css/global.css">
    <!-- Star Ratings -->
    <link rel="stylesheet" href="/assets-dashboard/css/star-rating.min.css">
    <!-- Custom Scrollbar -->
    <link rel="stylesheet" href="/assets-dashboard/css/jquery.mCustomScrollbar.css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link href="/assets-home/ico/apple-touch-icon-152-precomposed.png" rel="apple-touch-icon-precomposed" sizes="152x152">
    <link href="/assets-home/ico/apple-touch-icon-144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144">
    <link href="/assets-home/ico/apple-touch-icon-120-precomposed.png" rel="apple-touch-icon-precomposed" sizes="120x120">
    <link href="/assets-home/ico/apple-touch-icon-114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114">
    <link href="/assets-home/ico/apple-touch-icon-72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72">
    <link href="/assets-home/ico/apple-touch-icon-57-precomposed.png" rel="apple-touch-icon-precomposed">
    <link href="/assets-home/ico/favicon.png" rel="icon">    <!--===================================================-->

    <!-- DataTables -->
    <link rel="stylesheet" href="https://www.bitgab.com/en/dashboard/plugins/datatables/dataTables.bootstrap.css">

    <!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
    <link rel="stylesheet" href="/assets-dashboard/plugins/juploader/css/jquery.fileupload-ui.css">


</head>
<body class="skin-black-light timeline-page quiz-page  " id="user-page">


<div class="body-container">

    <!--NAVBAR-->
    <!--===================================================-->

    <!-- CALL RTC LIBRARY HERE -->
    <!-- Assumes global locations for socket.io.js and easyrtc.js -->
    <script src="https://www.bitgab.com:8888/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="https://www.bitgab.com:8888/easyrtc/easyrtc.js"></script>

    <script>

        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-68353022-1', 'auto');
        ga('send', 'pageview');
    </script>


    <!-- Facebook Pixel Code -->
    <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
            n.callMethod.apply(n,arguments):n.queue.push(arguments)};
            if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
            n.queue=[];t=b.createElement(e);t.async=!0;
            t.src=v;s=b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t,s)}(window, document,'script',
            'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '1544105865686854');
        fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
                   src="https://www.facebook.com/tr?id=1544105865686854&ev=PageView&noscript=1"
        /></noscript>
    <!-- End Facebook Pixel Code -->

    <!-- DO NOT MODIFY -->
    <!-- Quora Pixel Code (JS Helper) -->
    <script>
        !function(q,e,v,n,t,s){if(q.qp) return; n=q.qp=function(){n.qp?n.qp.apply(n,arguments):n.queue.push(arguments);}; n.queue=[];t=document.createElement(e);t.async=!0;t.src=v; s=document.getElementsByTagName(e)[0]; s.parentNode.insertBefore(t,s);}(window, 'script', 'https://a.quora.com/qevents.js');
        qp('init', '12c8745db70446c5a1178a3bd17b0b3c');
        qp('track', 'ViewContent');
    </script>
    <noscript><img height="1" width="1" style="display:none" src="https://q.quora.com/_/ad/12c8745db70446c5a1178a3bd17b0b3c/pixel?tag=ViewContent&noscript=1"/></noscript>
    <!-- End of Quora Pixel Code -->

    <header class="main-header">

        <!-- Header Navbar: style can be found in header.less -->
        <nav class="navbar navbar-fixed-top" role="navigation">
            <!-- Sidebar toggle button
      <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
        <span class="sr-only">Toggle navigation</span>
      </a>-->

            <div id="navbar-container" class="col-xs-12">


                <!-- Mobile logo -->
                <div class="logo-mobile">
                    <div class="spinner bitgab"></div>
                    <a href="https://www.bitgab.com" class="logo logo-mobile hidden "></a>
                </div>


                <!--<div class="col-md-2 visible-lg-block">
      	<a href="#">Topics</a>
      	<a href="#">Ejercicios</a>
      </div>

      <div class="col-md-2 visible-lg-block pull-right">
      	<a href="#">Friends</a>
      </div>-->


                <!-- Navbar Right Menu -->
                <div class="navbar-left">
                    <ul class="nav navbar-nav">


                        <li class="dropdown messages-menu ">
                            <a id="Topics" class="" href="https://www.bitgab.com">
                                <div class="dropdown-toggle-wrapper">
                                    <i class="fa fa-home"></i>
                                    <span class="tooltip nav-tooltip hidden-lg"><span class="tooltiptext">Home</span></span>
                                    <span class="navbar-left-label active-text hidden-sm hidden-md">Home</span>
                                </div>
                            </a>
                        </li>


                        <li class="dropdown messages-menu hidden-400">
                            <a id="Exercises" class="active" href="https://www.bitgab.com/baijinge">
                                <div class="dropdown-toggle-wrapper">
                                    <i class="ion ion-person"></i>
                                    <span class="tooltip nav-tooltip hidden-lg"><span class="tooltiptext">Profile</span></span>
                                    <span class="navbar-left-label active-text hidden-sm hidden-md">Profile</span>
                                </div>
                            </a>
                        </li>



                        <li class="dropdown messages-menu ">
                            <a id="Grammar" class="" href="https://www.bitgab.com/grammar">
                                <div class="dropdown-toggle-wrapper">
                                    <i class="ion ion-ios-book"></i>
                                    <span class="tooltip nav-tooltip hidden-lg"><span class="tooltiptext">Grammar</span></span>
                                    <span class="navbar-left-label active-text hidden-sm hidden-md">Grammar</span>
                                </div>
                            </a>
                        </li>


                        <li class="dropdown messages-menu ">
                            <a id="Vocabulary" class="" href="https://www.bitgab.com/vocabulary">
                                <div class="dropdown-toggle-wrapper">
                                    <i class="fa fa-font"></i>
                                    <span class="tooltip nav-tooltip hidden-lg"><span class="tooltiptext">Vocabulary</span></span>
                                    <span class="navbar-left-label active-text hidden-sm hidden-md">Vocabulary</span>
                                </div>
                            </a>
                        </li>



                    </ul>
                </div>



                <!-- Navbar Right Menu -->
                <div class="navbar-custom-menu">
                    <ul class="nav navbar-nav">



                        <li id="searchbox" class="messages-menu hidden-xs hidden-sm ">
                            <form action="/en/topics" method="get" class="sidebar-form">
                                <div class="input-group">
                                    <input type="text" name="s" class="form-control" placeholder="Search bitgab" style="padding: 0 5px 5px 15px;">
                                    <span class="input-group-btn">
                    <button type="submit" name="search" id="search-btn" class="btn btn-flat" style="padding: 0 12px 3px 12px;"><i class="ion ion-search"></i>
                    </button>
                  </span>
                                </div>
                            </form>
                        </li>






                        <li id="friends" class="dropdown messages-menu hidden-600 ">
                            <a class="dropdown-toggle" aria-expanded="false">
                                <div class="dropdown-toggle-wrapper">
                                    <i class="ion ion-person-stalker"></i>
                                    <span class="label label-info label-navbar hidden" id="headerFriendRequestsNumber"></span>
                                    <span class="label label-info label-navbar" id="headerMessageAlertsNumber"></span>
                                    <!--<span class="hidden-xs hidden-sm hidden-md">Amigos</span>-->
                                </div>
                            </a>
                            <ul class="dropdown-menu">

                                <li class="header"><b>Friends & Messages</b></li>
                                <li class="scroller">
                                    <!-- inner menu: contains the actual data -->
                                    <ul class="menu" id="headerFriendRequests"></ul>

                                </li>


                                <li class="scroller">
                                    <!-- inner menu: contains the actual data -->
                                    <ul class="menu" id="headerMessageAlerts"></ul>

                                </li>
                                <li class="footer"><a href="https://www.bitgab.com/en/profile#messages-menu">View All Messages<span class="chevron right" style="vertical-align: initial;"></span></a></li>

                            </ul>
                        </li>



                        <li id="rating" class="dropdown messages-menu">
                            <a class="dropdown-toggle" aria-expanded="false">
                                <div class="dropdown-toggle-wrapper">
                                    <i class="ion ion-android-star" style="color:#ffb90f !important;"></i>
                                    <span class="active-text" id="hederScoreNumber">0</span>
                                    <span class="label label-success label-navbar" id="headerScoreUpdate"></span>
                                </div>
                            </a>
                            <ul class="dropdown-menu no-padding">

                                <ul id="headerScore" class="no-padding"></ul>
                                <li class="footer"><a href="https://www.bitgab.com/en/profile#rankings-menu">View Rankings<span class="chevron right" style="vertical-align:initial"></span></a></li>
                            </ul>
                        </li>



                        <!-- User Account: style can be found in dropdown.less -->
                        <li id="user-account" class="dropdown user user-menu">
                            <a class="dropdown-toggle">
                                <div class="dropdown-toggle-wrapper">
                                    <img src="https://www.bitgab.com/uploads/profile/files/default.png" class="user-image headerprofilephoto img-circle" alt="User Image">
                                    <!--<span class="hidden-xs"></span>-->

                                </div>
                            </a>
                            <ul class="dropdown-menu">

                                <!-- User image -->
                                <li class="user-header">
                                    <a href="https://www.bitgab.com/en/profile" style="padding: 5px;text-align: left;">
                                        <div style="display:inline-block;vertical-align:middle;">
                                            <img src="https://www.bitgab.com/uploads/profile/files/default.png" class="img-circle headerprofilephoto" alt="User Image" style="height:70px;width:70px;">
                                        </div>
                                        <div style="display:inline-block;vertical-align:middle;margin-left:10px;overflow: hidden;max-width:155px;">
                                            <div style="color: #444;font-size:24px;font-weight:500;text-align: left;white-space: normal;overflow: hidden;text-overflow: ellipsis;line-height: 30px;max-height: 60px;">Baijinge</div>
                                            <div style="white-space:normal;color:#888;">
                                                <span style="font-size: 1.3em;">Beginner level</span>
                                            </div>
                                            <!--
                    -->
                                        </div>
                                    </a>
                                </li>

                                <!--
              <li class="user-body" style="padding: 0;border-bottom: 0;border-top: 1px solid #ddd;">
                <div class="alert alert-grey alert-dismissible" style="padding: 10px; border: 0; margin-bottom: 0; background-color: #f7f7f7 !important;">
                  <div style="margin-bottom:5px;">
                    <div style="display: inline-block;vertical-align: middle;">
                        <a class="account-slug-link" href="https://www.bitgab.com/baijinge">bitgab.com/baijinge</a>
                    </div>

                  </div>
                  <div style="padding:0 5px;">
                  	<span class="subscription-explainer">Share this link with anyone to start a conversation</span>
                  </div>
                </div>
              </li>
-->
                                <li class="user-body" style="padding: 0;border-bottom: 0;border-top: 1px solid #ddd;">
                                    <div class="alert alert-grey alert-dismissible" style="padding: 10px 15px; border: 0; margin-bottom: 0; background-color: #f7f7f7 !important;">
                                        <small style="color: #666;display: flex;align-items: baseline;line-height: 25px;"><i class="ion-close-circled" style="font-size: 14px;height: auto;color: #a8a8a8;margin-right: 5px;"></i><div style="font-size: 14px;" class="open">Basic account. <a class="account-slug-link" href="#payment-modal" data-toggle="modal" data-target="#payment-modal" style="font-size: 14px;">Upgrade to <b style="font-weight:700;">PREMIUM</b></a></div></small>
                                        <small style="color: #666;display: flex;align-items: baseline;line-height: 25px;"><i class="ion-close-circled" style="font-size: 14px;height: auto;color: #a8a8a8;margin-right: 5px;"></i><div style="font-size: 14px;">No private classes. <a class="account-slug-link" href="#payment-modal" data-toggle="modal" data-target="#payment-modal" style="font-size: 14px;margin-left:3px;">Add</a></div></small>
                                    </div>
                                </li>

                                <!-- Menu Footer-->
                                <li class="user-footer">
                                    <div class="pull-left">
                                        <a href="https://www.bitgab.com/en/profile" class="btn btn-default btn-flat">Settings</a>
                                    </div>
                                    <div class="pull-right">
                                        <a href="https://www.bitgab.com/en/login?logout=1" class="btn btn-default btn-flat">Log out</a>
                                    </div>
                                </li>
                            </ul>
                        </li>






                        <li id="navbar-subscribe-button"><label class="btn btn-success hidden-400" id="subscribe-now-button" data-toggle="modal" data-target="#payment-modal" style="margin: 6px 0 6px 8px;padding:6px 12px;display: flex;align-items: center;color:#fff;"><i class="ion ion-ribbon-b" style="line-height:20px;font-size: 24px;"></i> <div class="hidden-xs hidden-md" style="margin-left: 7px;line-height: 12px;"><!--<div style="font-size: 10px;">UPGRADE TO</div>--><div style="font-size: 15px;font-weight: 700;">UPGRADE</div></div></label></li>






                    </ul>



                </div>
            </div>


            <div id="notifier" class="alert alert-success header-alert notify"><span id="notifier-text"></span></div>

        </nav>

    </header>

    <div id="mySidenav" class="sidenav  ">
        <div class="sidebar-public-notifier hidden">
            <div style="display:flex;justify-content: center;align-items: center;height: 100%;color: #bbb;font-weight: 600;font-size: 22px;text-align: center;margin: 0 20px;"><span>Please <a href="https://www.bitgab.com/en/" class="chat-log-in-link">log in</a> to access the chat</span></div><div class="sidebar-public-closer" style="position: absolute;bottom: 10px;width: 100%;text-align: center;color: #bbb;font-weight: 600;font-size: 14px;"><span class="disabled" onclick="closeNav()">Close</span></div>
        </div>
        <ul>

            <li class="header">Friends & Favorite Teachers<span class="minimizer"><i class="ion-arrow-up-b"></i></span></li>
            <div class="chat-user-placeholder" id="friendsOnlineList">
                <li class="empty">No users available</li>
            </div>
            <li class="header">More Contacts  <span class="minimizer"><i class="ion-arrow-up-b"></i></span></li>
            <div class="chat-user-placeholder" id="othersOnlineList">
                <li class="empty">No users available</li>
            </div>


            <!--
         <div style="height: 60px;display: flex;align-items: center;justify-content: center;border-top: 1px solid #eee;">
          	<a href="https://www.bitgab.com/baijinge/find-friends?qname=&amp;qcity=&amp;qcountry=&amp;qlevel=&amp;qprofession=null&amp;quniversity=&amp;qcollege=&amp;search=1" class="btn btn-default" style="font-size: 12px;margin: 0 3px;width: 94px;">Find friends</a>
          	<a href="https://www.bitgab.com/baijinge/find-teachers?qname2=&amp;qcountry2=&amp;qlang=&amp;search2=1" class="btn btn-default" style="font-size: 12px;margin: 0 3px;width: 94px;">Find teachers</a>
          </div>
-->


            <div style="display: flex;align-items: center;justify-content: center;border-top: 1px solid #eee;padding:10px;">
                <a data-toggle="modal" data-target="#invite-global-modal" class="btn btn-primary btn-block" style="width:100%;">Invite Friends</a>
            </div>


            <div class="chat-bottom-search">
                <form action="/en/topics" method="get" class="sidebar-form" style="height: 25px;">
                    <div class="input-group">
                        <input type="text" name="s" class="form-control" placeholder="Search..." style="height: 20px;line-height: 20px;border: 0;padding: 12.5px 5px 12.5px 15px;">
                        <span class="input-group-btn">
                      <button type="submit" name="search" id="search-btnChat" class="btn btn-flat" style="height: 25px;padding: 0 12px 0px 12px;"><i class="ion ion-search"></i>
                      </button>
                    </span>
                    </div>
                </form>
            </div>
            <div class="chat-bottom-menu">
                <div style="width: 220px;height: 25px;display: flex;flex-direction: row;transform:translateZ(0);">
                    <div style="display: flex;flex-direction: row;"><div class="indicator" style="display: flex;flex-direction: row;margin: auto auto auto 10px;"></div><div style="margin-left: 5px;color: #666;display: flex;flex-direction: column;margin: auto auto auto 5px;">Available</div></div>
                    <div class="btn-group" style="display: flex;flex-direction: column;margin-left: auto;border-left: 1px solid #e1e8ed;">
                        <button type="button" class="btn btn-default dropdown-toggle chat-cog" data-toggle="dropdown" aria-expanded="false" style="border: 0;text-align: left;line-height:12px;display: flex;flex-direction: row;">
                            <div style="color: #666;display: flex;flex-direction: row;margin: auto;"><span style="display: flex;flex-direction: column;margin: auto;">Settings </span><i class="caret" style="color: #bbb;display: flex;flex-direction: column;margin: auto auto auto 3px !important;transform: rotate(180deg);"></i></div>
                        </button>
                        <ul class="dropdown-menu focus-menu" style="min-width:0;height:auto;bottom: 28px;top:auto;left: auto;right:3px;padding:4px 0;">
                            <li class="cog-option"><a href="#/" class="chat-close-option" onclick="closeNav();return false;" disabled="">Turn off chat</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </ul>
    </div>

    <div class="md-chat-overlay"></div>


    <input type="hidden" id="useridGlobal" value="38063" autocomplete="off">
    <input type="hidden" id="endDateDisplay" value="0" autocomplete="off">
    <input type="hidden" id="usertypeGlobal" value="student" autocomplete="off">
    <input type="hidden" id="chatcourse" value="1">
    <input type="hidden" id="verificationRequired" value="0">

    <input type="hidden" id="myBookings" value="">

    <input type="hidden" id="school_id" value="0">

    <input type="hidden" id="fakeuser" value="0" autocomplete="off" />





    <!-- Use any element to open the sidenav -->
    <div id="chat-button" class="hidden-xs hidden-sm" onclick="openNav()">
        <i class="fa fa-comments"></i>
        <div style="margin-top:3px;font-size:10px;font-weight:700;">CHAT</div>
        <div class="chat-msg">OFF</div>
    </div>


    <div id="mobile-private-gab-button" class="hidden-md hidden-lg" onclick="openNav()">
        <i class="fa fa-comments"></i>
    </div>


    <input type="hidden" id="userFriendsChat" value="" />





    <div id="message-modalChat" class="hidden">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="padding: 10px;">
                    <button type="button" class="close exit" aria-label="Close">
                        <span aria-hidden="true">×</span></button>
                    <button type="button" class="close startVideoCall" data-video="1">
                        <span aria-hidden="true"><i class="ion-ios-videocam" style="font-size:22px;margin-right:10px;"></i></span>
                    </button>
                    <button type="button" class="close startVideoCall" data-video="0">
                        <span aria-hidden="true"><i class="ion-ios-telephone" style="font-size:22px;margin-right:10px;"></i></span>
                    </button>

                    <h4 class="modal-title" style="font-size: 14px;"><div class="product-img" style="display:inline-block;margin-right: 4px;"><a href="" data-user="" data-toggle="modal" data-target="#user-profile-modal" style="border:0;"><img class="chatActiveUserPhoto" alt="User Avatar" src="https://www.bitgab.com/uploads/profile/files/default.png" class="img-circle" style="height: 20px;"></a></div><a class="chatActiveUserTitle" href="" data-user="2024" data-toggle="modal" data-target="#user-profile-modal" style="border:0;font-size: 14px;line-height: 20px;vertical-align: middle;"></a></h4>
                </div>


                <a href="#" data-video="1" class="teacherrate hidden startVideoCall" style="display: flex;flex-direction: row;padding: 5px 10px;font-weight: 600;color: #fff;background-color: #51a336;cursor: pointer;text-decoration: none;"><i class="ion-ios-videocam" style="font-size: 18px;display: flex;flex-direction: column;"></i><span style="margin-left: 4px;">Tutoring rate: <span class="ratevalue"></span>/hr<br> <!--Try the first 2 minutes FREE! <br>--> <span style="font-variant:small-caps;">Click to start class</span></span></a>

                <a href="#" data-video="1" class="bookinginfo hidden startVideoCall" style="display: flex;flex-direction: row;padding: 5px 10px;font-weight: 600;color: #fff;background-color: #51a336;cursor: pointer;text-decoration: none;"><i class="ion-ios-videocam" style="font-size: 18px;display: flex;flex-direction: column;"></i><span style="margin-left: 4px;">You have a class reserved with this teacher.<br> <span style="font-variant:small-caps;">Click to start class</span></span></a>

                <div class="modal-body no-padding">

                    <!--
            <input type="hidden" id="target">
            <input type="hidden" id="usermessagesfrom" value="0">
            <input type="hidden" id="scrollmessagesfrom" value="0">
            <input type="hidden" id="lastmsg" value="0">
            -->

                    <div id="receiveMessageAreaMessageChat" class="direct-chat direct-chat-primary">
                        <div class="box-body" id="conversationBoxMessageChat">


                            <!-- Conversations are loaded here -->
                            <div style="background: rgb(249, 249, 249) none repeat scroll 0% 0%;" id="conversation" class="direct-chat-messages">


                            </div>

                        </div></div></div>



                <!-- /.box-body -->
                <div class="box-footer" id="sendMessageAreaChat">
                    <div style="display:none;" id="iamChat">Obtaining ID...</div>
                    <form method="post" action="#">
                        <div class="input-group" style="width:100%;display:block;">
                            <textarea type="text" class="form-control" placeholder="Send chat message..." autocomplete="off" name="message" id="sendMessageTextChat" rows="1"></textarea>
                            <button data-target="bB0mh5_NYsS3K2l0QcLe" data-room="roomeveryone0" class="btn btn-block btn-primary sendChatButton hidden">Send</button>
                        </div>
                    </form>
                </div>


            </div>


        </div>

    </div>







    <!-- CHAT OLD SIDEBAR ##################################################################################### -->
    <div class=hidden>


        <div id="main" class="hidden">


            <div class="hidden">

                <h3> Adding api fields</h3>
                <input type="text" id="apiroomname" placeholder="room name">
                <input type="text" id="apifieldname" placeholder="field name"><br>
                <input size="50" type="text" id="apifieldvalue" placeholder="field value"><br>
                <button onclick="addApiField()">Add the api field</button>
            </div>

            <div class="hidden">
                <h3>Getting the list of room occupants</h3>
                <input type="text" id="queryRoom" placeholder="room name" value="roomeveryone0">

                <button id="queryRoomButton" onclick="queryRoomNames();">Dump occupant names to console</button>
            </div>

            <div class="postconnection hidden">
                <h3 class="hidden">Fields from server</h3>
                <div id="fields" class="hidden">
                </div>
                <button onclick="easyrtc.getFreshIceConfig();" class="postconnection hidden"> Get Fresh ICE configuration</button>
                <h3 class="hidden"> Name To Id</h3>
                <div class="hidden">
                    <input id="targetName" type="text" />
                    <button onclick="getIdsOfName();">Fetch ids</button>
                    <div id="foundIds"></div>
                </div>
            </div>

            <!--hide
            <h2>Testing the following EasyRTC Features:</h2>
            <ul>
                <li><strong>Authentication</strong> - If username is provided, it will be available to others to see.</li>
                <li><strong>Define Rooms during Authentication</strong> - You can join rooms before you press 'Connect'.</li>
                <li><strong>Default Rooms</strong> - If you join no rooms before you connect, you will join the default room.</li>
                <li><strong>Messages to All In Room (targetRoom)</strong> - Type a message, then click on a room name to send it to everyone in the same room. When received, the other client will know it was sent to the room at large.</li>
                <li><strong>Message to Individual In Room (targetRoom + targetEasyrtcid)</strong> - Type a message, then click on another client in a room to send it to just that person. That person will know it was sent directly to them, and that it was sent via a specific room.</li>
                <li><strong>Presence</strong> - Your presence gets sent to all clients in rooms you share. DND=Do not disturb. XE=Extended Away. The status field can be any string.</li>
                <li><strong>Delta Lists</strong> - After initial login, the client should only receive changes to who is online.</li>
            </ul>
            -->

            <!-- End Main Content -->
        </div>


        <div id="chatwrapper" class="hidden">

            <div class="box box-solid ">
                <div class="box-header with-border">
                    <h3 class="box-title"><i class="ion ion-inline ion-person-add"></i> Chat</h3>
                </div>
                <!-- /.box-header -->
                <div style="padding:0px;" class="box-body">

                    <div class="chat-users">
                        <ul></ul>
                    </div>



                    <input type="text" id="mychatid" value="" />
                    <input type="text" id="activeChatUserId" value="0" />


                    <button onClick="clearAllChatHistory();">Clear history</button>

                    <div class="preconnection hidden">


                        <input type="hidden" id="userNameField" value="Baijinge~38063~X~0~122~4~1~1~0" />

                        <input type="hidden" id="credentialField" value="1234" />

                        <div>
                            <button id="connectButton" onclick="connect();">Connect to Chat</button>
                        </div>
                    </div>
                    <div class="postconnection hidden">
                        <button onclick="disconnect();">Disconnect from server.</button>
                    </div>
                    <div class="hidden">
                        Presence:
                        <input type="radio" name="presence" onclick="setPresence('away');"/>away
                        <input type="radio" name="presence" checked onclick="setPresence('chat');"/>chat
                        <input type="radio" name="presence" onclick="setPresence('dnd');"/>dnd
                        <input type="radio" name="presence" onclick="setPresence('xa');"/>xa
                        <input type="text" onkeyup="updatePresenceStatus(this.value);" />
                    </div>
                    <div class="hidden">
                        Quick Join -

                        <div id="quickJoinBlock"></div> <button onclick="refreshRoomList();"> Refresh</button>
                        <button id="joinRoomEveryone" onclick="addRoom(null, null, true);">or join </button>
                        <input id="roomToAdd" type="text" size="20" value="" />

                        <button id="joinRoomPrivate" onclick="addRoomPrivate(null, null, true);">or join </button>
                        <input id="roomToAddPrivate" type="text" size="20" value="" />

                        <br>
                        Optional room parameters<input id="optRoomParms" type="text" size="20"/>

                    </div>

                    <div class="postconnection hidden">
                        <div id="sendMessageArea">

                            <div id="iam">Not connected yet</div>
                            Rooms:
                            <div id="rooms"></div>
                        </div>

                    </div>








                </div>

                <!-- /.box-body -->
            </div>

        </div>



        <div class="chatwindow hidden" id="chatwindow">

            <div class="box box-solid ">
                <div class="box-header with-border">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" style="font-size:25px;">×</span>
                    </button>
                    <h3 class="box-title"><i class="ion ion-inline ion-person-add"></i> Chat with XXX</h3>
                </div>
                <div style="padding:0px;" class="box-body">

                    <div id="receiveMessageArea">
                        Received Messages:
                        <div id="conversationOLD"></div>
                    </div>
                </div>


                <div class="box-footer">
                    <textarea id="sendMessageTextChatOLD" placeholder="Enter your message here"></textarea>
                    <button data-target="bB0mh5_NYsS3K2l0QcLe" data-room="everyone0" class="btn btn-block btn-primary sendChatButton">Send</button>
                </div>

                <!-- /.box-body -->
            </div>

        </div>

    </div>
    <!-- CHAT OLD SIDEBAR ENDS ##################################################################################### -->     <!--===================================================-->
    <!--END NAVBAR-->


    <div id="userpage-header">


        <div id="bg-cover" style="height: 300px;margin: 50px -50px 0;  background-position: center;background-size: cover;">
            <a class="btn-link btn-sm pull-right photolink" id="changecover"><span class="changecover-text">Change cover</span></a>
        </div>

        <button class="savebuttonPhoto hidden"></button>

        <div id="userpage-barwrapper" style="height: 75px;background: #fff;border-bottom: 1px solid #e1e8ed;">

            <div class="wrapper userpage-wrapper">

                <div class="col-md-9 no-padding">
                    <div id="userpage-imagewrapper" style="display: inline-block;background: #fff;border: 5px solid #fff;border-radius: 50%;margin-left: 20px;height: 210px;width: 210px;margin-top: -125px;overflow: hidden;">
                        <div style="position: absolute;">
                            <img class="img-circle" id="changephoto" src="https://www.bitgab.com/uploads/profile/files/default.png" alt="Baijinge" style="width: 200px;height: 200px;color:#fff;">
                            <div id="profileImgChanger" class="profilephotolink photolink"><span><i class="ion ion-camera"></i></span></div>
                        </div>
                    </div>
                    <div id="userpage-titlewrapper" style="display: inline-block; height: 75px; width: calc(100% - 245px); vertical-align: top; padding: 1px 10px;">

                        <div style="display: flex;align-items: center;">

                            <div id="userpage-usernamewrapper" style="font-size: 31px; margin-right: 5px; max-width: calc(100% - 115px); text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">Baijinge</div>

                            <span id="userpage-scorewrapper" style="color: #777; display: flex; align-items: center; font-size: 26px;margin-left: 3px;" class="modaluserscore"><i style="color:#ffb90f !important;margin-right: 4px;" class="ion ion-android-star"></i> <span> 0</span></span>
                        </div>

                        <div id="userpage-nametitlewrapper" style="font-size: 18px;color: #8899a6;line-height: 18px;">
                            <span class="hidden-xs hidden-sm">English student (beginner level)</span>
                            <span class="hidden-md hidden-lg">Seoul, South Korea</span>
                        </div>


                    </div>

                </div>

                <div class="col-md-3 hidden-xs hidden-sm no-padding" id="action-buttons">
                    <div style="height: 75px;display: flex;justify-content: center;align-items: center;">





                    </div>
                </div>

            </div>

        </div>

        <div class="hidden-md hidden-lg no-padding" id="action-buttons-mobile"></div>

    </div>


    <div class="wrapper userpage-wrapper">


        <!-- Main content -->
        <section class="content">
            <div class="row">
                <div class="col-xs-12 no-padding">


                    <div class="col-md-3 hidden-xs hidden-sm userpage-scroller-width">


                        <div id="userpage-infobox">

                            <ul style="padding-left:0;">


                                <li id="bio-wrapper"><a href="#enter-bio-modal" data-toggle="modal" data-target="#enter-bio-modal" style="font-weight:600;">Add bio</a></li><hr>
                                <li>
                                    <div><b>Location</b></div>
                                    <div>Seoul, South Korea</div>
                                </li>

                                <li>
                                    <div><b>Languages</b></b></div>
                                    <div>Chinese</div>
                                </li>





                                <li>
                                    <a href="https://www.bitgab.com/en/profile" style="font-weight:600;">Edit info</a>
                                </li>

                                <hr>
                            </ul>
                        </div>





                        <div class="hidden-xs hidden-sm">
                            <!--===================================================-->
                            <div class="footer-mini">
                                <div class="footer-mini-links">
                                    <div class="company-name">©2020 bitgab LLC</div>
                                    <a class="btn-link" target="_blank" href="https://www.bitgab.com/en/terms">Terms</a>
                                    <a class="btn-link" target="_blank" href="https://www.bitgab.com/en/privacy">Privacy</a>
                                    <a class="btn-link" target="_blank" href="https://www.bitgab.com/en/cookies">Cookies</a>
                                    <a class="btn-link" data-toggle="modal" href="#contact-modal" id="footer-contact-link">Contact Us</a>
                                    <a class="btn-link" target="_blank" href="https://www.facebook.com/bitgabEnglish">Facebook</a>
                                    <a class="btn-link" target="_blank" href="https://www.twitter.com/bitgabEnglish">Twitter</a>
                                </div>
                            </div>          <!--===================================================-->


                            <div id="userpage-scroller" class="box box-solid hidden-xs hidden-sm hidden-1024 ">
                                <a href="#" id="userpage-scroller-trigger" style="margin-top: 50px;padding: 5px 10px;display: block;text-decoration: none;">
                                    <div style="display: inline-block;vertical-align: middle;"><img class="img-circle" src="https://www.bitgab.com/uploads/profile/files/default.png" alt="Baijinge" style="width: 60px;height: 60px;border: 4px solid #fff;"></div>
                                    <div style="display: inline-block;vertical-align: middle;width: calc(100% - 70px);margin-left: 2px;">
                                        <div style="font-size: 18px;font-weight:600;text-overflow: ellipsis;overflow: hidden;white-space: nowrap;">Baijinge</div><div style="font-size: 13px;color: #8899a6;">English student (beginner level)</div></div>
                                </a>

                                <hr style="margin:0;">

                                <div id="timeline-links-scroller" style="border: none;padding:8px 4px;text-align:center;">




                                    <a href="/baijinge/posts" class="section-posts " style="padding: 0 4px;font-weight: 600;">Posts</a>




                                    <a href="/baijinge/quizzes" class="section-quizzes " style="padding: 0 4px;font-weight: 600;">Quizzes</a>


                                    <a href="/baijinge/groups" class="section-groups " style="padding: 0 4px;font-weight: 600;">Groups</a>
                                    <a href="/baijinge/friends" class="section-friends " style="padding: 0 4px;font-weight: 600;">Friends</a>
                                    <a href="/baijinge/favorite-teachers" class="section-followers " style="padding: 0 4px;font-weight: 600;">Fav. Teachers</a>

                                </div>

                                <hr style="margin:0;">

                                <div id="action-buttons-scroll">

                                </div>

                            </div>

                        </div>


                    </div>


                    <div class="col-md-6 no-padding-md" id="quizTimeline">


                        <div id="timeline-links">



                            <a href="/baijinge/posts" class="section-posts " style="padding: 6px 12px;font-size: 18px;line-height: 26px;font-weight: 600;">Posts</a>




                            <a href="/baijinge/quizzes" class="section-quizzes " style="padding: 6px 12px;font-size: 18px;line-height: 26px;font-weight: 600;">Quizzes</a>



                            <a href="/baijinge/groups" class="section-groups " style="padding: 6px 12px;font-size: 18px;line-height: 26px;font-weight: 600;">Groups</a>

                            <a href="/baijinge/friends" class="section-friends " style="padding: 6px 12px;font-size: 18px;line-height: 26px;font-weight: 600;">Friends</a>
                            <a href="/baijinge/favorite-teachers" class="section-followers " style="padding: 6px 12px;font-size: 18px;line-height: 26px;font-weight: 600;">Favorite Teachers</a>


                            <!--
		   <a href="/baijinge/find-friends" class="section-followers active" style="padding: 6px 12px;font-size: 18px;line-height: 26px;font-weight: 600;">Search</a>


		   <a href="/baijinge/find-teachers" class="section-followers hidden" style="padding: 6px 12px;font-size: 18px;line-height: 26px;font-weight: 600;">Search</a>
			-->






                        </div>


                        <div id="search-results-hider" class="" style="display: flex;align-items: center;justify-content: space-between;padding: 10px 10px 10px 20px;font-weight: 600;color: #777;background: #f3fafe;border: 1px solid #e1e8ed;border-bottom: 0;"><span>Search results</span>
                            <a type="button" class="close" data-dismiss="modal" aria-label="Close" style="font-size: 28px;line-height: 20px;margin-right: 5px;">
                                <span aria-hidden="true">×</span>
                            </a>
                        </div>

                        <div id="quizzeswrap" class="hidden">


                            <div class="empty-settings hidden" style="height:220px;font-size: 24px;display: flex;align-items: center;justify-content: center;"><span>No exercises</span></div>


                        </div>

                        <div id="demo-chat-body" class="collapse in hidden">

                            <div id="ask-question-box" style="border: 0;border-bottom: 1px solid #e8e8e8;margin-bottom: 0;border-radius:0;" class="panel-footer ">
                                <div class="row">
                                    <div class="col-xs-1 pull-left image" style="width: 65px;">
                                        <img alt="Baijinge" class="img-circle img-sm" src="https://www.bitgab.com/uploads/profile/files/default.png">
                                    </div>
                                    <form class="form-self-enabler">
                                        <div id="qa-text-area" class="col-xs-11 no-padding" style="width:calc(100% - 80px);">
                                            <a href="#" class="photolink-posts" style="position: absolute;right: 3px;top: 4px;color: #8899a6;opacity: 0.9;"><i class="ion ion-ios-camera" style="font-size: 24px;margin-right: 5px;"></i></a>
                                            <textarea placeholder="Share a thought, ask a question or start a new discussion..." class="form-control chat-input" id="message" name="message"></textarea>
                                        </div>
                                        <div class="col-xs-12" style="display:none;" id="sendcommentwrap">


                                            <div id="photo-placeholder-post" class="hidden"></div>
                                            <div class="imgUploadErrorPost hidden" style="font-size:14px;color:red;margin-left:10px;">This image doesn't meet the min/max sizing requirements</div>
                                            <input type="hidden" id="photo-post" name="photo-post" value="">

                                            <div style="display: flex;margin-top: 10px;">
                                                <button class="btn btn-default btn-sm" type="button" id="cancelcomment" style="margin-left: auto; margin-right:6px;width:60px;">Cancel</button>
                                                <button class="btn btn-primary btn-sm savebuttonPost" type="submit" style="width:60px;">Share</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>


                            <div class="empty-settings hidden" style="height:220px;font-size: 24px;display: flex;align-items: center;justify-content: center;"><span>No posts</span></div>


                            <div class="nano-content pad-all">
                                <ul class="list-unstyled media-block" id="messages"></ul>
                            </div>

                        </div>


                        <div class="tab-pane hidden" id="friends-tab">


                            <div class="empty-settings hidden" style="height:217px;font-size: 24px;display: flex;align-items: center;justify-content: center;"><span>No followers</span></div>


                            <div class="box-body no-padding">
                                <ul class="products-list product-list-in-box" id="friendswrap" style="margin:3px 10px 0 10px;"></ul>
                                <button class="btn btn-lg btn-default hidden" type="submit" style="display:block;margin:10px auto;" id="loadmorefriends">View more</button>
                                <div id="loadmorefriendsspinner" style="display: flex;align-items: center;justify-content: center;">
                                    <div class="spinner grey hidden" style="margin:14.5px 0;"></div>
                                    <div>

                                    </div>
                                </div>
                            </div>

                        </div>
                        <!-- /.tab-pane -->



                        <div class="tab-pane hidden" id="teachers-tab">

                            <div class="empty-settings hidden" style="height:217px;font-size: 24px;display: flex;align-items: center;justify-content: center;"><span>No teachers</span></div>

                            <div class="box-body no-padding">

                                <ul class="products-list product-list-in-box" style="margin:3px 10px 0 10px;" id="teacherswrap">

                                </ul>
                                <button class="btn btn-lg btn-default hidden" type="submit" style="display:block;margin:10px auto;" id="loadmoreteachers">View more</button>
                                <div id="loadmoreteachersspinner" style="display: flex;align-items: center;justify-content: center;"><div class="spinner grey hidden" style="margin:14.5px 0;"></div><div></div></div>
                            </div>

                        </div>
                        <!-- /.tab-pane -->






                        <!-- findFriends -->
                        <div class="tab-pane " id="findfriends-tab">

                            <!--
              <div class="settings-box-header">
                <div class="box-header" style="padding-top:0;">
                <div class="pull-left">
                  <h3 class="box-title">Search results</h3>
                </div>
                <div class="pull-right">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="closeFindFriends">
                    <span aria-hidden="true">×</span>
                  </button>
                </div>
                </div>
              </div>
-->

                            <div class="box-body no-padding">

                                <ul class="products-list product-list-in-box" style="margin:0 10px;" id="findfriendswrap">
                                    <div class="noresult empty-settings hidden">No results found</div>
                                </ul>
                                <button class="btn btn-default hidden" style="display:block;margin:10px auto;" type="submit" id="loadmorefindfriends">View more</button>
                                <div id="loadmorefindfriendsspinner" style="display: flex;align-items: center;justify-content: center;">
                                    <div class="spinner grey hidden" style=""></div>
                                    <div></div></div>
                            </div>
                        </div>
                        <!-- /.tab-pane -->




                        <!-- findTeachers -->
                        <div class="tab-pane hidden" id="findteachers-tab">

                            <!--
              <div class="settings-box-header">
                <div class="box-header" style="padding-top:0;">
                <div class="pull-left">
                  <h3 class="box-title">Search results</h3>
                </div>
                <div class="pull-right">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="closeFindTeachers">
                    <span aria-hidden="true">×</span>
                  </button>
                </div>
                </div>
              </div>
-->

                            <div class="box-body no-padding">

                                <ul class="products-list product-list-in-box" style="margin:0 10px;" id="findteacherswrap">
                                    <div class="noresult empty-settings hidden">No results found</div>
                                </ul>
                                <button class="btn btn-default hidden" type="submit" style="display:block;margin:10px auto;" id="loadmorefindteachers">View more</button>
                                <div id="loadmorefindteachersspinner" style="display: flex;align-items: center;justify-content: center;"><div class="spinner grey hidden" style=""></div><div></div></div>
                            </div>


                        </div>
                        <!-- /.tab-pane -->




                        <!-- findTeachers -->
                        <div class="tab-pane hidden" id="findgroups-tab">

                            <div class="box-body no-padding">

                                <ul class="products-list product-list-in-box" style="margin:0 10px;" id="findgroupswrap">
                                    <div class="noresult empty-settings hidden">No results found</div>
                                </ul>
                                <button class="btn btn-default hidden" type="submit" style="display:block;margin:10px auto;" id="loadmorefindgroups">View more</button>
                                <div id="loadmorefindgroupsspinner" style="display: flex;align-items: center;justify-content: center;"><div class="spinner grey hidden" style=""></div><div></div></div>
                            </div>


                        </div>
                        <!-- /.tab-pane -->






                        <!--
            <div class="empty-results hidden"></div>

            <button id="endSearch" onclick="window.location='/en/quiz'" class="btn btn-default hidden" style="display:block;margin:0 auto 25px;font-size:18px;color:#777;">View all</button>
                -->


                        <input type="hidden" id="quizfrom" value="0">
                        <input type="hidden" id="quizlimit" value="0">

                    </div>




                    <div class="col-md-3 hidden-xs hidden-sm">




                        <div class="tab-pane bordered-box-no-shadow " id="bitgab-connect-tab">
                            <div class="settings-box-header">
                                <div class="box-header" style="padding:0 15px 10px;">
                                    <h3 class="box-title">Find people you know</h3>
                                    <div style="font-size:13px;">Import contacts from your address book</div>
                                </div>
                            </div>

                            <div class="box-body no-padding">


                                <div style="padding:5px 5px 0px 10px;display: block;overflow: auto;"><a class="" href="https://accounts.google.com/o/oauth2/auth?response_type=code&redirect_uri=https%3A%2F%2Fwww.bitgab.com%2Fen%2Fprofile%3Finvite%3Dgooglecontacts&client_id=1008966626376-2hq462l9ffr1lilgf3281o1n07pv9hs7.apps.googleusercontent.com&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcontacts.readonly&access_type=offline&approval_prompt=force" style="font-size: 15px;line-height: 30px;display: inline-block;vertical-align: middle;"><img src="https://www.bitgab.com/assets-dashboard/img/gmail_icon.png" style="height: 30px;margin-right: 10px;display: inline-block;vertical-align: middle;">Google</a></div>

                                <hr style="margin:5px 0;">

                                <div style="padding:5px 5px 0px 10px;display: block;overflow: auto;"><a class="" href="https://login.live.com/oauth20_authorize.srf?client_id=000000004819742D&scope=wl.signin%20wl.basic%20wl.emails%20wl.contacts_emails&response_type=code&redirect_uri=https://www.bitgab.com/en/profile?invite=hotmailcontacts" style="font-size: 15px;line-height: 30px;display: inline-block;vertical-align: middle;"><img src="https://www.bitgab.com/assets-dashboard/img/hotmail_icon.png" style="height: 30px;margin-right: 10px;display: inline-block;vertical-align: middle;">Hotmail</a></div>

                                <hr style="margin:5px 0;">

                                <div style="padding:5px 5px 0px 10px;display: block;overflow: auto;"><a class="" href="https://www.bitgab.com/apps/contact-importer/yahooAuth.php" style="font-size: 15px;line-height: 30px;display: inline-block;vertical-align: middle;"><img src="https://www.bitgab.com/assets-dashboard/img/yahoo_icon.png" style="height: 30px;margin-right: 10px;display: inline-block;vertical-align: middle;">Yahoo</a></div>

                            </div>

                        </div>


                        <div class="box box-solid" id="findFriendsBox">
                            <div class="box-header with-border" style="padding: 0 10px 10px;">
                                <h3 class="box-title" style="padding-top:10px;">Find Friends</h3>
                            </div>
                            <!-- /.box-header -->
                            <form action="/baijinge/find-friends" method="get" id="searchFormProfile">

                                <div class="box-body" style="padding:5px 5px 0;">

                                    <div class="profile-item" style="margin-top:5px;">
                                        <p>Name</p>
                                        <input type="text" placeholder="Find by name" name="qname" id="qname" class="form-control" value="">
                                    </div>

                                    <div class="profile-item ">
                                        <p>City</p>
                                        <input type="text" placeholder="Find by city" name="qcity" id="qcity" class="form-control" value="">
                                    </div>

                                    <div class="profile-item ">
                                        <p>Country</p>
                                        <input type="text" placeholder="Find by country" name="qcountry" id="qcountry" class="form-control" value="">
                                    </div>

                                    <div class="profile-item">
                                        <p>Level</p>
                                        <input type="hidden" value="" id="activeqlevel">
                                        <select class="form-control" name="qlevel" id="qlevel" style="margin-bottom:10px;">
                                            <option value="">Find by level</option>
                                            <option value="1">Beginner</option>
                                            <option value="2">Intermediate</option>
                                            <option value="3">Advanced</option>
                                        </select>
                                    </div>

                                    <div class="profile-item ">
                                        <p>Job/Career</p>
                                        <input type="hidden" value="null" id="activeqprofession">
                                        <select name="qprofession" id="qprofession" class="form-control">
                                            <option value="null" selected>Find by job/career</option>
                                            <optgroup data-value="1" label="Art & Culture">
                                                <option value="2">Actor/actress</option>
                                                <option value="7">Visual artist</option>
                                                <option value="6">Singer</option>
                                                <option value="3">Film director</option>
                                                <option value="8">Writer</option>
                                                <option value="5">Musician</option>
                                                <option value="4">Journalist</option>
                                                <option value="9">Art & Culture - Other</option>
                                            </optgroup>
                                            <optgroup data-value="33" label="Science & Education">
                                                <option value="34">Biologist</option>
                                                <option value="37">Professor</option>
                                                <option value="38">Scientist</option>
                                                <option value="36">Physicist</option>
                                                <option value="39">Teacher</option>
                                                <option value="35">Chemist</option>
                                                <option value="40">Science & Education - Other</option>
                                            </optgroup>
                                            <optgroup data-value="18" label="Industry & Services">
                                                <option value="29">Lawyer</option>
                                                <option value="20">Administrative assistant</option>
                                                <option value="24">Architect</option>
                                                <option value="27">Flight attendant</option>
                                                <option value="30">Salesperson</option>
                                                <option value="19">Accountant</option>
                                                <option value="22">Air traffic controller</option>
                                                <option value="28">Graphic designer</option>
                                                <option value="25">Economist</option>
                                                <option value="31">Software engineer</option>
                                                <option value="26">Engineer</option>
                                                <option value="23">Aircraft pilot</option>
                                                <option value="21">Advertising specialist</option>
                                                <option value="32">Industry & Services - Other</option>
                                            </optgroup>
                                            <optgroup data-value="10" label="Healthcare">
                                                <option value="11">Nurse</option>
                                                <option value="12">Pharmacist</option>
                                                <option value="13">Physical therapist</option>
                                                <option value="14">Physician</option>
                                                <option value="15">Psychologist</option>
                                                <option value="16">Veterinarian</option>
                                                <option value="17">Healthcare - Other</option>
                                            </optgroup>
                                            <optgroup data-value="41" label="Public Services">
                                                <option value="42">Firefighter</option>
                                                <option value="43">Judge</option>
                                                <option value="44">Serviceperson</option>
                                                <option value="45">Police officer</option>
                                                <option value="46">Public Services - Other</option>
                                            </optgroup>
                                        </select>
                                    </div>

                                    <div class="profile-item ">
                                        <p>High School or University</p>
                                        <input type="text" placeholder="Find by high school or university" name="quniversity" id="quniversity" class="form-control" value="">
                                    </div>

                                    <div class="profile-item ">
                                        <p>Language School</p>
                                        <input type="text" placeholder="Find by language school" name="qcollege" id="qlanguageschool" class="form-control" value="">
                                    </div>

                                </div>

                                <div class="box-footer">
                                    <button id="findFriendsSubmitButton" type="submit" class="btn btn-primary btn-block"><span style="font-weight:600;">Search</span></button>
                                </div>
                                <input type="hidden" name="search" value="1">

                            </form>

                            <!-- /.box-body -->
                        </div>










                    </div>



                </div>
                <!-- /.row -->
        </section>
        <!-- /.content -->

    </div>
    <!-- ./wrapper -->
</div>






<!--===================================================-->
<div class="modal" id="grammar-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true" data-html2canvas-ignore="true">×</span></button>
                <h4 class="modal-title"><span class="grammartitle"></span>
                </h4>
            </div>
            <div class="spinnerWrapper"><div class="spinner grey"></div></div>
            <div class="modal-body">
                <p></p>
            </div>
            <div class="modal-footer" data-html2canvas-ignore="true">
                <button type="button" class="btn btn-lg btn-default" data-dismiss="modal" style="display:block;margin:0 auto;">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->




<div class="modal" id="contact-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Contact Form</h4>
                <h4 class="modal-title school-enquiry school-enquiry-title hidden">School inquiry</h4>
            </div>
            <form class="form form-self-enabler">
                <div class="modal-body">

                    <div class="form-group">
                        <p>Use this form to send us your suggestions or report any problems. We will contact you via your account email if necessary.</p>
                        <!--<p>Utiliza este formulario si tienes alguna incidencia con el servicio. Si fuese necesario, nos pondremos en contacto contigo a través del email de tu cuenta.</p>-->
                        <!--<p>Para enviarnos sugerencias acerca del servicio o cualquier otro comentario, por favor utiliza el <a href="#contact-modal" data-toggle="modal" data-target="#feedback-modal" data-dismiss="modal">formulario de sugerencias</a>.</p>-->
                    </div>

                    <div class="form-group school-enquiry school-enquiry-text hidden">
                        <p>Let us know a little bit more about your school. We will send you more information to your email.</p>
                    </div>

                    <div class="form-group">
                        <label class="menu-item-header" style="font-weight:600;">Subject</label>
                        <div class="input-group-btn">

                            <select class="form-control contactcategory">
                                <option value="1" selected>Feedback</option>
                                <option value="2">Problem with my account</option>
                                <option value="3">Problem with the service</option>
                                <option value="4">Problem with a payment</option>
                                <option value="5">Issue with a teacher</option>
                                <option value="6">Issue with another user</option>
                                <option value="7">Other</option>
                            </select>
                        </div>
                    </div>


                    <!-- textarea -->
                    <div class="form-group">
                        <label class="menu-item-header" style="font-weight:600;">Message</label>
                        <textarea class="form-control contactmessage" name="contactmessage" rows="5" placeholder="Enter your message..."></textarea>
                    </div>

                </div>
                <div style="text-align:center;padding:0 0 30px 0;" class="contactbuttons">
                    <button type="submit" class="btn btn-primary btn-lg contactsubmit" data-contact="student" style="margin-right:10px;width:100px;">Send</button>
                    <a type="button" class="btn btn-default btn-lg" data-dismiss="modal" style="width:100px;">Cancel</a>
                </div>
            </form>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->



<div class="modal" id="contact-modal-teacher" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Contact Form</h4>
            </div>
            <form class="form form-self-enabler">
                <div class="modal-body">

                    <div class="form-group">
                        <p>Use this form to send us your suggestions or report any problems. We will contact you via your account email if necessary.</p>
                        <p>Make sure to check our <a href="/en/faq" target="_blank">FAQ</a> as this covers a lot of our most common enquiries.</p>
                        <!--<p>Utiliza este formulario si tienes alguna incidencia con el servicio. Si fuese necesario, nos pondremos en contacto contigo a través del email de tu cuenta.</p>-->
                        <!--<p>Para enviarnos sugerencias acerca del servicio o cualquier otro comentario, por favor utiliza el <a href="#contact-modal" data-toggle="modal" data-target="#feedback-modal" data-dismiss="modal">formulario de sugerencias</a>.</p>-->
                    </div>

                    <div class="form-group">
                        <label class="menu-item-header" style="font-weight:600;">Subject</label>
                        <div class="input-group-btn">
                            <select class="form-control contactcategory">
                                <option value="1" selected="selected">Feedback</option>
                                <option value="2">Problem with my account</option>
                                <option value="3">Problem with the service</option>
                                <option value="8">Problem receiving a payment</option>
                                <option value="6">Issue with another user</option>
                                <option value="7">Other</option>
                            </select>
                        </div>
                        <!--
        	<p style="font-size: 13px;color: #888;padding: 7px 0 0 7px;">If you're contacting us about publishing topics on bitgab, please enter your teaching qualifications and/or experience below</p>
        -->
                    </div>
                    <!-- text input -->

                    <!--<div class="form-group">
          <label style="font-weight:600;">Título</label>
          <input type="text" class="form-control" placeholder="Título del mensaje" style="width:99.5%;">
        </div>-->

                    <!-- textarea -->
                    <div class="form-group">
                        <label class="menu-item-header" style="font-weight:600;">Message</label>
                        <textarea class="form-control contactmessage" name="contactmessage" rows="5" placeholder="Enter your message..."></textarea>
                    </div>

                </div>
                <div style="text-align:center;padding:0 0 30px 0;" class="contactbuttons">
                    <button type="submit" class="btn btn-primary btn-lg contactsubmit" data-contact="teacher" style="margin-right:10px;width:100px;">Send</button>
                    <a type="button" class="btn btn-default btn-lg" data-dismiss="modal" style="width:100px;">Cancel</a>
                </div>
            </form>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->



<div class="modal" id="survey-modal-school" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">bitgab for Schools</h4>
            </div>
            <form class="form">
                <div class="modal-body">

                    <div class="survey-explainer" style="margin:10px 0 20px;">
                        <p>For a limited time, you can get a <b>free lifetime subscription to bitgab for Schools</b>.</p>
                        <p>With <b>bitgab for Schools</b>, the students and teachers at your school will enjoy a better experience using bitgab, with exclusive access to special content and features. Some of these include:</p>
                        <table class="table borderless" style="margin-bottom: 10px;">
                            <tbody>
                            <tr>
                                <td class="cell-icon"><i class="ion ion-checkmark"></i></td>
                                <td><p class="cell-text"><b>Private and unlimited access to bitgab</b>, using your own unique subdomain (yourschoolname.bitgab.com)</p></td>
                            </tr>
                            <tr>
                                <td class="cell-icon"><i class="ion ion-checkmark"></i></td>
                                <td><p class="cell-text">Ability to <b>create your own language learning activities</b> to use in class or as an alternative to doing homework</p></td>
                            </tr>
                            <tr>
                                <td class="cell-icon"><i class="ion ion-checkmark"></i></td>
                                <td><p class="cell-text"><b>Track student progress</b> with personalized reports and analytics</p></td>
                            </tr>
                            <tr>
                                <td class="cell-icon"><i class="ion ion-checkmark"></i></td>
                                <td><p class="cell-text"><b>Send messages</b> to student groups, provide <b>online tutoring</b>, and much more</p></td>
                            </tr>
                            </tbody>
                        </table>
                        <p>To create an account for your school, please complete the form below.</p>
                    </div>

                    <div class="form-group">
                        <input class="form-control survey" id="surveyschoolname" name="surveyschoolname" placeholder="What is your school's name?">
                    </div>

                    <div class="form-group">
                        <input class="form-control survey" id="surveyschoolchannel" name="surveyschoolchannel" placeholder="What is your school's website?">
                    </div>

                    <div class="form-group">
                        <div class="input-group-btn">

                            <select class="form-control survey" id="surveyschoolrole">
                                <option disabled selected>What is your role at the school?</option>
                                <option value="student">Student</option>
                                <option value="teacher">Teacher/Faculty</option>
                            </select>
                        </div>
                    </div>

                    <!--
        <div class="form-group">
        <div class="input-group-btn">

          <select class="form-control survey" id="surveyschoolchannel">
			      <option disabled selected>How did you hear about bitgab?</option>
            <option value="search">Through an online search (Google, Bing, etc.)</option>
            <option value="social">Through Social Media (Facebook, Twitter, etc.)</option>
            <option value="website">Through a Blog or website</option>
            <option value="mouth">Someone recommend it to me</option>
            <option value="other">Other</option>
          </select>
        </div>
        </div>
-->

                    <!-- textarea -->
                    <div class="form-group">
                        <label class="menu-item-header" style="font-weight:600;">If you have a question or comment for us, please let us know</label>
                        <textarea id="surveyschoolfeedback" class="form-control contactmessage" name="contactmessage" rows="5" placeholder="Enter your message..."></textarea>
                    </div>

                </div>
                <div style="text-align:center;padding:0 0 30px 0;" class="contactbuttons">
                    <button type="submit" class="btn btn-primary btn-lg" style="margin-right:10px;width:100px;" disabled>Send</button>
                    <a type="button" class="btn btn-default btn-lg" data-dismiss="modal" style="width:100px;">Cancel</a>
                </div>
            </form>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->





<div class="modal" id="survey-modal-usage" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Feedback</h4>
            </div>
            <form class="form">
                <div class="modal-body">

                    <div style="margin:10px 0 20px;font-size:18px;">
                        Please help us improve bitgab by completing the following form:
                    </div>

                    <input type="hidden" id="surveyusageusertype" value="student / C: 1 / L: 4">

                    <div class="form-group">
                        <div class="input-group-btn">

                            <select class="form-control survey" id="surveyusagelikemost">
                                <option disabled selected>What do you like most about bitgab?</option>
                                <option value="exercises">Exercises and quizzes</option>
                                <option value="chat-messages">Chat and messaging</option>
                                <option value="private-classes">Private classes with teachers</option>
                                <!--			<option value="group-classes">Group classes</option>-->
                                <option value="student-gabs">Video calls with other students</option>
                                <option value="grammar-vocabulary">Grammar and vocabulary</option>
                                <option value="posts-groups">Posts and groups</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="input-group-btn">

                            <select class="form-control survey" id="surveyusageimprovement">
                                <option disabled selected>What do you think needs improvement?</option>
                                <option value="exercises">Exercises and quizzes</option>
                                <option value="chat-messages">Chat and messaging</option>
                                <option value="private-classes">Private classes with teachers</option>
                                <!--			<option value="group-classes">Group classes</option>-->
                                <option value="student-gabs">Video calls with other students</option>
                                <option value="grammar-vocabulary">Grammar and vocabulary</option>
                                <option value="posts-groups">Posts and groups</option>
                            </select>
                        </div>
                    </div>

                    <!-- textarea -->
                    <div class="form-group">
                        <label class="menu-item-header" style="font-weight:600;">If you have a question or comment for us, please let us know</label>
                        <textarea id="surveyusagefeedback" class="form-control contactmessage" name="contactmessage" rows="5" placeholder="Enter your message..."></textarea>
                    </div>

                </div>
                <div style="text-align:center;padding:0 0 30px 0;" class="contactbuttons">
                    <button type="submit" class="btn btn-primary btn-lg" style="margin-right:10px;width:100px;" disabled>Send</button>
                    <a type="button" class="btn btn-default btn-lg" data-dismiss="modal" style="width:100px;">Cancel</a>
                </div>
            </form>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->



<div class="modal" id="survey-modal-paid" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title"><b>PREMIUM</b> Feedback</h4>
            </div>
            <form class="form">
                <div class="modal-body">

                    <div style="margin:10px 0 20px;font-size:18px;">
                        Please help us improve bitgab PREMIUM by completing the following form:
                    </div>

                    <input type="hidden" id="surveypaidusertype" value="P:  / C: 1 / L: 4">

                    <div class="form-group">
                        <div class="input-group-btn">

                            <select class="form-control survey" id="surveypaidlikemost">
                                <option disabled selected>What do you like most about bitgab PREMIUM?</option>
                                <option value="unlimited-exercises">Being able to complete unlimited exercises and quizzes</option>
                                <!--			<option value="unlimited-group-classes">Being able to join unlimited group classes</option>-->
                                <option value="ask-questions">Being able to ask questions to teachers anytime</option>
                                <option value="discounts-private-classes">Having discounts on private classes</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="input-group-btn">

                            <select class="form-control survey" id="surveypaidimprovement">
                                <option disabled selected>What bitgab PREMIUM feature you use the least?</option>
                                <option value="unlimited-exercises">Being able to complete unlimited exercises and quizzes</option>
                                <!--			<option value="unlimited-group-classes">Being able to join unlimited group classes</option>-->
                                <option value="ask-questions">Being able to ask questions to teachers anytime</option>
                                <option value="discounts-private-classes">Having discounts on private classes</option>
                            </select>
                        </div>
                    </div>

                    <!-- textarea -->
                    <div class="form-group">
                        <label class="menu-item-header" style="font-weight:600;">If you have a question or comment for us, please let us know</label>
                        <textarea id="surveypaidfeedback" class="form-control contactmessage" name="contactmessage" rows="5" placeholder="Enter your message..."></textarea>
                    </div>

                </div>
                <div style="text-align:center;padding:0 0 30px 0;" class="contactbuttons">
                    <button type="submit" class="btn btn-primary btn-lg" style="margin-right:10px;width:100px;" disabled>Send</button>
                    <a type="button" class="btn btn-default btn-lg" data-dismiss="modal" style="width:100px;">Cancel</a>
                </div>
            </form>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->








<!--<div class="modal fade" id="feedback-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span></button>
        <h4 class="modal-title">Sugerencias</h4>
      </div>
      <div class="modal-body">
        <form role="form">

        <!-- text input --
        <div class="form-group">
          <p>¿Tienes una sugerencia? En bitgab agradecemos tus ideas o comentarios para mejorar el servicio.</p>
          <p>Para informar sobre incidencias o problemas con el servicio, por favor utiliza el <a href="#contact-modal" data-toggle="modal" data-target="#contact-modal" data-dismiss="modal">formulario de contacto</a>.</p>
        </div>

        <!-- textarea --
        <div class="form-group">
          <label style="font-weight:600;">Mensaje</label>
          <textarea class="form-control" rows="5" placeholder="Enter your message..." style="width:99.5%;"></textarea>
        </div>

      </form>
      </div>
      <div style="text-align:center;padding:0 0 30px 0;">
        <button type="button" class="btn btn-primary btn-lg" style="margin-right:10px;width:100px;">Enviar</button>
        <button type="button" class="btn btn-default btn-lg" data-dismiss="modal" style="width:100px;">Cancelar</button>
      </div>
    </div>
    <!-- /.modal-content --
  </div>
  <!-- /.modal-dialog --
</div>
<!-- /.modal --
-->







<!--INCOMING CALL-->


<div class="box box-primary box-solid hidden" id="incomingCall">
    <div class="box-header" style="padding: 7.5px 15px;">
        <h3 class="box-title" style="font-weight: 600;"><i class="fa fa-comments" style="font-size:20px;"></i> Conversation</h3>
    </div>

    <div class="item" style="padding: 15px;">
    </div>

    <input type="hidden" id="incomingCallId" value="0">
    <audio id="incomingCallAudio" src="/en/dashboard/audio/incomingcall.mp3" loop></audio>
</div>











<div class="modal" id="incompatible-gab-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Browser not compatible</h4>
            </div>
            <div class="modal-body" style="padding:10px 15px;">
                <div class="row alert alert-danger gab-text-explainer">
                    <div>
                        <h4 style="display: inline-block;font-size: 16px;font-weight:600;margin-bottom: 15px;"><i class="fa fa-exclamation-circle" style="margin-right:2px;"></i> Your browser is not compatible!</h4>
                    </div>
                    <div class="">
                        <p>A gab is a video call made directly through your browser. In order to use this technology, you must use a compatible browser.</p>
                        <p>The current compatible browsers are:</p>
                        <ul style="margin-top:-5px;margin-bottom:10px;padding-left: 55px;">
                            <li style="font-size:15px;">Google Chrome</li>
                            <li style="font-size:15px;">Mozilla Firefox</li>
                            <li style="font-size:15px;">Opera</li>
                        </ul>
                        <p>To start a gab, please download one of these browsers and try again.</p>
                    </div>
                    <div class="hidden">
                        <p>A gab is a video call made directly through your browser. In order to use this technology, you must use a compatible browser.</p>
                        <p>The current compatible browsers are:</p>
                        <ul style="margin-top:-5px;margin-bottom:10px;padding-left: 55px;">
                            <li style="font-size:15px;">Android Browser</li>
                            <li style="font-size:15px;">Chrome for Android</li>
                            <li style="font-size:15px;">Kindle Fire Silk</li>
                        </ul>
                    </div>
                </div>

                <p class="menu-item-header ">Choose a browser</p>
                <div class="row gab-list-wrapper ">
                    <a href="https://www.google.com/chrome/browser/desktop/" target="_blank" class="btn btn-gab-modal" style="overflow:auto;">
                        <div class="pull-left"><img src="/en/dashboard/img/Chrome.png" style="height: 32px;margin-right: 5px;"> Download Google Chrome</div> <div class="pull-right" style="margin-top: 3px;"><span class="chevron right"></span></div>
                    </a>
                    <a href="https://www.mozilla.org/en-US/firefox/new/" target="_blank" class="btn btn-gab-modal" style="overflow:auto;">
                        <div class="pull-left"><img src="/en/dashboard/img/Firefox.png" style="height: 32px;margin-right: 5px;"> Download Mozilla Firefox</div> <div class="pull-right" style="margin-top: 3px;"><span class="chevron right"></span></div>
                    </a>
                    <a href="http://www.opera.com/" target="_blank" class="btn btn-gab-modal" style="overflow:auto;">
                        <div class="pull-left"><img src="/en/dashboard/img/Opera.png" style="height: 32px;margin-right: 5px;"> Download Opera</div> <div class="pull-right" style="margin-top: 3px;"><span class="chevron right"></span></div>
                    </a>
                </div>
                <div class="hidden" style="text-align:center;padding:5px 0;">
                    <button type="button" class="btn btn-default btn-lg" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>




<div class="modal" id="user-profile-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <div class="modal-title"></div>
            </div>
            <div class="modal-body" style="padding:10px 20px;">
                <input type="hidden" class="modaluserid" />
                <div class="profileWidgetImg">
                    <img class="img-circle modaluserpic" src="https://www.bitgab.com/en/dashboard/img/av2.png" alt="User Avatar">
                </div>
                <div class="profileWidgetName" style="margin-top:-25px;">
                    <h3 class="widget-user-username" style="font-weight:500;font-size:24px;"><span style="margin-right:3px;" class="modalusername"></span> <span style="color:#777;" class="modaluserscore"></span> </h3>
                    <!--<h5 class="widget-user-desc modaluserslug" style="font-size:15px;line-height:18px;margin-bottom:0;color:#888;margin-top:0;">Learning </h5>-->
                </div>
                <div class="profileModalInfo">
                    <ul class="no-padding modaluserinfo">
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>




<div class="modal" id="teacher-profile-modal" role="dialog" aria-labelledby="myModalLabel" style="display: none;" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="background-image: none;">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <div class="modal-title"></div>
            </div>
            <div class="modal-body" style="padding:10px 20px;">
                <input type="hidden" class="modaluserid">
                <div class="profileWidgetImg">
                    <img class="img-circle modaluserpic" src="https://www.bitgab.com/en/dashboard/img/av2.png" alt="User Avatar">
                </div>
                <div class="profileWidgetName" style="margin-top:-25px">
                    <h3 class="widget-user-username" style="font-weight:500;font-size:24px;margin-bottom:0;display:flex;align-items:center;"><span class="modalusername" style="white-space: nowrap;max-width:225px;overflow: hidden;text-overflow: ellipsis;"></span> <span class="star-rating-wrap hidden"><input id="star-rating" type="number" class="rating form-control" data-size="xs" data-show-caption="false" data-show-clear="false" data-disabled="true" value="0"></span></h3>
                    <h5 class="hidden"><span class="teacher-hourly-rate-text">Hourly rate:</span> <span class="teacher-hourly-rate-price"></span></h5>
                </div>
                <div class="profileModalInfo" style="overflow:auto">
                    <ul class="no-padding modaluserinfo hidden">
                        <li><i class="ion ion-ios-location"></i> <span class="title">Location</span> <span class="data"></span></li><li><i class="ion ion-university"></i> <span class="title">University</span> <span class="data">Rutgers University</span></li><li><i class="ion ion-ios-world"></i> <span class="title">Other languages</span> <span class="data">Español, Francés</span></li>
                    </ul>
                </div>
            </div>

            <div class="modal-footer hidden" style="text-align:left;">

                <p style="font-size:20px;">Student reviews <span class="teacherreviewnum hidden">(20)</span></p>
                <div id="teacher-reviews" class="collapse in">
                    <input type="hidden" id="reviewsfrom"  value="0" />
                    <div class="nano-content pad-all">
                        <ul class="list-unstyled media-block" id="messages">

                        </ul>
                        <button class="btn btn-default hidden" type="submit" style="display:block;margin:10px auto;" id="loadmorereviews">View more</button>
                    </div>
                    <!--Widget footer-->



                </div>
            </div>

        </div>
    </div>
</div>









<div class="modal multi-step" id="payment-modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title step-1" data-step="1"><span style="font-weight:600;color:#5dae5d;">bitgab</span> <span style="font-weight:700;color:#5dae5d;">PREMIUM</span> <div class="pull-right hidden-xs" style="font-size:14px;font-weight:600;color: #aaa;margin-right:-5px;">Step 1 of 2</div></h4>
                <h4 class="modal-title step-2" data-step="2">Payment information <div class="pull-right hidden-xs" style="font-size:14px;font-weight:600;color: #aaa;margin-right:-5px;">Step 2 of 2</div></h4>
                <h4 class="modal-title step-3" data-step="3">Thank you!</h4>
                <h4 class="modal-title step-4" data-step="4">Error</h4>
            </div>
            <div class="modal-body step-1" data-step="1">


                <div class="subscription-feature-explainer">

                    <div id="pm-generic-text">
                        <p>By upgrading your account to <b style="color:#5dae5d;">PREMIUM</b> you will be able to:</p>
                    </div>

                    <div id="pm-daily-limit-text" class="hidden">
                        <!--					<p class="alert alert-info" style="margin: 13px -5px 20px;">With your free account you can submit <b>2 exercises per day up to a maximum of 10 per month</b>. To have unlimited access, you need a <b style="font-weight:700;color:#5dae5d;">PREMIUM</b> account.</p>-->
                        <p class="alert alert-info" style="margin: 13px -5px 20px;">With your free account you can complete <b>10 exercises per month</b>. To have unlimited access, you need a <b style="font-weight:700;color:#5dae5d;">PREMIUM</b> account.</p>
                        <p>With a <b style="font-weight:700;color:#5dae5d;">PREMIUM</b> account, you can:</p>
                    </div>

                    <div id="pm-only-subscribers-text" class="hidden">
                        <p class="alert alert-info" style="margin: 13px -5px 20px;">This functionality is available only for <b style="font-weight:700;color:#5dae5d;">PREMIUM</b> users.</p>
                        <p>With a <b style="font-weight:700;color:#5dae5d;">PREMIUM</b> account, you can:</p>
                    </div>

                    <table class="table borderless">
                        <tbody>
                        <tr>
                            <td class="cell-icon"><i class="ion ion-checkmark"></i></td>
                            <td><p class="cell-text">Have <b>unlimited access</b> to all exercises on bitgab</p></td>
                        </tr>
                        <!--
                    <tr>
                      <td class="cell-icon"><i class="ion ion-checkmark"></i></td>
                      <td><p class="cell-text">Join <b>unlimited group classes</b></p></td>
                    </tr>
-->
                        <tr>
                            <td class="cell-icon"><i class="ion ion-checkmark"></i></td>
                            <td><p class="cell-text">Get a <b>50% discount on private classes</b> with bitgab teachers</p></td>
                        </tr>
                        <tr>
                            <td class="cell-icon"><i class="ion ion-checkmark"></i></td>
                            <td><p class="cell-text"><b>Ask questions</b> to our teachers anytime</p></td>
                        </tr>
                        <!--
                    <tr>
                      <td class="cell-icon"><i class="ion ion-checkmark"></i></td>
						<td><p class="cell-text">(Schools) Provide <b>unlimited access</b> to all school students and teachers along with <b>special functionalities and progress reports</b></p></td>
                    </tr>
-->
                        </tbody>
                    </table>
                </div>





                <div class="modal-item">



                    <input type="hidden" id="onlycredit" value="0" />

                    <p class="menu-item-header">Select plan</p>

                    <label class="payment-option-label">
                        <div class="alert alert-grey payment-modal-option">
                            <div class="radio-button-cell">
                                <input id="subscription1" name="plan" type="radio" data-stripeplan="plan_GXcqIL3AOonLqs" data-paypalplan="P-0C0729813T4020730NSJNEQY" data-price="1150" data-duration="1" value="1" data-credits="0" data-credits-number="0" data-title="bitgab PREMIUM (Monthly)" checked>
                            </div>
                            <div class="description-cell">
                                <span class="description-cell-item">Monthly: <span style="display:inline-block">1150 KRW</span></span>
                                <div class="subscription-explainer">Billed monthly. Cancel anytime.</div>
                            </div>
                        </div>
                    </label>

                    <!--
					<label class="payment-option-label">
						<div class="alert alert-grey payment-modal-option">
							<div class="radio-button-cell">
								<input id="subscription2" name="plan" type="radio" data-price="12000" data-duration="3" value="2" data-credits="2" data-credits-number="0" data-title="bitgab PREMIUM (3 Months)">
							</div>
							<div class="description-cell">
								<span class="description-cell-item">3 Months: <span style="display:inline-block">12000 KRW</span></span>
								<div style="color: #85939e;font-size: 14px;margin-top: -5px;margin-bottom: 5px;">1 month is 4000 KRW</div>
								<div class="subscription-explainer"><b>30 minutes of FREE private classes</b> with bitgab teachers.</div>
								<div class="subscription-explainer">One-time payment. No recurring charges.</div>
							</div>
						</div>
					</label>
-->

                    <label class="payment-option-label">
                        <div class="alert alert-grey payment-modal-option">
                            <div class="radio-button-cell">
                                <input id="subscription3" name="plan" type="radio" data-stripeplan="plan_GXcpZZljtd4SGo" data-paypalplan="P-5WC82269EU070711APQGM7ZI" data-price="11500" data-duration="12" value="3" data-credits="0" data-credits-number="0" data-title="bitgab PREMIUM (Annual)">
                            </div>
                            <div class="description-cell">
                                <span class="description-cell-item">Annual: <span style="display:inline-block">12000 KRW</span></span>
                                <div style="color: #85939e;font-size: 14px;margin-top: -5px;margin-bottom: 5px;">1 month is 1000 KRW</div>
                                <div class="subscription-explainer">Billed annually. Cancel anytime.</div>
                            </div>
                        </div>
                    </label>




                </div>

                <div class="modal-item">

                    <p class="menu-item-header">Select payment method</p>

                    <label class="payment-option-label">
                        <div class="alert alert-grey payment-modal-option">
                            <div class="radio-button-cell">
                                <input name="method" type="radio" value="card" id="payment-card" checked>
                            </div>
                            <div class="description-cell">
                                <img class="payment-img" src="/en/dashboard/img/credit-card-logos.png">
                                <div class="subscription-explainer">Make a payment using a credit or debit card</div>
                            </div>
                        </div>
                    </label>

                    <label class="payment-option-label">
                        <div class="alert alert-grey payment-modal-option">
                            <div class="radio-button-cell">
                                <input name="method" type="radio" value="paypal" id="payment-paypal">
                            </div>
                            <div class="description-cell">
                                <img class="payment-img" src="/en/dashboard/img/paypal.png">
                                <div class="subscription-explainer">Make a payment using a PayPal account</div>
                            </div>
                        </div>
                    </label>

                </div>

            </div>
            <div class="modal-body step-2" data-step="2">

                <input type="hidden" class="paymentservice" value="membership">


                <p class="menu-item-header">Your order</p>

                <div class="alert alert-info">
                    <div class="subscription-selection">
                        <span style="font-weight:600;"></span> <span class="pull-right"></span>
                    </div>
                </div>

                <div class="school-info-wrapper hidden">

                    <p class="menu-item-header">School information</p>

                    <input type="text" id="subscribe_schoolname" placeholder="School name">

                    <input type="text" id="subscribe_schoolemail" placeholder="Primary email contact">
                    <div class="subscription-explainer">We will use this email to contact you and set up the school access</div>

                </div>

                <div id="card-radio-selector" class="modal-item">

                    <p class="menu-item-header">Select a card</p>

                    <div id="allcardlistsubscription"></div>



                    <label class="payment-option-label" id="addnewcardsubscription">
                        <div class="alert alert-grey payment-modal-option">
                            <div class="radio-button-cell">
                                <input type="radio" name="existingcard" value="0">
                            </div>
                            <div class="description-cell">
                                <span class="description-cell-item">Use a new card</span>
                            </div>
                            <div class="cardbox">

                                <div class="authrow existingcardrow">

                                    <div class="demo-container alert alert-grey">
                                        <div class="card-wrapper hidden-xs"></div>

                                        <div class="form-container active">
                                            <form role="form" class="payment-form" method="post">

                                                <input type="hidden" id="userid" value="38063">
                                                <input type="hidden" id="subtype" value="">
                                                <input type="hidden" id="stripeCustomerId" value="cus_GtD08K5Mi7n8Um">
                                                <input type="hidden" id="stripeCardId" value="">
                                                <input type="hidden" id="stripeCardBrand" value="">
                                                <input type="hidden" id="stripeCardLastFour" value="">
                                                <input type="hidden" id="paymentcurrency" value="81">
                                                <input type="hidden" id="paymentcurrencycode" value="KRW">

                                                <input type="hidden" id="paymenttype" value="0">

                                                <input placeholder="Card number" type="text" name="number" id="sub_cardnumber">
                                                <input placeholder="Cardholder name" type="text" name="name" id="sub_cardname">
                                                <input placeholder="MM/YY" type="text" name="expiry" id="sub_cardexpiry">
                                                <input placeholder="CVV" type="text" name="cvc" id="sub_cardcvc">

                                                <label class="hidden"><input type="checkbox" value="" checked> Save this card</label>

                                                <input type="hidden" id="courseid" value="1">
                                                <input type="hidden" id="price" value="">

                                                <input type="hidden" id="paypalcancelurl" value="http://www.bitgab.com/baijinge/find-friends?qname=&qcity=&qcountry=&qlevel=&qprofession=null&quniversity=&qcollege=&search=1&school=0">



                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </label>


                </div>

            </div>
            <div class="modal-body step-3" data-step="3">

                <p class="text-green" style="font-weight:600;margin-top:5px;font-size:18px;"><i class="ion ion-inline ion-checkmark" style="vertical-align: inherit;"></i> Your payment has been sucessfully processed</p>

                <p>A summary of this transaction has been sent to your <span style="display:inline-block;">e-mail</span></p>

                <div class="confirmation_membership">

                    <div class="alert alert-grey" style="margin:20px 0 15px 0;overflow:auto;padding:15px 15px 5px;">

                        <div class="col-xs-12 no-padding">
                            <p class="menu-item-header">Plan</p>
                            <p class="transaction-info"><span class="duration"></span></p>
                        </div>

                        <div class="col-xs-12 no-padding">
                            <p class="menu-item-header">Amount paid</p>
                            <p class="transaction-info"><span class="totalpaid"></span></p>
                        </div>

                        <div class="col-xs-12 no-padding">
                            <p class="menu-item-header">Transaction number</p>
                            <p class="transaction-info"><span class="transactionid"></span></p>
                        </div>

                        <div class="col-xs-12 no-padding">
                            <p class="menu-item-header">Payment method</p>
                            <p class="transaction-info"><span class="paymentmethodinfo">Credit card</span></p>
                        </div>

                    </div>


                </div>



            </div>

            <div class="modal-body step-4" data-step="4">


                <div class="payment-modal-error paypal-error hidden">
                    <p class="text-danger" style="font-weight:600;margin-top:5px;font-size:18px;"><i class="ion ion-inline ion-alert-circled" style="vertical-align: inherit;"></i> Your currency is not supported by PayPal</p>

                    <p>PayPal does not support payments using your currency. Please try using a different payment method.</p>
                </div>

                <div class="payment-modal-error generic-error hidden">
                    <p class="text-danger" style="font-weight:600;margin-top:5px;font-size:18px;"><i class="ion ion-inline ion-alert-circled" style="vertical-align: inherit;"></i> An error has ocurred and your transaction wasn't completed</p>

                    <p>No charges were made to your account. Please try again.</p>
                </div>

            </div>

            <div class="modal-footer">
                <button type="button" id="btnContinue" class="btn btn-lg btn-primary step step-1" data-step="1">Continue <span class="hidden-xs">to step 2: Payment Information</span> <span class="chevron right"></span></button>
                <button class="btn btn-lg btn-success step step-2" data-step="2" type="submit" id="placeorderbtn">Make Payment</button>
                <button type="button" id="btnBack" class="btn btn-lg btn-default pull-left step step-2" data-step="2">Go Back</button>
                <div class="step step-3 text-center"><label type="button" class="btn btn-lg btn-default" data-dismiss="modal">Close</label></div>
                <button class="btn btn-lg btn-primary step step-4" data-step="4" type="submit" onclick="sendEvent('#payment-modal', 1);$('#payment-modal').animate({ scrollTop: 0 }, 100);" style="width: calc(100% - 86px);margin-right: 5px;">Restart Transaction</button>
                <a type="button" class="btn btn-lg btn-default pull-right step step-4" data-step="4" data-dismiss="modal">Close</a>

            </div>
        </div>
    </div>
</div>





<div class="modal multi-step" id="book-lesson-modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title step-1" data-step="1">Reserve Class
                    <div style="margin-left:1.5px;font-size:16px;">Reserve a 1-to-1 conversation class with this teacher</div>
                </h4>
                <h4 class="modal-title step-2" data-step="2">Payment information
                    <div style="margin-left:1.5px;font-size:16px;">Reserve a 1-to-1 conversation class with this teacher</div>
                </h4>
                <h4 class="modal-title step-3" data-step="3">Class Reserved!</h4>
                <h4 class="modal-title step-4" data-step="4">Error</h4>
            </div>
            <div class="spinnerWrapper">
                <div class="spinner grey"></div>
            </div>
            <div class="modal-body step-1" data-step="1">


                <div class="subscription-feature-explainer" style="display: flex;align-items: center;">
                    <div class="profileWidgetImg" style="margin-right:10px;margin-top: 0;">
                        <img class="img-circle modaluserpic" src="https://www.bitgab.com/uploads/profile/files/default.png" alt="User Avatar" style="height: 64px;width: 64px;">
                    </div>
                    <div class="profileWidgetName" style="float: none;">
                        <h3 class="widget-user-username" style="font-weight:500;font-size:24px;margin-bottom:0;margin-top: 0;display:flex;align-items:center;"><span class="modalusername" style="white-space: nowrap;max-width: 225px;overflow: hidden;text-overflow: ellipsis;"></span> <span class="star-rating-wrap" style="font-size: 16px;"><div class="star-rating rating-xs rating-disabled" style="font-size: 10px;margin-left: 5px;"><div class="rating-container rating-gly-star" data-content=""><div class="rating-stars" data-content="" style="width: 0%;"></div><div class="star-rating rating-xs rating-disabled" style="margin-left: -17px;margin-top: -3px;font-size:10.5px"><div class="rating-container rating-gly-star" data-content=""><div class="rating-stars" data-content="" style="width: 0%;"></div><input id="star-rating" type="number" class="rating form-control hide" data-size="xs" data-show-caption="false" data-show-clear="false" data-disabled="true" value="0"></div></div></div></div></span></h3>
                        <div class="book-lesson-teacherlocation" style="margin-left:1.5px;color:#888;"></div>
                    </div>
                </div>
                <div class="alert alert-danger hidden" style="margin-top:20px;">
                    <div style="font-size: 14px;line-height:20px;font-weight:600;">
                        This teacher doesn't currently have availability to reserve a class
                    </div>
                </div>

                <div class="modal-item hidden" style="border-top:0;">
                    <p class="menu-item-header">Select time and date</p>

                    <div class="input-group-btn">

                        <select class="form-control" id="teacherScheduleOptions" style="height:40px;font-size:15px;background-color:#f7f7f7;margin-bottom:5px;">
                        </select>
                    </div>

                    <div class="subscription-explainer" style="font-size:13px;margin-left:10px;">Your current timezone is: Asia, Shanghai &nbsp;<a href="https://www.bitgab.com/en/profile#settings-menu" style="text-transform:uppercase;font-size:12px;">Change</a></div>

                </div>

                <input type="hidden" id="usercredits" value="" />
                <input type="hidden" id="loggedcredits" value="0" />

                <div class="modal-item subscription-times hidden">

                    <p class="menu-item-header">Select duration</p>

                    <div id="bg-teacher-free-lesson-options">
                    </div>

                    <div id="not-bg-teacher-free-lesson-options">
                    </div>

                </div>

            </div>
            <div class="modal-body step-2" data-step="2">

                <input type="hidden" class="paymentservice" value="membership-book-lesson">

                <div class="subscription-feature-explainer" style="display: flex;align-items: center;padding-bottom:10px;">
                    <div class="profileWidgetImg" style="margin-right:10px;margin-top: 0;">
                        <img class="img-circle modaluserpic" src="https://www.bitgab.com/uploads/profile/files/default.png" alt="User Avatar" style="height: 64px;width: 64px;">
                    </div>
                    <div class="profileWidgetName" style="float: none;">
                        <h3 class="widget-user-username" style="font-weight:500;font-size:24px;margin-bottom:0;margin-top: 0;display:flex;align-items:center;"><span class="modalusername" style="white-space: nowrap;max-width: 225px;overflow: hidden;text-overflow: ellipsis;"></span> <span class="star-rating-wrap" style="font-size: 16px;"><div class="star-rating rating-xs rating-disabled" style="font-size: 10px;margin-left: 5px;"><div class="rating-container rating-gly-star" data-content=""><div class="rating-stars" data-content="" style="width: 0%;"></div><div class="star-rating rating-xs rating-disabled" style="margin-left: -34px;margin-top: -3px;font-size:5.25px"><div class="rating-container rating-gly-star" data-content=""><div class="rating-stars" data-content="" style="width: 0%;"></div><div class="star-rating rating-xs rating-disabled"><div class="rating-container rating-gly-star" data-content=""><div class="rating-stars" data-content="" style="width: 0%;"></div><input id="star-rating" type="number" class="rating form-control hide" data-size="xs" data-show-caption="false" data-show-clear="false" data-disabled="true" value="0"></div></div></div></div></div></div></span></h3>
                        <div class="book-lesson-teacherlocation" style="margin-left:1.5px;color:#888;"></div>
                    </div>
                </div>

                <div class="alert alert-info">
                    <div class="subscription-selection" style="display: flex;"></div>
                    <div style="margin-left: 1px;font-size: 14px;line-height:20px;color:#7a8995;">
                        You won't be charged until the class ends
                    </div>
                </div>

                <div id="card-radio-selector-book-lesson" class="modal-item">

                    <p class="menu-item-header">Select a card</p>

                    <div id="allcardlistsubscription-book-lesson"></div>



                    <label class="payment-option-label" id="addnewcardsubscription-book-lesson">
                        <div class="alert alert-grey payment-modal-option">
                            <div class="radio-button-cell">
                                <input type="radio" name="existingcard-book-lesson" value="0">
                            </div>
                            <div class="description-cell">
                                <span class="description-cell-item">Use a new card</span>
                            </div>
                            <div class="cardbox">

                                <div class="authrow existingcardrow">

                                    <div class="demo-container alert alert-grey">
                                        <div class="card-wrapper hidden-xs"></div>

                                        <div class="form-container active">
                                            <form role="form" class="payment-form" method="post">

                                                <input type="hidden" id="userid-book-lesson" value="38063">
                                                <input type="hidden" id="teacherid-book-lesson" value="38063">
                                                <input type="hidden" id="teachername-book-lesson" value="">

                                                <input type="hidden" id="subtype-book-lesson" value="">
                                                <input type="hidden" id="stripeCustomerId-book-lesson" value="cus_GtD08K5Mi7n8Um">
                                                <input type="hidden" id="stripeCardId-book-lesson" value="">
                                                <input type="hidden" id="stripeCardBrand-book-lesson" value="">
                                                <input type="hidden" id="stripeCardLastFour-book-lesson" value="">
                                                <input type="hidden" id="paymentcurrency-book-lesson" value="81">
                                                <input type="hidden" id="paymentcurrencycode-book-lesson" value="KRW">

                                                <input type="hidden" id="paymenttype-book-lesson" value="0">

                                                <input placeholder="Card number" type="text" name="number" id="sub_cardnumber-book-lesson">
                                                <input placeholder="Cardholder name" type="text" name="name" id="sub_cardname-book-lesson">
                                                <input placeholder="MM/YY" type="text" name="expiry" id="sub_cardexpiry-book-lesson">
                                                <input placeholder="CVV" type="text" name="cvc" id="sub_cardcvc-book-lesson">

                                                <label class="hidden"><input type="checkbox" value="" checked> Save this card</label>

                                                <input type="hidden" id="courseid-book-lesson" value="1">
                                                <input type="hidden" id="price-book-lesson" value="">

                                                <input type="hidden" id="paypalcancelurl-book-lesson" value="http://www.bitgab.com/baijinge/find-friends?qname=&qcity=&qcountry=&qlevel=&qprofession=null&quniversity=&qcollege=&search=1&school=0">



                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </label>


                </div>

            </div>
            <div class="modal-body step-3" data-step="3">

                <p class="text-green" style="font-weight:600;margin-top:5px;font-size:18px;"><i class="ion ion-inline ion-checkmark" style="vertical-align: inherit;"></i> Your class has been reserved!</p>

                <p>You will receive an <span style="display:inline-block;">e-mail</span> reminder a few minutes before the class starts</p>

                <div class="confirmation_membership">

                    <div class="alert alert-grey" style="margin:20px 0 15px 0;overflow:auto;padding:15px 15px 0;">

                        <div class="col-xs-12 no-padding">
                            <p class="menu-item-header">Date and time</p>
                            <p class="transaction-info"><span class="bookedtime"></span></p>
                        </div>

                        <div class="col-xs-12 no-padding">
                            <p class="menu-item-header">Duration</p>
                            <p class="transaction-info"><span class="duration"></span></p>
                        </div>

                        <div class="col-xs-12 no-padding">
                            <p class="menu-item-header">Teacher</p>
                            <p class="transaction-info"><span class="bookedteacher"></span></p>
                        </div>

                        <div class="col-xs-12 no-padding ">
                            <p class="menu-item-header">Amount to be paid</p>
                            <p class="transaction-info"><span class="totalpaid"></span></p>
                        </div>


                        <div class="col-xs-12 no-padding" id="confirmation_membership_paymentmethod">
                            <p class="menu-item-header">Payment method</p>
                            <p class="transaction-info"><span class="paymentmethodinfo"></span></p>
                        </div>

                    </div>


                </div>



            </div>

            <div class="modal-body step-4" data-step="4">


                <div class="payment-modal-error paypal-error hidden">
                    <p class="text-danger" style="font-weight:600;margin-top:5px;font-size:18px;"><i class="ion ion-inline ion-alert-circled" style="vertical-align: inherit;"></i> Your currency is not supported by PayPal</p>

                    <p>PayPal does not support payments using your currency. Please try using a different payment method.</p>
                </div>

                <div class="payment-modal-error generic-error hidden">
                    <p class="text-danger" style="font-weight:600;margin-top:5px;font-size:18px;"><i class="ion ion-inline ion-alert-circled" style="vertical-align: inherit;"></i> An error has ocurred and your transaction wasn't completed</p>

                    <p>No charges were made to your account. Please try again.</p>
                </div>

            </div>

            <div class="modal-footer">
                <button type="button" id="btnContinue-book-lesson" class="btn btn-lg btn-primary step step-1 hidden" data-step="1">Continue <span class="chevron right"></span></button>
                <button type="button" id="btnClose-book-lesson" class="btn btn-lg btn-default step step-1 hidden" data-step="1"  data-dismiss="modal" style="display:block;margin:0 auto;">Close</button>
                <button class="btn btn-lg btn-success step step-2" data-step="2" type="submit" id="placeorderbtn-book-lesson">Reserve Class</button>
                <button type="button" id="btnBack-book-lesson" class="btn btn-lg btn-default pull-left step step-2" data-step="2">Go Back</button>
                <div class="step step-3 text-center"><label type="button" class="btn btn-lg btn-default" data-dismiss="modal">Close</label></div>
                <button class="btn btn-lg btn-primary step step-4" data-step="4" type="submit" onclick="sendEvent('#book-lesson-modal', 1);$('#book-lesson-modal').animate({ scrollTop: 0 }, 100);" style="width: calc(100% - 86px);margin-right: 5px;">Reserve New Class</button>
                <a type="button" class="btn btn-lg btn-default pull-right step step-4" data-step="4" data-dismiss="modal">Close</a>

            </div>
        </div>
    </div>
</div>







<div class="modal" id="copy-quiz-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Copy & Share</h4>
            </div>

            <div class="modal-body" style="padding:15px 22px;">
                <p style="font-size:18px;margin-bottom:20px;" class="invite-modal-intro">
                    Copy the link below to share it with anyone
                </p>

                <div class="hourly-rate-wrapper" style="padding: 0 10px;">

                    <div class="form-group" style="margin-bottom:10px;">
                        <input type="text" placeholder="" id="quizcopyurl" class="form-control" value="" style="font-size: 16px;height: 50px;" onClick="this.setSelectionRange(0, this.value.length);">
                    </div>
                </div>

            </div>

            <div class="modal-footer" style="text-align:center;">
                <button class="btn btn-lg btn-primary copy-quiz-btn" style="width:110px;">Copy Link</button>
                <div class="copy-quiz-msg hidden" style="height: 43px;display: flex;align-items: center;justify-content: center;font-size: 20px;font-weight: 600;color: green;">Copied!</div>
            </div>

        </div>
    </div>
</div>





<div class="modal" id="shareongroups-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Share on a Group</h4>
            </div>
            <div class="modal-body" style="padding:15px 22px;">

                <div class="shared-topic-info"></div>

                <label class="menu-item-header hidden" style="font-weight:600;margin: 0 15px;">Select groups to share</label>

                <div id="mygrouplist" class="hourly-rate-wrapper">
                    <div class="spinnerWrapper" style="display:flex;align-items:center;justify-content:center;padding:30px 10px 15px;"><div class="spinner grey"></div></div>
                </div>
                <input type="hidden" id="shareongroups_topicid" value="">
                <input type="hidden" id="mytotalgroups" value="0">
            </div>

            <div class="modal-footer" style="text-align:center;">
                <button class="btn btn-lg btn-primary" style="width:100px;" id="shareongroupsButton" disabled>Share</button>
            </div>

        </div>
    </div>
</div>





<div class="modal" id="shareongroupsquiz-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Share on a Group</h4>
            </div>
            <div class="modal-body" style="padding:15px 22px;">

                <label class="menu-item-header hidden" style="font-weight:600;margin: 0 15px;">Select groups to share</label>

                <div id="mygrouplistquiz" class="hourly-rate-wrapper">
                    <div class="spinnerWrapper" style="display:flex;align-items:center;justify-content:center;padding:30px 10px 15px;"><div class="spinner grey"></div></div>
                </div>
                <input type="hidden" id="shareongroups_quizid" value="">
            </div>

            <div class="modal-footer" style="text-align:center;">
                <button class="btn btn-lg btn-primary" style="width:100px;" id="shareongroupsQuizButton" disabled>Share</button>
            </div>



        </div>
    </div>
</div>





<div class="modal" id="message-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Message</h4>
            </div>

            <div class="modal-body no-padding">

                <input type="hidden" id="target" />
                <input type="hidden" id="usermessagesfrom" value="0" />
                <input type="hidden" id="scrollmessagesfrom" value="0" />
                <input type="hidden" id="lastmsg" value="0" />

                <div id="receiveMessageAreaMessage" class="direct-chat direct-chat-primary">
                    <div class="box-body" id="conversationBoxMessage">

                        <h3 id="chatnotice">
                            Write and send a message!
                        </h3>

                        <!-- Conversations are loaded here -->
                        <div style="background: rgb(249, 249, 249) none repeat scroll 0% 0%;" id="usermessageswrap" class="direct-chat-messages" onmouseover="document.body.style.overflow='hidden';" onmouseout="document.body.style.overflow='auto';"></div>

                    </div></div></div>



            <!-- /.box-body -->
            <div class="box-footer" id="sendMessageArea">
                <div style="display:none;" id="iam">Obtaining ID...</div>
                <form method="post" action="#">
                    <div class="input-group" style="width:100%;display:block;">
                        <textarea type="text" class="form-control" style="border-radius:3px;" placeholder="Write a message here..." autocomplete="off" name="message" id="sendMessageText" rows="3"></textarea>
                        <div id="otherClientsChat" class="input-group-btn" style="text-align: right;padding-top: 10px;">
                            <input type="checkbox" name="enterkey" id="enterkeymsg" style="line-height: 34px;vertical-align: middle;margin:0;"> <span style="color: #999;font-size: 14px;line-height: 34px;vertical-align: bottom;margin: 0 10px 0 3px;">Press Enter to send</span>
                            <button style="border-radius:3px;" id="sendButton" class="btn btn-primary btn-flat">
                                Send
                            </button>
                        </div>
                    </div>
                </form>
            </div>







        </div>


    </div>

</div>
<!-- /.modal-content -->























<div class="modal" id="addcard-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Add card</h4>
            </div>
            <div class="modal-body" style="padding:15px;">
                <p class="menu-item-header">Enter your card information</p>
                <div class="row gab-list-wrapper" style="padding: 40px 20px;">
                    <div class="card-wrapper hidden-xs"></div>
                    <div class="form-container active">
                        <form role="form" class="payment-form" method="post">

                            <input type="hidden" id="useridAddCard" value="38063">
                            <input type="hidden" id="subtypeAddCard" value="">
                            <input type="hidden" id="stripeCustomerIdAddCard" value="cus_GtD08K5Mi7n8Um">
                            <input type="hidden" id="stripeCardIdAddCard" value="">
                            <input type="hidden" id="stripeCardBrandAddCard" value="">
                            <input type="hidden" id="stripeCardLastFourAddCard" value="">
                            <input type="hidden" id="paymenttypeAddCard" value="0">

                            <input placeholder="Card number" type="text" name="number" id="cardnumber">
                            <input placeholder="Cardholder name" type="text" name="name" id="cardname">
                            <input placeholder="MM/YY" type="text" name="expiry" id="cardexpiry">
                            <input placeholder="CVV" type="text" name="cvc" id="cardcvc">

                            <!--
                          <label><input type="checkbox" value="" checked> Guardar tarjeta</label>
                          -->
                            <!--
                          <input type="hidden" id="courseid" value="1">
                          -->
                            <input type="hidden" id="priceAddCard" value="">
                        </form>
                    </div>
                </div>

                <div style="text-align:center;padding-top:15px;">
                    <button class="btn btn-lg btn-primary step step-5 hidden" data-step="5" type="submit" id="addcardbutton">Add card</button>
                    <button class="btn btn-lg btn-primary step step-5 hidden" data-step="5" type="submit" id="addcardbuttonchat">Add card</button> <!-- This is Add card Chat-->
                </div>

            </div>
        </div>
    </div>
</div>




<div class="modal" id="invite-global-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Invite Friends</h4>
            </div>
            <div class="modal-body" style="padding:15px 20px;">
                <p>Connect your Gmail, Hotmail or Yahoo account and invite your friends to bitgab</p>

                <div class="box-body" style="padding:15px 0;">
                    <div style="padding: 5px 5px 0 5px;display: block;overflow: auto;">
                        <div class="pull-left">
                            <img src="https://www.bitgab.com/assets-dashboard/img/gmail_icon.png" style="height:40px;">
                            <span style="margin-left: 10px;font-size: 18px;line-height: 40px;vertical-align: middle;">Google</span>
                        </div>
                        <div class="pull-right" style="padding: 3px 0;">
                            <a class="btn btn-primary" href="https://accounts.google.com/o/oauth2/auth?response_type=code&redirect_uri=https%3A%2F%2Fwww.bitgab.com%2Fen%2Fprofile%3Finvite%3Dgooglecontacts&client_id=1008966626376-2hq462l9ffr1lilgf3281o1n07pv9hs7.apps.googleusercontent.com&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcontacts.readonly&access_type=offline&approval_prompt=force">Connect</a>
                        </div>
                    </div>

                    <hr style="margin: 15px 0;">

                    <div style="padding: 0 5px 0 5px;display: block;overflow: auto;">
                        <div class="pull-left">
                            <img src="https://www.bitgab.com/assets-dashboard/img/hotmail_icon.png" style="height:40px;">
                            <span style="margin-left: 10px;font-size: 18px;line-height: 40px;vertical-align: middle;">Hotmail</span>
                        </div>
                        <div class="pull-right" style="padding: 3px 0;">
                            <a class="btn btn-primary" href="https://login.live.com/oauth20_authorize.srf?client_id=000000004819742D&scope=wl.signin%20wl.basic%20wl.emails%20wl.contacts_emails&response_type=code&redirect_uri=https://www.bitgab.com/en/profile?invite=hotmailcontacts">Connect</a>
                        </div>
                    </div>

                    <hr style="margin: 15px 0;">

                    <div style="padding:0px 5px 5px 5px;display: block;overflow: auto;">
                        <div class="pull-left">
                            <img src="https://www.bitgab.com/assets-dashboard/img/yahoo_icon.png" style="height:40px;">
                            <span style="margin-left: 10px;font-size: 18px;line-height: 40px;vertical-align: middle;">Yahoo</span>
                        </div>
                        <div class="pull-right" style="padding: 3px 0;">
                            <a class="btn btn-primary" href="https://www.bitgab.com/apps/contact-importer/yahooAuth.php">Connect</a>
                        </div>
                    </div>


                </div>

            </div>
        </div>
    </div>
</div>



<div class="modal" id="register-now-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Sign up <b>FREE</b>!</h4>
            </div>

            <div class="modal-body" style="padding:15px 25px;font-size:17px;">
                <p>By creating a free <b>bitgab</b> account you can:</p>
                <ul>
                    <li style="margin-bottom:10px;">Complete <b>new exercises every day</b> with grammar explanations and vocabulary</li>
                    <li style="margin-bottom:10px;">Practice <b>speaking with other students, friends or teachers</b></li>
                    <li style="margin-bottom:10px;">Have your <b>questions answered</b> anytime</li>
                </ul>

            </div>

            <div class="modal-footer" style="text-align:center;padding-top:0;border:0;">
                <div>
                    <a href="https://www.bitgab.com/en/" class="btn btn-lg btn-success" style="font-size:20px;font-weight:700;">Create FREE account</a>
                </div>
                <div style="margin-top:10px;font-size:15px;">
                    <span>Already registered? </span><a href="https://www.bitgab.com/en/login">Log in to your account</a>
                </div>
            </div>

        </div>
    </div>
</div>




<div class="modal" id="daily-limit-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <!--            <h4 id="dl-limit-title" class="modal-title">You've reached the daily limit!</h4>-->
                <h4 id="dl-limit-title" class="modal-title">You've reached the monthly limit!</h4>
            </div>

            <div class="modal-body" style="padding:15px 25px;">
                <div class="dl-only-subscribers-text">
                    <!--				<p>With your free account you can submit <b>2 exercises</b> per day.<br>To have unlimited access, you need a <b style="font-weight:700;color:#5dae5d;">PREMIUM</b> account.</p>-->
                    <p>With your free account you can complete <b>10 exercises</b> per month.<br>To have unlimited access, you need a <b style="font-weight:700;color:#5dae5d;">PREMIUM</b> account.</p>
                    <p>With a <b style="font-weight:700;color:#5dae5d;">PREMIUM</b> account, you can:</p>
                </div>
                <table class="table borderless" style="margin-bottom:10px;">
                    <tbody>
                    <tr>
                        <td class="cell-icon"><i class="ion ion-checkmark"></i></td>
                        <td><p class="cell-text">Get <b>unlimited access</b> to all exercises on bitgab</p></td>
                    </tr>
                    <tr>
                        <td class="cell-icon"><i class="ion ion-checkmark"></i></td>
                        <td><p class="cell-text">Receive <b>FREE private classes</b> from our teachers</p></td>
                    </tr>
                    <!--
                   <tr>
                      <td class="cell-icon"><i class="ion ion-checkmark"></i></td>
                      <td><p class="cell-text">Join <b>unlimited group classes</b></p></td>
                    </tr>
-->
                    <tr>
                        <td class="cell-icon"><i class="ion ion-checkmark"></i></td>
                        <td><p class="cell-text"><b>Ask questions</b> to our teachers anytime</p></td>
                    </tr>
                    <!--
                    <tr>
                      <td class="cell-icon"><i class="ion ion-checkmark"></i></td>
						<td><p class="cell-text">(Schools) Provide <b>unlimited access</b> to all school students and teachers along with <b>special functionalities and progress reports</b></p></td>
                    </tr>
-->
                    </tbody>
                </table>

            </div>

            <div class="modal-footer" style="text-align:center;">
                <a data-toggle="modal" data-target="#payment-modal" data-dismiss="modal" class="btn btn-lg btn-success subscribeNowButton" style="font-size:18px;padding:10px 20px;">Get <b style="font-weight:700;">PREMIUM</b></a>
            </div>

        </div>
    </div>
</div>


<div class="modal" id="only-for-subscribers-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 id="dl-only-subscribers-title" class="modal-title">Only for <b style="font-weight:700;">PREMIUM</b> users</h4>
            </div>

            <div class="modal-body" style="padding:15px 25px;">
                <div class="dl-only-subscribers-text">
                    <p>This functionality is available only for <b style="font-weight:700;color:#5dae5d;">PREMIUM</b> users.</p>
                    <p>With a <b style="font-weight:700;color:#5dae5d;">PREMIUM</b> account, you can:</p>
                </div>
                <table class="table borderless" style="margin-bottom:10px;">
                    <tbody>
                    <tr>
                        <td class="cell-icon"><i class="ion ion-checkmark"></i></td>
                        <td><p class="cell-text">Get <b>unlimited access</b> to all exercises on bitgab</p></td>
                    </tr>
                    <tr>
                        <td class="cell-icon"><i class="ion ion-checkmark"></i></td>
                        <td><p class="cell-text">Receive <b>FREE private classes</b> from our teachers</p></td>
                    </tr>
                    <!--
                   <tr>
                      <td class="cell-icon"><i class="ion ion-checkmark"></i></td>
                      <td><p class="cell-text">Join <b>unlimited group classes</b></p></td>
                    </tr>
-->
                    <tr>
                        <td class="cell-icon"><i class="ion ion-checkmark"></i></td>
                        <td><p class="cell-text"><b>Ask questions</b> to our teachers anytime</p></td>
                    </tr>
                    <!--
                    <tr>
                      <td class="cell-icon"><i class="ion ion-checkmark"></i></td>
						<td><p class="cell-text">(Schools) Provide <b>unlimited access</b> to all school students and teachers along with <b>special functionalities and progress reports</b></p></td>
                    </tr>
-->
                    </tbody>
                </table>

            </div>

            <div class="modal-footer" style="text-align:center;">
                <a data-toggle="modal" data-target="#payment-modal" data-dismiss="modal" class="btn btn-lg btn-success subscribeNowButton" style="font-size:18px;padding:10px 20px;">Get <b style="font-weight:700;">PREMIUM</b></a>
            </div>

        </div>
    </div>
</div>


<div class="modal" id="view-booked-lessons-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Reserved classes</h4>
            </div>

            <div class="modal-body" style="padding:0 15px;">
                <div class="spinnerWrapper" style="display: flex;align-items: center;justify-content: center;min-height: 200px;"><div class="spinner grey"></div></div>
                <table class="table borderless" style="margin-bottom:0;">
                    <tbody>
                    </tbody>
                </table>

            </div>

            <div class="modal-footer" style="text-align:center;">
                <a type="button" class="btn btn-lg btn-default" data-dismiss="modal">Close</a>
            </div>

        </div>
    </div>
</div>



<div class="modal multi-step" id="create-topic-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true" style="font-size:25px;">×</span></button>


                <h4 class="modal-title step-1" data-step="1" style="padding-top: 2px;">Create Exercise</h4>
                <h4 class="modal-title step-2" data-step="2"><label type="button" class="btn btn-default step step-2 gab-modal-back-button" data-step="2" onclick="sendEvent('#create-topic-modal', 1)"><i class="ion ion-inline ion-ios-arrow-back" style="margin-right:0;margin-top: 3px;"></i></label> <span style="vertical-align:middle;">Pick a level</span></h4>



            </div>
            <div class="modal-body" style="padding:15px;">


                <div class="step-1" data-step="1">


                    <div class="row alert alert-info alert-dismissible gab-text-explainer gabinfo gabinfogab" style="display:">
                        <div>
                            <h4 style="display: inline-block;font-size: 16px;font-weight: 500;margin-bottom: 15px;"><i class="ion ion-inline ion-information-circled" style="color:#3c7ab5;"></i> What type of exercises can I create on bitgab?</h4>
                            <div class="pull-right" style="display: inline-block;float: right;margin-right: 20px;margin-top: 5px;">
                                <button type="button" class="setcookie close"  aria-label="Close" data-cookieday="365" data-cookievalue="1" data-cookiename="createTopicInfo"><span class="info-text">Don't show again </span><i class="fa fa-times"></i></button>

                            </div>
                        </div>
                        <p>Exercises on bitgab consist of a video, text or image and a language learning activity.</p>
                        <p>You may create exercises to share with your students or to give private video lessons on bitgab.</p>

                        <a href="https://www.bitgab.com/en/tutorials" target="_blank" style="display:inline-flex;cursor:pointer;align-items: center;font-size:15px;padding:0 20px;"><span style="margin-right: 1px;">Watch a tutorial to learn how to create exercises</span> <span class="chevron right"></span></a>
                    </div>



                    <p class="menu-item-header">Select type</p>

                    <div class="row gab-list-wrapper">

                        <div id="gab-options">

                            <button class="btn btn-gab-modal step step-1" data-step="1" data-topictype="listening">
                                <div style="display:table;width: 100%;">
                                    <div style="display:table-cell;padding-right: 20px;width:100%;">
                                        <span style="display:block;">Listening exercise</span>
                                        <span class="subscription-explainer" style="display:block;white-space: normal;">Video with multiple-choice comprehension questions</span>
                                    </div>
                                    <div class="chevron right" style="display:table-cell;vertical-align: middle;"></div>
                                </div>
                            </button>


                            <button class="btn btn-gab-modal step step-1" data-step="1" data-topictype="reading">
                                <div style="display:table;width: 100%;">
                                    <div style="display:table-cell;padding-right: 20px;width:100%;">
                                        <span style="display:block;">Reading exercise</span>
                                        <span class="subscription-explainer" style="display:block;white-space: normal;">Text with multiple-choice comprehension questions</span>
                                    </div>
                                    <div class="chevron right" style="display:table-cell;vertical-align: middle;"></div>
                                </div>
                            </button>

                            <button class="btn btn-gab-modal step step-1" data-step="1" data-topictype="grammar">
                                <div style="display:table;width: 100%;">
                                    <div style="display:table-cell;padding-right: 20px;width:100%;">
                                        <span style="display:block;">Grammar exercise</span>
                                        <span class="subscription-explainer" style="display:block;white-space: normal;">Video or text with multiple-choice grammar questions</span>
                                    </div>
                                    <div class="chevron right" style="display:table-cell;vertical-align: middle;"></div>
                                </div>
                            </button>

                        </div>

                    </div>

                </div>
                <div class="step-2" data-step="2">
                    <p class="menu-item-header">Select exercise level</p>
                    <div class="row gab-list-wrapper">
                        <div class="gab-list">

                            <button class="btn btn-gab-modal step step-2" data-step="2" data-topiclevel="Beginner">
                                <div style="display:table;width: 100%;">
                                    <div style="display:table-cell;padding-right: 20px;width:100%;">
                                        <span style="display:block;">Beginner</span>
                                        <span class="subscription-explainer" style="display:block;white-space: normal;">The exercise will be suitable for students who are starting to learn the language</span>
                                    </div>
                                    <div class="chevron right" style="display:table-cell;vertical-align: middle;"></div>
                                </div>
                            </button>


                            <button class="btn btn-gab-modal step step-2" data-step="2" data-topiclevel="Intermediate">
                                <div style="display:table;width: 100%;">
                                    <div style="display:table-cell;padding-right: 20px;width:100%;">
                                        <span style="display:block;">Intermediate</span>
                                        <span class="subscription-explainer" style="display:block;white-space: normal;">The exercise will be suitable for students who have a basic knowledge of the language</span>
                                    </div>
                                    <div class="chevron right" style="display:table-cell;vertical-align: middle;"></div>
                                </div>
                            </button>

                            <button class="btn btn-gab-modal step step-2" data-step="2" data-topiclevel="Advanced">
                                <div style="display:table;width: 100%;">
                                    <div style="display:table-cell;padding-right: 20px;width:100%;">
                                        <span style="display:block;">Advanced</span>
                                        <span class="subscription-explainer" style="display:block;white-space: normal;">The exercise will be suitable for students who have a thorough knowledge of the language</span>
                                    </div>
                                    <div class="chevron right" style="display:table-cell;vertical-align: middle;"></div>
                                </div>
                            </button>

                        </div>
                    </div>
                </div>



                <input type="hidden" id="createTopicType" value="">
                <input type="hidden" id="createTopicLevel" value="">
                <input type="hidden" id="teacher_lang" value="4" autocomplete="off">

            </div>

        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>


<div class="modal" id="topic-published-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-body" style="text-align: center;padding: 30px;">
                <p style="font-size:20px;margin: 10px 0;">Congratulations, your exercise has been published!</p>
                <div>
                    <a href="#" target="_blank" class="btn btn-lg btn-facebook" style="margin: 5px;">
                        <span style="margin-right: 5px;font-size: 18px;font-weight: 600;">Share on Facebook</span>
                        <span class="chevron right" style="margin-bottom: 2px;"></span>
                    </a>
                    <a href="#" target="_blank" class="btn btn-lg btn-twitter" style="margin: 5px;">
                        <span style="margin-right: 5px;font-size: 18px;font-weight: 600;">Share on Twitter</span>
                        <span class="chevron right" style="margin-bottom: 2px;"></span>
                    </a>
                </div>
            </div>

            <div class="modal-footer" style="text-align:center;">
                <button class="btn btn-primary btn-lg" style="margin-right:5px;" data-toggle="modal" data-target="#create-topic-modal" data-dismiss="modal">Create Another Exercise</button>
                <a type="button" class="btn btn-default btn-lg" id="topic-published-modal-close" data-dismiss="modal" style="width:100px;">Close</a>
            </div>

        </div>
    </div>
</div>




<div class="modal" id="view-post-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="margin-top:10px;margin-right:10px;">
                    <span aria-hidden="true">×</span></button>
                <div id="demo-chat-body-modal" class="collapse in ">
                    <div class="nano-content pad-all">
                        <ul class="list-unstyled media-block" id="messagesmodal">

                        </ul>
                    </div>
                </div>


            </div>
            <!--
              <div class="modal-footer">
                <button type="button" class="btn btn-lg btn-default" data-dismiss="modal" style="display:block;margin:0 auto;">Close</button>
              </div>
-->
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->



<div class="modal" id="create-group-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Create Group</h4>
            </div>
            <form class="form groupform" method="post" action="" id="create-group-form">
                <div class="modal-body">

                    <p style="font-size:18px;margin:5px 0 15px 0;">By creating a group you can categorize and control who can access your exercises, quizzes and posts.</p>

                    <div class="modal-item form-group" style="margin-bottom: 0;padding: 20px 0 15px;">
                        <!--			  		<label class="menu-item-header" style="font-weight:600;">Enter Group's Name</label>-->
                        <input class="form-control" name="group-title" id="group-title" placeholder="Group Name (min. 3 characters long)" style="margin-bottom:3px;height: 44px;font-size: 18px;">
                        <div id="group-title-validator" class="hidden" style="margin-left: 10px;font-size: 14px;color: red;"></div>
                    </div>

                    <div class="form-group" style="margin-bottom: 0;padding-bottom: 15px;">
                        <!--				  <label class="menu-item-header" style="font-weight:600;">Add description (optional)</label>-->
                        <textarea class="form-control" name="group-description" id="group-description" rows="3" placeholder="Group Description (optional)" maxlength="200" style="font-size: 18px;resize:none;"></textarea>
                    </div>

                    <div class="form-group" style="margin-bottom: 0;">
                        <label class="menu-item-header" style="font-weight:600;margin-bottom: 0;">Select Group Type</label>
                        <div class="radio alert alert-grey payment-modal-option" style="margin-bottom:15px;padding:0;">
                            <label style="padding: 12px 15px 15px 35px;">
                                <input type="radio" name="grouptype" value="public" style="margin-top: 6px;" checked>
                                <b style="margin-left: 5px;">Public</b>
                                <div style="line-height: 20px;margin-top: -2px;color: #85939e;margin-left: 5px;font-size:15px;">Any user may join and see the content posted in the group</div>
                            </label>
                        </div>
                        <div class="radio alert alert-grey payment-modal-option" style="margin-bottom:15px;padding:0;">
                            <label style="padding: 12px 15px 15px 35px;">
                                <input type="radio" name="grouptype" value="private" style="margin-top: 6px;">
                                <b style="margin-left: 5px;">Private</b>
                                <div style="line-height: 20px;margin-top: -2px;color: #85939e;margin-left: 5px;font-size:15px;">Users will need to ask me for permission to join and see the content posted in the group</div>
                            </label>
                        </div>
                        <div class="radio alert alert-grey payment-modal-option" style="margin-bottom:15px;padding:0;">
                            <label style="padding: 12px 15px 15px 35px;">
                                <input type="radio" name="grouptype" value="inviteonly" style="margin-top: 6px;">
                                <b style="margin-left: 5px;">Invite Only</b>
                                <div style="line-height: 20px;margin-top: -2px;color: #85939e;margin-left: 5px;font-size:15px;">Only users that I share a link with will be able to join and see the content posted in the group</div>
                            </label>
                        </div>
                    </div>

                </div>
                <div style="text-align:center;" class="modal-footer">
                    <button id="savegroup" type="submit" class="btn btn-primary btn-lg" style="margin-right:10px;width:100px;" disabled="disabled">Create</button>
                    <a type="button" class="btn btn-default btn-lg" data-dismiss="modal" style="width:100px;">Cancel</a>
                </div>
            </form>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>






<div class="modal" id="create-groupclass-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Create Class</h4>
            </div>
            <form class="form groupform" method="post" action="" id="create-group-formClass">
                <div class="modal-body">

                    <input type="hidden" id="groupclass-topic" value="0"><div class="alert alert-info" style="margin-top: 10px;margin-bottom: 0;padding: 8px 15px 10px;"><div><b>Type:</b> Conversation Class</div><div style="font-size: 14px;line-height: 20px;color: #66757f;">This class will include conversation topics from all exercises published on bitgab<br> To create a class about a specific exercise, go to its page and create the class from there</div></div><div class="form-group" style="margin: 0;padding: 20px 0 0;margin-bottom:-2px;"><select id="groupclass-level" style="height: 44px;width: 100%;"><option value="0">Any level</option><option value="1">Beginner level</option><option value="2">Intermediate level</option><option value="3">Advanced level</option></select></div>
                    <div class="form-group" style="margin-bottom: 0;padding:20px 0 15px;">
                        <input class="form-control" name="group-title" id="groupclass-title" placeholder="Title (optional)" style="margin-bottom:3px;height: 44px;font-size: 18px;" data-type="conversation">
                        <div id="group-title-validator" class="hidden" style="margin-left: 10px;font-size: 14px;color: red;"></div>
                    </div>

                    <div class="form-group" style="padding-bottom: 5px;">
                        <textarea class="form-control" name="group-description" id="groupclass-description" rows="3" placeholder="Description (optional)" maxlength="200" style="font-size: 18px;resize:none;"></textarea>
                    </div>


                    <div class="modal-item form-group" style="margin-bottom: 0;padding: 10px 0;">
                        <label class="menu-item-header" style="font-weight:600;">Pick a Day, Time and Duration</label>
                        <div style="display:flex;">
                            <input type="date" class="form-control" name="groupclass-startdate" id="groupclass-startdate" style="width:33%;height: 44px;font-size: 18px;" value="2020-03-13" min="2020-03-13" required="required">
                            <input type="time" class="form-control" name="groupclass-starttime" id="groupclass-starttime" style="width:33%;margin:0 10px;height: 44px;font-size: 18px;" value="10:00" required="required">
                            <select id="groupclass-duration" style="width:33%;">
                                <option value="15">15 minutes</option>
                                <option value="30">30 minutes</option>
                                <option value="60">60 minutes</option>
                            </select>
                        </div>
                    </div>

                </div>
                <div style="text-align:center;" class="modal-footer">
                    <button id="savegroupclass" type="submit" class="btn btn-primary btn-lg" style="margin-right:5px;width:100px;">Create</button>
                    <a type="button" class="btn btn-default btn-lg" data-dismiss="modal" style="width:100px;">Cancel</a>
                </div>
            </form>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal" id="verify-email-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Verify your email</h4>
            </div>

            <div class="modal-body">
                <p>To continue using bitgab, you need to verify your email address:</p>
                <ul>
                    <li>
                        <strong>b.aimaoli9@gmail.com</strong>
                    </li>
                </ul>
                <p>
                    To do so, please check your inbox and locate the verification email sent to you by bitgab (subject: "Verify your email address"). Follow the steps in the email to verify your email address.
                </p>
                <div class="alert alert-info" style="margin: 15px 0;padding: 10px 15px;font-size: 14px;line-height: 1.5;">
                    <div><strong>Didn't receive the verification email?</strong></div>
                    <div>Try checking your spam or junk folder. If you still can't find it, you can resend another verification email.</div>
                </div>
            </div>

            <div class="modal-footer" style="text-align:center;">
                <button class="btn btn-lg btn-primary send-confirmation-email-btn">Resend Verification Email</button>
                <div class="send-confirmation-email-msg hidden" style="height: 43px;display: flex;align-items: center;justify-content: center;font-size: 20px;font-weight: 600;color: green;">Email sent!</div>
            </div>

        </div>
    </div>
</div>


<div class="modal" id="suspended-account-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Your account is suspended</h4>
            </div>

            <div class="modal-body">
                <p style="margin: 20px 0;font-size: 18px;">Please <a href="mailto:support@bitgab.com?subject=Account Suspended">send us an email</a> to have your account reactivated.</p>
            </div>

        </div>
    </div>
</div>



<script type="text/javascript">
    var chatCountries = {
        "1": "Andorra",
        "2": "United Arab Emirates",
        "3": "Afghanistan",
        "4": "Antigua and Barbuda",
        "5": "Anguilla",
        "6": "Albania",
        "7": "Armenia",
        "8": "Angola",
        "9": "Antarctica",
        "10": "Argentina",
        "11": "American Samoa",
        "12": "Austria",
        "13": "Australia",
        "14": "Aruba",
        "15": "\u00c5land",
        "16": "Azerbaijan",
        "17": "Bosnia and Herzegovina",
        "18": "Barbados",
        "19": "Bangladesh",
        "20": "Belgium",
        "21": "Burkina Faso",
        "22": "Bulgaria",
        "23": "Bahrain",
        "24": "Burundi",
        "25": "Benin",
        "26": "Saint Barth\u00e9lemy",
        "27": "Bermuda",
        "28": "Brunei",
        "29": "Bolivia",
        "30": "Bonaire",
        "31": "Brazil",
        "32": "Bahamas",
        "33": "Bhutan",
        "34": "Bouvet Island",
        "35": "Botswana",
        "36": "Belarus",
        "37": "Belize",
        "38": "Canada",
        "39": "Cocos [Keeling] Islands",
        "40": "Democratic Republic of the Congo",
        "41": "Central African Republic",
        "42": "Republic of the Congo",
        "43": "Switzerland",
        "44": "Ivory Coast",
        "45": "Cook Islands",
        "46": "Chile",
        "47": "Cameroon",
        "48": "China",
        "49": "Colombia",
        "50": "Costa Rica",
        "51": "Cuba",
        "52": "Cape Verde",
        "53": "Cura\u00e7ao",
        "54": "Christmas Island",
        "55": "Cyprus",
        "56": "Czech Republic",
        "57": "Germany",
        "58": "Djibouti",
        "59": "Denmark",
        "60": "Dominica",
        "61": "Dominican Republic",
        "62": "Algeria",
        "63": "Ecuador",
        "64": "Estonia",
        "65": "Egypt",
        "66": "Western Sahara",
        "67": "Eritrea",
        "68": "Spain",
        "69": "Ethiopia",
        "70": "Finland",
        "71": "Fiji",
        "72": "Falkland Islands",
        "73": "Micronesia",
        "74": "Faroe Islands",
        "75": "France",
        "76": "Gabon",
        "78": "Grenada",
        "79": "Georgia",
        "80": "French Guiana",
        "81": "Guernsey",
        "82": "Ghana",
        "83": "Gibraltar",
        "84": "Greenland",
        "85": "Gambia",
        "86": "Guinea",
        "87": "Guadeloupe",
        "88": "Equatorial Guinea",
        "89": "Greece",
        "90": "South Georgia and the South Sandwich Islands",
        "91": "Guatemala",
        "92": "Guam",
        "93": "Guinea-Bissau",
        "94": "Guyana",
        "95": "Hong Kong",
        "96": "Heard Island and McDonald Islands",
        "97": "Honduras",
        "98": "Croatia",
        "99": "Haiti",
        "100": "Hungary",
        "101": "Indonesia",
        "102": "Ireland",
        "103": "Israel",
        "104": "Isle of Man",
        "105": "India",
        "106": "British Indian Ocean Territory",
        "107": "Iraq",
        "108": "Iran",
        "109": "Iceland",
        "110": "Italy",
        "111": "Jersey",
        "112": "Jamaica",
        "113": "Jordan",
        "114": "Japan",
        "115": "Kenya",
        "116": "Kyrgyzstan",
        "117": "Cambodia",
        "118": "Kiribati",
        "119": "Comoros",
        "120": "Saint Kitts and Nevis",
        "121": "North Korea",
        "122": "South Korea",
        "123": "Kuwait",
        "124": "Cayman Islands",
        "125": "Kazakhstan",
        "126": "Laos",
        "127": "Lebanon",
        "128": "Saint Lucia",
        "129": "Liechtenstein",
        "130": "Sri Lanka",
        "131": "Liberia",
        "132": "Lesotho",
        "133": "Lithuania",
        "134": "Luxembourg",
        "135": "Latvia",
        "136": "Libya",
        "137": "Morocco",
        "138": "Monaco",
        "139": "Moldova",
        "140": "Montenegro",
        "141": "Saint Martin",
        "142": "Madagascar",
        "143": "Marshall Islands",
        "144": "Macedonia",
        "145": "Mali",
        "146": "Myanmar [Burma]",
        "147": "Mongolia",
        "148": "Macao",
        "149": "Northern Mariana Islands",
        "150": "Martinique",
        "151": "Mauritania",
        "152": "Montserrat",
        "153": "Malta",
        "154": "Mauritius",
        "155": "Maldives",
        "156": "Malawi",
        "157": "Mexico",
        "158": "Malaysia",
        "159": "Mozambique",
        "160": "Namibia",
        "161": "New Caledonia",
        "162": "Niger",
        "163": "Norfolk Island",
        "164": "Nigeria",
        "165": "Nicaragua",
        "166": "Netherlands",
        "167": "Norway",
        "168": "Nepal",
        "169": "Nauru",
        "170": "Niue",
        "171": "New Zealand",
        "172": "Oman",
        "173": "Panama",
        "174": "Peru",
        "175": "French Polynesia",
        "176": "Papua New Guinea",
        "177": "Philippines",
        "178": "Pakistan",
        "179": "Poland",
        "180": "Saint Pierre and Miquelon",
        "181": "Pitcairn Islands",
        "182": "Puerto Rico",
        "183": "Palestine",
        "184": "Portugal",
        "185": "Palau",
        "186": "Paraguay",
        "187": "Qatar",
        "188": "R\u00e9union",
        "189": "Romania",
        "190": "Serbia",
        "191": "Russia",
        "192": "Rwanda",
        "193": "Saudi Arabia",
        "194": "Solomon Islands",
        "195": "Seychelles",
        "196": "Sudan",
        "197": "Sweden",
        "198": "Singapore",
        "199": "Saint Helena",
        "200": "Slovenia",
        "201": "Svalbard and Jan Mayen",
        "202": "Slovakia",
        "203": "Sierra Leone",
        "204": "San Marino",
        "205": "Senegal",
        "206": "Somalia",
        "207": "Suriname",
        "208": "South Sudan",
        "209": "S\u00e3o Tom\u00e9 and Pr\u00edncipe",
        "210": "El Salvador",
        "211": "Sint Maarten",
        "212": "Syria",
        "213": "Swaziland",
        "214": "Turks and Caicos Islands",
        "215": "Chad",
        "216": "French Southern Territories",
        "217": "Togo",
        "218": "Thailand",
        "219": "Tajikistan",
        "220": "Tokelau",
        "221": "East Timor",
        "222": "Turkmenistan",
        "223": "Tunisia",
        "224": "Tonga",
        "225": "Turkey",
        "226": "Trinidad and Tobago",
        "227": "Tuvalu",
        "228": "Taiwan",
        "229": "Tanzania",
        "230": "Ukraine",
        "231": "Uganda",
        "232": "U.S. Minor Outlying Islands",
        "233": "United States",
        "234": "Uruguay",
        "235": "Uzbekistan",
        "236": "Vatican City",
        "237": "Saint Vincent and the Grenadines",
        "238": "Venezuela",
        "239": "British Virgin Islands",
        "240": "U.S. Virgin Islands",
        "241": "Vietnam",
        "242": "Vanuatu",
        "243": "Wallis and Futuna",
        "244": "Samoa",
        "245": "Kosovo",
        "246": "Yemen",
        "247": "Mayotte",
        "248": "South Africa",
        "249": "Zambia",
        "250": "Zimbabwe",
        "1001": "England",
        "1002": "Scotland",
        "1003": "Wales",
        "1004": "Northern Ireland"
    };
</script>  <!--===================================================-->


<div class="modal" id="create-quiz-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">
                    Create quiz
                </h4>
            </div>

            <form method="post" id="questionsForm">

                <div class="gab-list-wrapper">

                    <div class="modal-body">

                        <div class="quiz-wrapperx" style="padding: 0 15px;">

                            <div class="form-group" style="margin-bottom:20px;">
                                <input type="text" placeholder="Enter a quiz question" id="question" name="question" class="form-control questioninput" value="" style="font-size: 20px;height: 50px;">
                                <div class="subscription-explainer quiz-explainer">You may use 3 dots ... to create a blank space and
                                    #hashtags to categorize your quizzes.<br>
                                    Example: The cat jumped ... the table. #grammar #beginner</div>
                            </div>

                            <div id="quiz-wrapper">

                                <div class="form-group">
                                    <input type="text" placeholder="Choice 1" name="answers[]" class="form-control" value="" style="font-size: 20px;height: 50px;">
                                </div>

                                <div class="form-group">
                                    <input type="text" placeholder="Choice 2" name="answers[]" class="form-control" value="" style="font-size: 20px;height: 50px;">
                                </div>

                            </div>


                            <div id="photo-placeholder" class="hidden"></div>

                            <div>
                                <a href="#" class="btn-add">+ Add a choice</a>
                            </div>

                            <div>
                                <a href="#" class="photolink-quiz">+ Add an image</a>
                                <span style="color: #8899a6;margin-left: 2px;">(Min: 320x180 pixels / Max: 8MB)</span>
                                <div class="imgUploadError hidden" style="font-size:14px;color:red;margin-left:10px;">This image doesn't meet the min/max sizing requirements</div>
                            </div>

                            <div>
                                <a href="#" class="videolink">+ Add a Youtube video</a>
                            </div>

                            <div class="form-group" id="videowrapper" style="display:none;">
                                <input type="text" style="font-size: 20px;height: 50px;" value="" class="form-control quiz-extra-choice" placeholder="Ex: https://www.youtube.com/watch?v=L1gTugfuZgg" name="video"><button aria-label="Close" class="close" type="button"><span aria-hidden="true">×</span></button></div>

                            <hr class="quizHR">

                            <div class="form-group">
                                <select name="correct" id="correct" class="form-control quiz-select">
                                    <option value="">Pick correct answer</option>
                                    <option value="1">Choice 1</option>
                                    <option value="2">Choice 2</option>
                                </select>
                                <input type="hidden" id="numAnswers" value="2">
                                <input type="hidden" id="photo" name="photo" value="">
                            </div>

                        </div>

                    </div>

                </div>

                <div class="modal-footer" style="text-align:center;">
                    <button class="btn btn-lg btn-primary savebutton" disabled type="submit" style="margin-right:5px;width:80px;">Create</button>
                    <button class="btn btn-lg btn-default" data-dismiss="modal" style="margin-left:5px;width:80px;">Cancel</button>
                </div>

            </form>

        </div>
    </div>
</div>


<div class="modal" id="delete-quiz-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-body" style="padding: 30px 15px 0;text-align: center;">
                <p style="font-size:20px;">Are you sure you want to delete this quiz?</p>
            </div>

            <div class="modal-footer" style="text-align:center;border:none;">
                <button class="btn btn-lg btn-primary deletequizbutton" type="submit" style="margin-right:5px;width:80px;">Delete</button>
                <button class="btn btn-lg btn-default" data-dismiss="modal" style="margin-left:5px;width:80px;">Cancel</button>
                <input type="hidden" id="deletequizvalue" value="0">
            </div>

        </div>
    </div>
</div>


<div class="modal" id="delete-post-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-body" style="padding: 30px 15px 0;text-align: center;">
                <p style="font-size:20px;">Are you sure you want to delete this post?</p>
            </div>

            <div class="modal-footer" style="text-align:center;border:none;">
                <button class="btn btn-lg btn-danger delete-post-link" type="submit" data-postid="" style="margin-right:5px;margin-top: 0;width:80px;">Delete</button>
                <button class="btn btn-lg btn-default" data-dismiss="modal" style="margin-left:5px;width:80px;">Cancel</button>
                <input type="hidden" id="deletequizvalue" value="0">
            </div>

        </div>
    </div>
</div>




<div class="modal" id="register-now-modal" role="dialog" aria-labelledby="myModalLabel" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Sign up free!</h4>
            </div>

            <div class="modal-body" style="padding:15px 30px;">
                <p>By creating a free <b>bitgab</b> account you can:</p>
                <ul>
                    <li>Complete new exercises every day with grammar explanations and vocabulary</li>
                    <li>Practice your conversation with other students, friends or teachers</li>
                    <li>Have your questions answered anytime</li>
                </ul>

            </div>

            <div class="modal-footer" style="text-align:center;">
                <a id="register-now-modal-btn" href="/en/learn-english" class="btn btn-lg btn-success">Create free account</a>
            </div>

        </div>
    </div>
</div>


<div class="modal" id="enter-bio-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Add Bio</h4>
            </div>
            <form class="form form-self-enabler">
                <div class="modal-body">

                    <!-- textarea -->
                    <div class="form-group">
                        <label class="menu-item-header" style="font-weight:600;">Add a short bio of yourself</label>
                        <textarea class="form-control contactmessage" name="entered-bio" id="entered-bio" rows="5" placeholder="Enter text..." maxlength="500"></textarea>
                    </div>

                </div>
                <div style="text-align:center;padding:0 0 30px 0;" class="contactbuttons">
                    <button type="submit" class="btn btn-primary btn-lg" id="bio-save-button" data-contact="student" style="margin-right:10px;width:100px;" disabled="">Save</button>
                    <a type="button" class="btn btn-default btn-lg" data-dismiss="modal" style="width:100px;">Cancel</a>
                </div>
            </form>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>




<div class="md-overlay"></div>


<input type="hidden" id="sectionfilter" value="find-friends">

<input type="hidden" id="ui" value="en">
<input type="hidden" id="course" value="1">
<input type="hidden" id="mycourse" value="1">
<input type="hidden" id="user" value="38063">
<input type="hidden" id="plan" value="">
<input type="hidden" id="teacherLang" value="4">
<input type="hidden" id="exercisesfrom" value="0">
<input type="hidden" id="exerciseslimit" value="1000">
<input type="hidden" id="topicsautotrigger" value="0">
<!--
    <input type="hidden" id="mylevel" value="1">
    -->
<input type="hidden" id="myleveltitle" value="Beginner">
<input type="hidden" id="favorites" value="">
<input type="hidden" id="cat" value="">
<input type="hidden" id="s" value="">

<input type="hidden" id="groupid" value="0">
<input type="hidden" id="boardsfrom" value="0" autocomplete="off">
<input type="hidden" id="retrievedBoards" value="0" autocomplete="off">

<input type="hidden" id="boardsfrommodal" value="0" autocomplete="off">


<input type="hidden" id="usertype" value="student">
<input type="hidden" id="country" value="122">
<input type="hidden" id="loggedlang" value="4">
<input type="hidden" id="topicsfrom" value="0">
<input type="hidden" id="topicslimit" value="9">
<input type="hidden" id="indextopic" value="0">
<input type="hidden" id="hidecompleted" value="0">

<input type="hidden" id="topicsautotrigger" value="0">
<input type="hidden" id="mylevel" value="1" autocomplete="off">
<input type="hidden" id="mytopics" value="1">


<input type="hidden" id="friendsfrom" value="0">
<input type="hidden" id="teachersfrom" value="0">
<input type="hidden" id="groupsfrom" value="0">
<input type="hidden" id="userDataId" value="38063">
<input type="hidden" id="userDataType" value="student">




<!-- Friend Search Fields -->
<input type="hidden" id="qname" value="">
<input type="hidden" id="qusername" value="">
<input type="hidden" id="qcity" value="">
<input type="hidden" id="qcountry" value="">
<input type="hidden" id="quniversity" value="">
<input type="hidden" id="qcollege" value="">

<input type="hidden" id="issearchprofile" value="1">
<input type="hidden" id="searchfrom" value="0" autocomplete="off">


<!-- Teacher Search Fields -->
<input type="hidden" id="qname2" value="">
<input type="hidden" id="qcountry2" value="">
<input type="hidden" id="qprice" value="">

<input type="hidden" id="issearchprofile2" value="">
<input type="hidden" id="searchfrom2" value="0" autocomplete="off">

<input type="hidden" id="issearchprofile3" value="">
<input type="hidden" id="searchfrom3" value="0" autocomplete="off">

<input type="hidden" id="maxPriceRange" value="35764">





<input type="hidden" id="welcomeModalStudent" value="0"><input type="hidden" id="welcomeModalTeacher" value="0">


<span class="btn-flat inverse fileinput-button">
      <input id="fileupload" type="file" name="files[]" style="z-index:-1;" multiple>
        <input type="hidden" id="userID" name="userID" value="38063">
        <input type="hidden" id="filenames" name="filenames">
        <input type="hidden" id="filesizes" name="filesizes">
        <input type="hidden" id="filetypes" name="filetypes">
        <input type="hidden" id="fileurls" name="fileurls">
        <input type="hidden" id="filethumbnailUrl" name="filethumbnailUrl">
        <input type="hidden" id="posttype" name="posttype" value="fileupload">
    </span>


<input type="hidden" id="userid" value="38063">
<input type="hidden" id="photo" value="https://www.bitgab.com/uploads/profile/files/default.png">
<input type="hidden" id="photothumb" value="https://www.bitgab.com/uploads/profile/files/default.png">
<input type="hidden" id="newphoto" value="https://www.bitgab.com/uploads/profile/files/default.png">
<input type="hidden" id="newphotothumb" value="https://www.bitgab.com/uploads/profile/files/default.png">

<input type="hidden" id="cover" value="">
<input type="hidden" id="coverthumb" value="">
<input type="hidden" id="newcover" value="">
<input type="hidden" id="newcoverthumb" value="">
<input type="hidden" id="newcovershowcase" value="">


<input type="hidden" id="thisIsMe" value="1">


<!--===================================================-->
<!-- jQuery 2.1.4 -->
<script src="/assets-dashboard/js/jquery-2.2.2.min.js"></script>
<!-- Bootstrap 3.3.5 -->
<script src="/assets-dashboard/bootstrap/js/bootstrap.min.js"></script>
<!-- FastClick -->
<script src="/assets-dashboard/js/fc.js"></script>
<!-- Hide navbar when scrolling down on mobile -->
<script src="/assets-dashboard/js/headroom.min.js"></script>
<!-- Salvattore -->
<script src="/assets-dashboard/js/salvattore.min.js"></script>
<!-- multi-step-modal.js -->
<script src="/assets-dashboard/js/multi-step-modal.js"></script>
<!-- Star Ratings -->
<script src="/assets-dashboard/js/star-rating.min.js"></script>
<!-- Card.js -->
<script src="/assets-dashboard/js/card.js"></script>
<!-- Custom Scrollbar -->
<script src="/assets-dashboard/js/jquery.mCustomScrollbar.min.js"></script>
<!-- Global.js -->
<script src="/en/dashboard/dist/js/global.js"></script>
<!-- Autolinker.js-->
<script src="/assets-dashboard/js/Autolinker.min.js"></script>
<!-- Autosize.js-->
<script src="/assets-dashboard/js/autosize.min.js"></script>    <!--===================================================-->

<!-- Upload Scripts -->
<script src="/assets-dashboard/plugins/juploader/js/vendor/jquery.ui.widget.js"></script>
<script src="/assets-dashboard/plugins/juploader/js/jquery.iframe-transport.js"></script>
<script src="/assets-dashboard/plugins/juploader/js/jquery.fileupload.js"></script>

<script>


    var scrolledCheck = false,
        scrolledCheckTopics = false,
        scrolledCheckQuizzes = false,
        scrolledCheckPosts = false;


    function notify(contentid,type,container){

        var contentHTML = $('#'+contentid).find('.alert').html();
        var autoClose = true;
        $.niftyNoty({
            type: type,
            container : container,  //page
            html : contentHTML,
            timer : autoClose ? 3000 : 0
        });

    }


    function setFavorite(user,topic){

        var params = 'user='+user+'&topic='+topic;
        //console.log(params);
        $.ajax( {
            type: "POST",
            url: "dashboard/ajax/setFavorite.php",
            data: params,
            success: function(data){
                //console.log(data);

                var returned = data;
                var myKey = /added/;
                var myMatch = returned.search(myKey);
                var myKey2 = /deleted/;
                var myMatch2 = returned.search(myKey2);

                if(myMatch != -1)
                {
                    $('#topic-' + topic + ' .fv-index').closest('.social-buttons').addClass('active');
                }
                else if(myMatch2 != -1)
                {
                    $('#topic-' + topic + ' .fv-index').closest('.social-buttons').removeClass('active');
                }
                return false;
            }

        }); // ajax end
        return false;

    }

    //  function topicImageLoaded(element) {
    //    $(element).fadeTo(75,1);
    //    $(element).closest('.topic-box').addClass('loaded');
    //
    //    var s = $('#s').val();
    //
    //    if(s && $('.topic-box').length == $('.topic-box.loaded').length) {
    //      $('#endSearch').removeClass('hidden').fadeTo(75,1);
    //    }
    //  }
    //
    //  function topicImageError(element) {
    //    $(element).css({"height": "200px",
    //            "background": "#fff"});
    //    $(element).attr('src', 'https://www.bitgab.com/en/dashboard/img/logos/bg.svg');
    //    $(element).closest('.topic-box').addClass('loaded');
    //
    //    var s = $('#s').val();
    //
    //    if(s && $('.topic-box').length == $('.topic-box.loaded').length) {
    //      $('#endSearch').removeClass('hidden').fadeTo(75,1);
    //    }
    //  }


    var handleFilteration = function(footerMiniIndex){

        // Handle Filters
        $('.filterlink').unbind().click(function(e){
            e.preventDefault();

            console.log(".filterlink CLICKED....");

            $('body').append(footerMiniIndex);
            $('#footer-mini-index').removeClass('loaded').addClass('hidden');
            $('#endSearch').addClass('hidden');
            $('#index-content .empty-results').addClass('hidden');
            $('#grid .column').html('');
            $('#topicsfrom').val('0');
            $('#topicsautotrigger').val('0');


            var user = $('#user').val();
            var filter = $(this).attr('data-filter');

            if(filter == 'favorites')
            {
                $('#cat').val('');
                $('#favorites').val('1');
                $('#mytopics').val('');
                $('#mylevel').val('');
                filter = 'Favorites <span class="caret"></span>';
                $('h1.page-title').text('Exercises - Favorites');
            }
            else if(filter == 'mytopics')
            {
                $('#cat').val('');
                $('#mytopics').val('1');
                $('#mylevel').val('');
                filter = 'My Exercises <span class="caret"></span>';
                $('h1.page-title').text('My Exercises');
            }
            else if(filter == 'Grammar' || filter == 'Reading' || filter == 'Listening' || filter == 'Writing')
            {
                $('#cat').val(filter);
                //$('#favorites').val('');
                //$('#mylevel').val('');

                //$('h1.page-title').text('Topics - '+filter+'');

                //filter = filter + ' <span class="caret"></span>';

                var pageTitle = $('h1.page-title').text(),
                    filterText = '';

                pageTitle = pageTitle.replace(/\(.*?\)/, '');

                if(filter == 'Grammar') {
                    filter = 'Grammar <span class="caret"></span>';
                    filterText = ' (Grammar)';
                    $('h1.page-title').html(pageTitle+filterText);
                }
                if(filter == 'Reading') {
                    filter = 'Reading <span class="caret"></span>';
                    filterText = ' (Reading)';
                    $('h1.page-title').html(pageTitle+filterText);
                }
                if(filter == 'Listening') {
                    filter = 'Listening <span class="caret"></span>';
                    filterText = ' (Listening)';
                    $('h1.page-title').html(pageTitle+filterText);
                }
                if(filter == 'Writing') {
                    filter = 'Writing <span class="caret"></span>';
                    filterText = ' (Writing)';
                    $('h1.page-title').html(pageTitle+filterText);
                }
            }
            else if(filter == 'mylevel')
            {

                var name = 'ismylevel';
                var value = '1';
                var day = '365';
                setCookie(name,value,day);

                $('#cat').val('');
                $('#favorites').val('');
                $('#mytopics').val('');
                $('#mylevel').val('2');
                scrolledCheck = false;

                var myleveltitle = $('#myleveltitle').val();
                if(course == "1" || course == "2" || course == "3" || course == "1,2,3") {
                    if($('#myleveltitle').val() ==  "Beginner")
                        $('#course').val('1');
                    else if($('#myleveltitle').val() ==  "Intermediate")
                        $('#course').val('2');
                    else if($('#myleveltitle').val() ==  "Advanced")
                        $('#course').val('3');
                } else if(course == "4" || course == "5" || course == "6" || course == "4,5,6") {
                    if($('#myleveltitle').val() ==  "Beginner")
                        $('#course').val('4');
                    else if($('#myleveltitle').val() ==  "Intermediate")
                        $('#course').val('5');
                    else if($('#myleveltitle').val() ==  "Advanced")
                        $('#course').val('6');
                }

                filter = 'My Level <span class="caret"></span>';
                $('h1.page-title').text('Exercises - '+myleveltitle+' Level');

                $('#endSearch').addClass('hidden');
                $('#footer-mini-index').removeClass('hidden').css('opacity', 0);


            }
            else if(filter == 'all')
            {

                var name = 'ismylevel';
                unsetCookie(name);


                $('#cat').val('');
                $('#favorites').val('');
                $('#mytopics').val('');
                $('#mylevel').val('2');
                scrolledCheck = false;

                if(course == "1" || course == "2" || course == "3" || course == "1,2,3") {
                    $('#course').val('1,2,3');
                } else if(course == "4" || course == "5" || course == "6" || course == "4,5,6") {
                    $('#course').val('4,5,6');
                }


                //if($('#usertype').val() != "teacher") {
                $('h1.page-title').text('Exercises - All Levels');
                filter = 'All Levels <span class="caret"></span>';
                //} else
                //filter = 'All <span class="caret"></span>';

                $('#endSearch').addClass('hidden');
                $('#footer-mini-index').removeClass('hidden').css('opacity', 0);

            }
            else if(filter == 'beginner')
            {

                //var name = 'ismylevel';
//              unsetCookie(name);
                $('#mylevel').val('2');


                $('#cat').val('');
                $('#favorites').val('');
                if(course == "1" || course == "2" || course == "3" || course == "1,2,3") {
                    $('#course').val('1');
                } else if(course == "4" || course == "5" || course == "6" || course == "4,5,6") {
                    $('#course').val('4');
                }
                scrolledCheck = false;


                //if($('#usertype').val() != "teacher") {
                $('h1.page-title').text('Exercises - Beginner Level');
                filter = 'Beginner <span class="caret"></span>';
                //} else
                //filter = 'Beginner <span class="caret"></span>';

                $('#endSearch').addClass('hidden');
                $('#footer-mini-index').removeClass('hidden').css('opacity', 0);

            }
            else if(filter == 'intermediate')
            {

                //var name = 'ismylevel';
//              unsetCookie(name);
                $('#mylevel').val('2');


                $('#cat').val('');
                $('#favorites').val('');
                if(course == "1" || course == "2" || course == "3" || course == "1,2,3") {
                    $('#course').val('2');
                } else if(course == "4" || course == "5" || course == "6" || course == "4,5,6") {
                    $('#course').val('5');
                }
                scrolledCheck = false;


                //if($('#usertype').val() != "teacher") {
                $('h1.page-title').text('Exercises - Intermediate Level');
                filter = 'Intermediate <span class="caret"></span>';
                //} else
                //filter = 'Intermediate <span class="caret"></span>';

                $('#endSearch').addClass('hidden');
                $('#footer-mini-index').removeClass('hidden').css('opacity', 0);

            }
            else if(filter == 'advanced')
            {

                //var name = 'ismylevel';
//              unsetCookie(name);
                $('#mylevel').val('2');


                $('#cat').val('');
                $('#favorites').val('');
                if(course == "1" || course == "2" || course == "3" || course == "1,2,3") {
                    $('#course').val('3');
                } else if(course == "4" || course == "5" || course == "6" || course == "4,5,6") {
                    $('#course').val('6');
                }
                scrolledCheck = false;


                //if($('#usertype').val() != "teacher") {
                $('h1.page-title').text('Exercises - Advanced Level');
                filter = 'Advanced <span class="caret"></span>';
                //} else
                //filter = 'Advanced <span class="caret"></span>';

                $('#endSearch').addClass('hidden');
                $('#footer-mini-index').removeClass('hidden').css('opacity', 0);

            }

            $('#activefilter').html(filter);
            course = $('#course').val();
            //getTopics(course,user);
            $('body').removeClass('filter-load');
            //setTimeout(function(){ adjustFooter(); }, 0);

        });

    }








    /*
  GET TOPICS
  *********************************************************************/

    function getTopics(course,user){

        var from = Number($('#topicsfrom').val());
        var limit = Number($('#topicslimit').val());
        var favorites = $('#favorites').val();
        var mytopics = $('#mytopics').val();
        var mylevel = $('#mylevel').val();
        var userID = $('#useridGlobal').val();
        var hidecompleted = $("#hidecompleted").val();



        //$('#endSearch').addClass('hidden');

        /*
      if(mylevel == "")
      {
        if(course == "1" || course == "2" || course == "3" || course == "1,2,3")
          course = "1,2,3";
        else if(course == "4" || course == "5" || course == "6" || course == "4,5,6")
          course = "4,5,6";
      } else if (mylevel == "1") {
        if(course == "1" || course == "2" || course == "3" || course == "1,2,3") {
          if($('#myleveltitle').val() ==  "Beginner")
            course = "1";
          else if($('#myleveltitle').val() ==  "Intermediate")
            course = "2";
          else if($('#myleveltitle').val() ==  "Advanced")
            course = "3";
        } else if(course == "4" || course == "5" || course == "6" || course == "4,5,6") {
          if($('#myleveltitle').val() ==  "Beginner")
            course = "4";
          else if($('#myleveltitle').val() ==  "Intermediate")
            course = "5";
          else if($('#myleveltitle').val() ==  "Advanced")
            course = "6";
        }
      }
      */

        var cat = $('#cat').val();
        var s = $('#s').val();
        //if(s != '')
        //  limit = 100;
        //var footerMiniIndex = $('#footer-mini-index'),
        //  endSearchButton = $('#endSearch');


        //$('#index-content .spinner').remove();
        //if(!footerMiniIndex.hasClass('loaded') && endSearchButton.hasClass('hidden'))
        //$('#index-content').append('<div class="spinner grey" style="margin: 30px auto 10px auto;"></div>');

        if( $('#quizzeswrap div.mar-btm').length < 1 )
            $('#quizzeswrap').append('<div class="spinner grey" style="margin: 94px auto;"></div>');
        else
            $('#quizzeswrap').append('<div class="spinner grey" style="margin: 20px auto;"></div>');

        scrolledCheckTopics = true;


        //console.log("data: " + '/en/dashboard/ajax/getTopics.php?course='+course+'&user='+user+'&from='+from+'&limit='+limit+'&searchval='+s+'&favorites='+favorites+'&mytopics='+mytopics+'&cat='+cat);

        var course = '';

        $.getJSON('/en/dashboard/ajax/getTopicsProfile.php?course='+course+'&user='+user+'&owner='+$("#userDataId").val()+'&from='+from+'&limit='+limit+'&searchval='+s+'&favorites='+favorites+'&mytopics='+mytopics+'&cat='+cat+'&ui='+$("#ui").val()+"&hidecompleted="+hidecompleted, function(data) {
            //$(data.items).each(function (i, topic) {


            if(data.length > 0)
            {

                $.each(data, function(i,topic) {

                    var indextopic = Number($('#indextopic').val());
                    var grid = document.querySelector('#grid');
                    var item = document.createElement('div');
                    var islive = topic.islive;
                    var video_icon_hider = '';
                    var topic_type = topic.type;
                    topic_type = topic_type.toLowerCase();

                    //NEW PIC CONTROL - START APPLYING THIS AFTER SESSION ID SHOWN BELOW
                    if(topic.id >= 730) {
                        if(topic.video == '')
                            video_icon_hider = 'hidden';
                        var topicImage = topic.file;
                    } else {
                        video_icon_hider = 'hidden';
                        var topicImage = topic.photo;
                    }

                    if(islive == 1){
                        var topic_url = '/exercise/'+topic.slug;
                        var hide_drafts = "";
                        var hidden_drafts = "";
                        var topic_date = topic.publishDateHuman;
                        var topic_managelink = "";
                    }
                    else{
                        var topic_url = '/create-exercise/'+topic_type+'/'+topic.id;
                        var hide_drafts = "none";
                        var hidden_drafts = "hidden";
                        var topic_date = 'Unpublished exercise';
                        var topic_managelink = ' <span class="middle-dot">•</span> <a href="'+topic_url+'" class="btn-link" style="text-transform: uppercase;font-size: 12px;font-weight: 600;">Manage</a>';
                    }
                    if(topic.sponsored == "1")
                        var topic_info = '<h1><span style="margin-right:7px;">'+topic.type+' exercise &nbsp;|&nbsp; '+topic.courselevel+' level</span><span style="text-transform: uppercase;font-size: 8px;font-weight: 600;border: 1px solid #bbb;color: #999;padding: 2px 6px;border-radius: 15px;">sponsored</span></h1>';
                    else
                        var topic_info = '<h1>'+topic.type+' exercise &nbsp;|&nbsp; '+topic.courselevel+' level</h1>';

                    var hide_completed = '';
                    if( topic.isCompleted == "1" && $("#hidecompleted").val() == "1")
                        hide_completed = 'hidden';

                    var highlightedTitle = '';
                    if(topic.description == '')
                        highlightedTitle = "highlightedTitle";


                    //var shareongroups = '';

                    //if( Number($("#mytotalgroups").val()) > 0 )
                    //{

                    var shareongroups = '<li><a class="shareongroups" data-topic="'+topic.id+'" data-topicimg="'+topicImage+'" data-topicurl="'+topic_url+'" data-topictitle="'+topic.title+'" data-topiccontent="'+topic.description+'" data-topictype="'+topic.type+'" data-topiclevel="'+topic.courselevel+'">Share on a Group</a></li>';
                    //}


                    h = '<div class="box mar-btm quiz-box separator '+hide_completed+'"><div class="media-left"><a class="media-heading"data-toggle="modal"data-user="'+topic.teacherid+'"href="https://www.bitgab.com/'+topic.teacherslug+'"><img alt=""class="img-circle img-sm"src="'+topic.teacherphoto+'"></a></div><div class="media-body pad-hor"><div class="speech"><div class="quiz-creator-info"><a class="media-heading"data-toggle="modal"data-user="'+topic.teacherid+'"href="https://www.bitgab.com/'+topic.teacherslug+'">'+topic.teachername+'</a><span class="middle-dot">•</span><small class="speech-time">'+topic_date+'</small>'+topic_managelink+'</div><div class="btn-group pull-right '+hidden_drafts+'"role="group"><a class="dropdown-toggle quiz-chevron"data-toggle="dropdown"aria-expanded="false"aria-haspopup="true"><i class="ion ion-chevron-down"></i></a><ul class="dropdown-menu focus-menu"style="text-align:left;min-width:150px;padding:9px 0"><li class="hidden"id="repost-spinner"style="position:absolute;width:100%;background:#fff"><li><a class="copyquiz hidden"data-quizurl="https://www.bitgab.com'+topic_url+'">Set as Favorite</a></li>'+shareongroups+'<li class=""><a href="https://www.facebook.com/dialog/feed?app_id=247805475565266&display=popup&link=https://www.bitgab.com'+topic_url+'&redirect_uri=https://facebook.com&picture=&name='+encodeURIComponent(topic.title)+'" target="_blank">Share on Facebook</a></li><li class=""><a href="//twitter.com/share?url=https://www.bitgab.com'+topic_url+'&text='+encodeURIComponent(topic.title)+'" target="_blank">Share on Twitter</a></li><li><a class="copyquiz"data-quizurl="https://www.bitgab.com'+topic_url+'">Share Exercise Link</a></li></ul></div><p class="hidden">'+topic.type+' exercise ('+topic.courselevel.toLowerCase()+' level)<div class="box box-solid topic-box"id="topic-714"style="margin-top:10px"><div class="topic-box-wrapper"><a class="box-topic-link" href="https://www.bitgab.com'+topic_url+'"><div class="m_highlight_header postImageWrapper"><div id="play-button-overlay" class="'+video_icon_hider+'"><span class="play-button"><span></span></span></div><img alt="'+topic.title.replace(/"/g, "")+'"class="img-responsive topicBoxImage"src="'+topicImage+'"onerror="topicImageError(this)" onload="topicImageLoaded(this)"></div><div class="m_highlight_content '+highlightedTitle+'">'+topic_info+'<strong>'+topic.title+'</strong><p>'+topic.description+'</p></div></a></div></div></div></div></div>';


                    $('#completed-hider').removeClass('hidden');

                    //if( $("#sectionfilter").val() == "topics" )
                    //{
                    $("#quizzeswrap").append(h);
                    //}
                    //else
                    //{
                    // if( $("#quizzeswrap div.quiz-box").hasClass("indextopic-"+indextopic) )
                    //console.log("Existing topic...");
                    //  else{
                    //console.log("Appending TOpic HTml: " + h);
                    //   $("#quizzeswrap div.notopic:first").removeClass("notopic").addClass("topiced").addClass("indextopic-"+indextopic).before(h);
                    //console.log("TOPIC APPENDED: " + indextopic);
                    //  }

                    //indextopic = Number(indextopic) + 1;
                    //$('#indextopic').val(indextopic);
                    //}



                    //return true;

                });

                //MOBILE FAVORITE TAP FIX
                //if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ) {
                //  $('.fv-index').removeClass('desktop');
                // }

                $('#topicsfrom').val(from + limit);

                /*$('#loadmore').unbind().click(function(){
            getTopics(course,user);
            setTimeout(function(){ adjustFooter(); }, 0);
          }); */

                /*
          // Handle Favorites
          $('.favoritebtn').unbind().click(function(e){
            e.preventDefault();
            var user = $('#user').val();
            var topic = $(this).attr('data-topic');
            setFavorite(user,topic);
          });
		  */

                // Handle Favorites
                $('#completed-check').unbind().click(function(e){
                    var hidecompleted = '0';
                    if( $('#completed-check input:checkbox:checked').length > 0 ){
                        hidecompleted = '1';
                    }
                    $("#hidecompleted").val(hidecompleted);
                    $('#topicsfrom').val('0');
                    $("#quizzeswrap").addClass("noJump");
                    $("#quizzeswrap").html('');
                    getTopics(course,user);
                });


                /*
          // Handle Search
          $('#searchform').submit(function(e){
            e.preventDefault();
            var searchinput = $('#searchinput').val();
            if($('#s').val() !== searchinput)
            {
              $('#grid .column').html('');
              $('#topicsfrom').val('0');
              $('#topicsautotrigger').val('0');
              $('#s').val(searchinput);
              course = $('#course').val();

              console.log("#searchform TRIGGERED");

              //getTopics(course,user);
              //setTimeout(function(){ adjustFooter(); }, 0);
            }
            return false;
          });

          $('#searchform2').submit(function(e){
            e.preventDefault();
            var searchinput = $('#searchinput2').val();
            if($('#s').val() !== searchinput)
            {
              $('#grid .column').html('');
              $('#topicsfrom').val('0');
              $('#topicsautotrigger').val('0');
              $('#s').val(searchinput);
              course = $('#course').val();

              console.log("#searchform2 TRIGGERED");

              //getTopics(course,user);
              //setTimeout(function(){ adjustFooter(); }, 0);
            }
            return false;
          });
          */


                //handleFilteration(footerMiniIndex);

                /*
          // Handle Filters
          $('.filterlink2').unbind().click(function(e){
            e.preventDefault();

            $('body').append(footerMiniIndex);
            $('#footer-mini-index').removeClass('loaded').addClass('hidden');
            $('#endSearch').addClass('hidden');
            $('#index-content .empty-results').addClass('hidden');
            $('#grid .column').html('');
            $('#topicsfrom').val('0');
            $('#topicsautotrigger').val('0');


            var user = $('#user').val();
            var filter = $(this).attr('data-filter');

            if(filter == 'learn-spanish')
            {
              $('#cat').val('');
              $('#course').val("4,5,6");
              $('#favorites').val('');
              filter = '<span class="hidden-xs">I want to learn Spanish</span><span class="hidden-sm hidden-md hidden-lg">Spanish</span> <span class="caret"></span>';
              $('h1.page-title').text('Topics - Spanish Course');
              $('#footer-mini-index').removeClass('hidden').css('opacity', 0);

              $('#calltoaction-band-learn-english').addClass('hidden');
              $('#calltoaction-band-learn-spanish').removeClass('hidden');

              $('#calltoaction-button-english').addClass('hidden');
              $('#calltoaction-button-spanish').removeClass('hidden');

              $(".chat-log-in-link").attr('href', 'https://www.bitgab.com/en/learn-spanish');

            }
            else if(filter == 'learn-english')
            {
              $('#cat').val('');
              $('#course').val("1,2,3");
              $('#favorites').val('');
              filter = '<span class="hidden-xs">I want to learn English</span><span class="hidden-sm hidden-md hidden-lg">English</span> <span class="caret"></span>';
              $('h1.page-title').text('Topics - English Course');
              $('#footer-mini-index').removeClass('hidden').css('opacity', 0);

              $('#calltoaction-band-learn-spanish').addClass('hidden');
              $('#calltoaction-band-learn-english').removeClass('hidden');

              $('#calltoaction-button-spanish').addClass('hidden');
              $('#calltoaction-button-english').removeClass('hidden');

              $(".chat-log-in-link").attr('href', 'https://www.bitgab.com/en/learn-english');
            }

            //console.log("course: " + $('#course').val());

            $('#activefilter2').html(filter);


            course = $('#course').val();

            console.log(".filterlink2 TRIGGERED");

            //getTopics(course,user);
            //setTimeout(function(){ adjustFooter(); }, 0);

          });
          */



                $('.copyquiz').unbind().click(function(e){
                    e.preventDefault();
                    var quizUrl = $(this).data("quizurl");
                    $('#quizcopyurl').val(quizUrl);
                    $('#quizcopyurl').click();
                    $('#copy-quiz-modal').modal('show');
                    return false;
                });

                if($(window).width() > 991) {
                    $('#copy-quiz-modal').on('shown.bs.modal', function() {
                        $("#quizcopyurl").focus().select();
                        $('#copy-quiz-modal .copy-quiz-msg').addClass("hidden");
                        $("#copy-quiz-modal .copy-quiz-btn").removeClass("hidden");
                    });
                } else {
                    $('#copy-quiz-modal').on('shown.bs.modal', function() {
                        $('#copy-quiz-modal .copy-quiz-msg').addClass("hidden");
                        $("#copy-quiz-modal .copy-quiz-btn").removeClass("hidden");
                    });
                }






                $('.shareongroups').unbind().click(function(e){
                    e.preventDefault();
                    var topicId = $(this).data("topic");
                    var topicTitle = $(this).data("topictitle");
                    var topicUrl = $(this).data("topicurl");
                    var topicImg = $(this).data("topicimg");
                    var topicLevel = $(this).data("topiclevel");
                    var topicType = $(this).data("topictype");
                    var topicContent = $(this).data("topiccontent");
                    $('#shareongroups_topicid').val(topicId);


                    //$('#shareongroups-modal .shared-topic-info').html('<img src="'+topicImg+'" class="img-responsive" style="max-width:100px;"> <a href="'+topicUrl+'" target="_bank">'+topicTitle+' '+topicContent+ ' ' +topicType + ' ' +topicLevel+ '</a>');

                    $('#shareongroups-modal .shared-topic-info').html('<div class="alert alert-grey payment-modal-option" style="padding: 12px;margin-top: 5px;"><div style="display: flex;align-items: center;"><div style="margin-right: 10px;"><img src="'+topicImg+'" style="max-height: 100px;border-radius: 3px;"></div><div style="overflow: hidden;max-height: 95px;padding-bottom: 5px;"><div style="color: #ef7d30;font-weight: 600;font-size: 20px;line-height: 30px;text-overflow: ellipsis;overflow: hidden;white-space: nowrap;">'+topicTitle+'</div><div style="margin-top: -3px;color: #8899a6;text-transform: uppercase;font-weight: 600;font-size: 12px;">'+topicType+' exercise ('+topicLevel.toLowerCase()+' level)</div><div style="color: #657786;font-size: 16px;line-height: 22px;">'+topicContent+'</div></div></div></div>');

                    $(this).closest('.btn-group').removeClass('open');

                    $('#shareongroups-modal').modal('show');
                    return false;
                });


                $('#shareongroups-modal').on('shown.bs.modal', function() {

                    // Get my groups
                    $.ajax({
                        url : "/en/dashboard/ajax/getMyGroups.php",
                        type: "POST",
                        data : "user="+$('#useridGlobal').val() + "&topic=" +  $('#shareongroups_topicid').val(),
                        success: function(data)
                        {
                            if(data !== "data")
                            {
                                if(data.trim() == "noresult") {
                                    $("#mygrouplist").html('<div class="group-list no-groups">You have to be an owner or an admin in a group to share this</div>');
                                } else{
                                    $("#shareongroups-modal label.menu-item-header").removeClass("hidden");
                                    $("#mygrouplist").html('<div class="group-list">'+data+'</div>');
                                }

                                //$('#shareongroupsButton').prop("disabled", false);

                                $('#mygrouplist .checkbox label').on('click',function(){
                                    if($('#mygrouplist .checkbox label input[type="checkbox"]:checked').length > 0)
                                        $('#shareongroupsButton').prop("disabled", false);
                                    else
                                        $('#shareongroupsButton').prop("disabled", true);
                                });

                                // Share on groups
                                $("#shareongroupsButton").unbind().click(function(e){
                                    e.preventDefault();

                                    var chkArray = [];
                                    $("#shareongroups-modal input:checked").each(function() {
                                        chkArray.push($(this).val());
                                    });
                                    var selected;
                                    selected = chkArray.join(',');

                                    var dataUrl = "user="+$('#useridGlobal').val() + "&groups=" + selected + "&topic=" + $('#shareongroups_topicid').val();

                                    $.ajax({
                                        url : "/en/dashboard/ajax/shareTopicOnGroups.php",
                                        type: "POST",
                                        data : dataUrl,
                                        success: function(data)
                                        {
                                            var returned = data;
                                            var myKey = /error/;
                                            var myMatch = returned.search(myKey);
                                            if(myMatch != -1)
                                            {
                                                //alert("Unknown error!");
                                            }
                                            else
                                            {
                                                $("#shareongroups-modal").modal("hide");

                                                var text = "Exercise Shared";
                                                notifyChanges(text);
                                                //alert("Successfully shared!");
                                            }
                                            return false;

                                        }
                                    });
                                });




                            }
                        }
                    });


                });


                $('#shareongroups-modal').on('hidden.bs.modal', function() {

                    $('#mygrouplist .checkbox label input[type="checkbox"]:checked').prop('checked', false);
                    $('#shareongroupsButton').prop("disabled", true);

                });






                //if(!$('#index-content .empty-results').hasClass("hidden"))
//            $('#index-content .empty-results').addClass("hidden");

//          if(data.length < limit && !s) {
//            $('#grid .column:last-child').append(footerMiniIndex);
//            $('#footer-mini-index').fadeTo(50,1);
//            $('#footer-mini-index').addClass('loaded');
//          }


                scrolledCheckTopics = false;


            }
            else
            {

                //console.log(".EMPTY TRIGGERED");

                if( $('#quizzeswrap div.mar-btm').length < 1 )
                    $('#quizzeswrap .empty-settings').removeClass('hidden');

                scrolledCheckTopics = true;

                //handleFilteration(footerMiniIndex);
                /*
          if (!s && $('#index-content #grid .column').children().length < 1) {


             if( $("#mytopics").val() == "1" ){


                  $("#viewotherstopic").unbind().click(function(e){
                      e.preventDefault();
                      $("#toggle-wrapper ul li a[data-filter='all']").trigger("click");
                      return false;
                  });

             }
             else{
                $('#index-content .empty-results').text("No topics in this category");
                $('#endSearch').text("View all");
               $('#endSearch').removeClass('hidden').fadeTo(50,1);
             }


              //$('#index-content .empty-results').removeClass("hidden").fadeTo(50,1);
			  if($('#quizzeswrap div.mar-btm').length < 1)
			  	$('#quizzeswrap .empty-settings').removeClass("hidden");

            } else if ($('#index-content #grid .column').children().length < 1) {
              //$('#toggle-wrapper').addClass('hidden');
              $('#index-content .empty-results').removeClass("hidden").fadeTo(50,1);
              $('#endSearch').removeClass('hidden').fadeTo(50,1);
            } else if(data.length == 0  && !s) {
              $('#grid .column:last-child').append(footerMiniIndex);
              $('#footer-mini-index').fadeTo(50,1);
              $('#footer-mini-index').addClass('loaded');
            }
			*/
            }

            //$('#index-content div.spinner').remove();


            $('#quizzeswrap div.spinner').remove();



            //scrolledCheck = false;




        });

        return false;

    }




    var bookingNotification = function(){

        console.log("i am in bookingNotification...");

        var  formData = "user="+$('#useridGlobal').val();
        $.ajax({
            url : "/en/dashboard/ajax/bookingNotification.php",
            type: "POST",
            data : formData,
            success: function(data)
            {
                var returned = data;
                var myKey = /existingbooking/;
                var myMatch = returned.search(myKey);
                var myKey2 = /nobooking/;
                var myMatch2 = returned.search(myKey2);
                if(myMatch != -1)
                {
                    //console.log("No invitation...");

                    var returnedArr = returned.split(" !~ ");

                    if( returnedArr[4] == "1" )
                    {
                        var moreBookings = '<a id=view-more-lessons href=#view-booked-lessons-modal data-toggle=modal>View more lessons</a>';
                    }
                    else
                        var moreBookings = '';


                    if( returnedArr[5] == "teacher" )
                    {
                        var otherperson = 'student';
                    }
                    else
                        var otherperson = 'teacher';

                    var bookingHtml = '<div class=book-lesson-text>You have a '+returnedArr[1]+'-minute conversation class with '+returnedArr[2]+' on '+returnedArr[3]+'. Find your '+otherperson+' in the chat on that date to start the class.</div><div class=open-chat-alert-message><a id=lesson-confirmation-message href="javascript:void(0)" onclick=openNav()>Open Chat</a> '+moreBookings+'</div>';

                    $('#bookingNotification').html(bookingHtml);
                    $('#bookingNotification').removeClass('hidden');

                    return false;
                }
                else if(myMatch2 != -1)
                {
                    console.log("No booking...");
                    //window.location = '/en/login?logout=1'; // Removed since the logout bug
                    return false;
                }
                else
                {

                    console.log("Nada...");
                }
            }
        });
        return false;

    }





    // REMOVE FRIEND
    var removeTeacherProfile = function(){

        $('.removeTeacherButton').unbind().click(function(e){
            e.preventDefault();

            var button = $(this);

            var user = $('#useridGlobal').val();
            var target = $(this).attr('data-teacher');

            var  formData = "user="+user+"&target="+target;

            $.ajax({
                url : "/en/dashboard/ajax/removeTeacher.php",
                type: "POST",
                data : formData,
                success: function(data)
                {
                    var returned = data;
                    var myKey = /error/;
                    var myMatch = returned.search(myKey);
                    if(myMatch != -1)
                    {
                        //alert("Sorry.. Error while adding friend!");
                        //notify('alert-retrieve-error','danger','floating');
                        return false;
                    }
                    else
                    {
                        button.closest('li').remove();

                        $('#user-profile-modal .modal-footer').remove();

                        var currentNavFriends = Number($('#profilenavteachers').text());
                        currentNavFriends = currentNavFriends - 1;
                        if(currentNavFriends < 0)
                            currentNavFriends = 0;
                        $('#profilenavteachers').text(currentNavFriends);

                        //if(currentNavFriends == 0)

                        $('#teachersfrom').val('0');
                        getUserTeachersProfile();
                        //getFriendRequestsHeader();

                        return false;
                    }
                }
            });
            return false;

        });

    }



    var getUserInfoProfile = function(){


        //var button = $(event.relatedTarget);
        var targetuser = $("#userDataId").val();

        $.getJSON('/en/dashboard/ajax/getUserInfo.php?user='+targetuser, function(data) {


            var userinfoHtml = '';


            var userinfoFooter = '';

            var fakeuser = $('#fakeuser').val();

            if(data.friendstatus == "" && $('#usertypeGlobal').val() == "student" && fakeuser == 0)
            {
                userinfoFooter += '<div class="action-buttons-wrap"><button style="display:block;margin:0 auto;" data-dismiss="modal" class="btn btn-lg btn-primary addFriendButton" type="button" data-friend="'+data.id+'">Add friend</button></div>';
            }
            else if(data.friendstatus == "" && $('#usertypeGlobal').val() == "student" && fakeuser > 0)
            {
                userinfoFooter += '<div class="action-buttons-wrap"><button style="display:block;margin:0 auto;" data-toggle="modal" data-target="#register-now-modal" data-dismiss="modal" class="btn btn-lg btn-primary">Add friend</button></div>';
            }
            else if(data.friendstatus == "0" && $('#usertypeGlobal').val() == "student")
            {
                userinfoFooter += '<div class="action-buttons-wrap"><button style="display:block;margin:0 auto;" data-dismiss="modal" class="btn btn-lg btn-primary addFriendButton" type="button" disabled>Request sent</button></div>';
            }

            else if(data.friendstatus == "-1" && $('#usertypeGlobal').val() == "student")
            {
                userinfoFooter += '<div class="action-buttons-wrap"><button style="margin-right:5px;width:100px;" class="btn btn-primary btn-lg acceptFriendButton" data-friend="'+data.id+'" data-friendname="'+data.name+'"  data-friendphoto="'+data.photothumb+'" data-usertype="student" type="button">Accept</button><button style="width:100px;" data-dismiss="modal" class="btn btn-default btn-lg removeFriendButton" data-friend="'+data.id+'" type="button">Reject</button></div>';
            }

            else if(data.friendstatus == "1" && $('#usertypeGlobal').val() == "student")
            {
                userinfoFooter += '<div class="action-buttons-wrap"><button style="width:140px;" class="btn btn-primary btn-lg msgitem" data-friend="'+data.id+'" data-friendname="'+data.name+'"  data-friendphoto="'+data.photothumb+'" data-usertype="student" data-dismiss="modal" type="button">Send Message</button></div>';
            }

            else if(data.friendstatus == "1" && $('#usertypeGlobal').val() == "teacher")
            {
                userinfoFooter += '<div class="action-buttons-wrap"><button style="width:140px;" class="btn btn-primary btn-lg msgitem" data-friend="'+data.id+'" data-friendname="'+data.name+'"  data-friendphoto="'+data.photothumb+'" data-usertype="student" data-dismiss="modal" type="button">Send Message</button></div>';
            }

            if(targetuser === $('#useridGlobal').val())
                userinfoFooter = '<div class="action-buttons-wrap"><a href="#create-quiz-modal" style="margin:4px;" type="submit" data-toggle="modal" data-target="#create-quiz-modal" class="btn btn-primary btn-lg">Create Quiz</a><a href="https://www.bitgab.com/practice-english-conversation" style="margin:4px;" class="btn btn-gab btn-lg">Conversation</a></div>';


            //$('#user-profile-modal .modal-body').after(userinfoFooter);
            //if(targetuser != $('#useridGlobal').val())
            $('#action-buttons, #action-buttons-scroll, #action-buttons-mobile').html(userinfoFooter);

            addFriend();
            removeFriend();
            acceptFriend();
            openMessageWindow();

            $('#user-profile-modal .modal-body, #user-profile-modal .modal-footer').fadeTo(75, 1);

            return false;

        });


    }



    var getTeacherInfoProfile = function(){

        //var button = $(event.relatedTarget);
        var targetuser = $("#userDataId").val();

        $.getJSON('/en/dashboard/ajax/getTeacherInfoNew.php?user='+$("#userDataId").val(), function(data) {


            //CHANGED END

            var userinfoFooter = '';

            var fakeuser = $('#fakeuser').val();

            if(typeof fakeuser == "undefined")
                var fakeuser = 0;

            var schoolid = $('#school_id').val();


            //console.log("bgteacher: " + data.bgteacher);
            //console.log("userlimit: " + data.userlimit);

            if(schoolid == "0") {
                if(data.bgteacher == "1")
                {

                    if(data.userlimit !== 2)
                    {
                        //CHANGED START
                        if(data.friendstatus == "" && $('#usertypeGlobal').val() == "student" && fakeuser == 0)
                        {
                            userinfoFooter += '<div class="action-buttons-wrap"><button id="gab-button-teacher-profile" class="btn btn-primary btn-lg gab-button-teacher-profile onlyForSubscribersVariant" data-dismiss="modal" data-toggle="modal" data-target="#payment-modal" type="button" style="margin-right:3px;width:128px;">Ask Question</button><button style="margin-left:3px;width:128px;" class="btn btn-gab btn-lg gab-button-teacher-profile" data-user="'+targetuser+'" data-friendname="'+data.name+'" data-friendphoto="XXX" data-usertype="teacher" data-dismiss="modal" type="button" data-toggle="modal" data-target="#book-lesson-modal">Reserve Class</button></div>';
                        } else if(data.friendstatus == "" && $('#usertypeGlobal').val() == "student" && fakeuser > 0)
                        {
                            userinfoFooter += '<div class="action-buttons-wrap"> <button id="gab-button-teacher-profile" class="btn btn-primary btn-lg gab-button-teacher-profile" data-dismiss="modal" data-toggle="modal" data-target="#register-now-modal" type="button" style="margin-right:3px;width:128px;">Ask Question</button> <button style="margin-left:3px;width:128px;" class="btn btn-gab btn-lg gab-button-teacher-profile" data-user="'+targetuser+'" data-friendname="'+data.name+'" data-friendphoto="XXX" data-usertype="teacher" data-dismiss="modal" type="button" data-toggle="modal" data-target="#register-now-modal">Reserve Class</button> </div>';
                        }
                        else if(data.friendstatus == "1" && $('#usertypeGlobal').val() == "student" && fakeuser == 0)
                        {
                            userinfoFooter += '<div class="action-buttons-wrap"> <button id="gab-button-teacher-profile" class="btn btn-primary btn-lg gab-button-teacher-profile onlyForSubscribersVariant" data-dismiss="modal" data-toggle="modal" data-target="#payment-modal" type="button" style="margin-right:3px;width:128px;">Ask Question</button> <button style="margin-left:3px;width:128px;" class="btn btn-gab btn-lg gab-button-teacher-profile" data-user="'+targetuser+'" data-friendname="'+data.name+'" data-friendphoto="XXX" data-usertype="teacher" data-dismiss="modal" type="button" data-toggle="modal" data-target="#book-lesson-modal">Reserve Class</button> </div>';
                        }
                    }
                    else
                    {

                        if(data.friendstatus == "" && $('#usertypeGlobal').val() == "student" && fakeuser == 0)
                        {
                            userinfoFooter += '<div class="action-buttons-wrap"><button id="gab-button-teacher-profile" class="btn btn-primary btn-lg msgitem msgitem-read gab-button-teacher-profile" data-friend="'+data.id+'" data-friendname="'+data.name+'" data-friendphoto="'+data.photothumb+'" data-usertype="teacher" data-dismiss="modal" type="button" style="margin-right:4px;width:128px;">Ask Question</button><button style="margin-left:3px;width:128px;" class="btn btn-gab btn-lg gab-button-teacher-profile" data-user="'+targetuser+'" data-friendname="'+data.name+'" data-friendphoto="XXX" data-usertype="teacher" data-dismiss="modal" type="button" data-toggle="modal" data-target="#book-lesson-modal">Reserve Class</button></div>';

                        } else if(data.friendstatus == "" && $('#usertypeGlobal').val() == "student" && fakeuser > 0)
                        {
                            userinfoFooter += '<div class="action-buttons-wrap"><button id="gab-button-teacher-profile" class="btn btn-primary btn-lg gab-button-teacher-profile" data-dismiss="modal" data-toggle="modal" data-target="#register-now-modal" type="button" style="margin-right:3px;width:128px;">Ask Question</button><button style="margin-left:3px;width:128px;" class="btn btn-gab btn-lg gab-button-teacher-profile" data-user="'+targetuser+'" data-friendname="'+data.name+'" data-friendphoto="XXX" data-usertype="teacher" data-dismiss="modal" type="button" data-toggle="modal" data-target="#register-now-modal">Reserve Class</button></div>';
                        }
                        else if(data.friendstatus == "1" && $('#usertypeGlobal').val() == "student" && fakeuser == 0)
                        {
                            userinfoFooter += '<div class="action-buttons-wrap"><button id="gab-button-teacher-profile" class="btn btn-primary btn-lg msgitem msgitem-read gab-button-teacher-profile" data-friend="'+data.id+'" data-friendname="'+data.name+'" data-friendphoto="'+data.photothumb+'" data-usertype="teacher" data-dismiss="modal" type="button" style="margin-right:3px;width:128px;">Ask Question</button><button style="margin-left:3px;width:128px;" class="btn btn-gab btn-lg gab-button-teacher-profile" data-user="'+targetuser+'" data-friendname="'+data.name+'" data-friendphoto="XXX" data-usertype="teacher" data-dismiss="modal" type="button" data-toggle="modal" data-target="#book-lesson-modal">Reserve Class</button></div>';
                        }
                        //CHANGED END
                    }

                }
                else
                {

                    if(data.friendstatus == "" && $('#usertypeGlobal').val() == "student" && fakeuser == 0)
                        //CHANGED START
                    {
                        userinfoFooter += '<div class="action-buttons-wrap"><button style="margin:4px;" data-dismiss="modal" class="btn btn-default btn-lg addTeacherButton gab-button-teacher-profile" type="button" data-teacher="'+data.id+'" data-teachername="'+data.name+'"  data-teacherphoto="'+data.photothumb+'">Add to favorites</button><button style="margin:4px;" class="btn btn-gab btn-lg gab-button-teacher-profile" data-user="'+targetuser+'" data-friendname="'+data.name+'" data-friendphoto="XXX" data-usertype="teacher" data-dismiss="modal" type="button" data-toggle="modal" data-target="#book-lesson-modal">Reserve Class</button></div>';
                    } else if(data.friendstatus == "" && $('#usertypeGlobal').val() == "student" && fakeuser > 0)
                    {
                        userinfoFooter += '<div class="action-buttons-wrap"><button style="margin:4px;" data-dismiss="modal" class="btn btn-default btn-lg gab-button-teacher-profile" data-dismiss="modal" data-toggle="modal" data-target="#register-now-modal" type="button" data-teacher="'+data.id+'" data-teachername="'+data.name+'"  data-teacherphoto="'+data.photothumb+'">Add to favorites</button><button style="margin:4px;" class="btn btn-gab btn-lg gab-button-teacher-profile" data-user="'+targetuser+'" data-friendname="'+data.name+'" data-friendphoto="XXX" data-usertype="teacher" data-dismiss="modal" type="button" data-toggle="modal" data-target="#register-now-modal">Reserve Class</button></div>';
                    }
                    else if(data.friendstatus == "1" && $('#usertypeGlobal').val() == "student" && fakeuser == 0)
                    {
                        userinfoFooter += '<div class="action-buttons-wrap"><button style="margin: 4px;" class="btn btn-primary btn-lg msgitem gab-button-teacher-profile" data-friend="'+data.id+'" data-friendname="'+data.name+'"  data-friendphoto="'+data.photothumb+'" data-usertype="teacher" data-dismiss="modal" type="button">Send Message</button><button style="margin:4px;" class="btn btn-gab btn-lg gab-button-teacher-profile" data-user="'+targetuser+'" data-friendname="'+data.name+'" data-friendphoto="XXX" data-usertype="teacher" data-dismiss="modal" type="button" data-toggle="modal" data-target="#book-lesson-modal">Reserve Class</button></div>';
                    }
                    //CHANGED END
                }
            }

            /*else
        console.log("None of teacher fav..");*/

            if(targetuser === $('#useridGlobal').val())
                userinfoFooter = '<div class="action-buttons-wrap"><a href="#create-quiz-modal" style="margin:4px;" type="submit" data-toggle="modal" data-target="#create-quiz-modal" class="btn btn-primary btn-lg">Create Quiz</a><a href="#create-topic-modal" style="margin:4px;" type="submit" data-toggle="modal" data-target="#create-topic-modal" class="btn btn-gab btn-lg">Create Exercise</a></div>';


            $('#action-buttons, #action-buttons-scroll, #action-buttons-mobile').html(userinfoFooter);



            getTeacherReviews(targetuser);


            addTeacherProfile();
            removeTeacherProfile();
            openMessageWindow();

            //$('#teacher-profile-modal .modal-body, #teacher-profile-modal .modal-footer').fadeTo(75, 1);




            return false;



        });
    }


    // ADD FRIEND
    var addFriendProfile = function(){

        //alert("add friend profile triggered");
        //return false;
        // $(document).one('click','.addFriendButtonProfile',function(e){
        $('.addFriendButtonProfile').unbind().click(function(e){
            e.preventDefault();

            var button = $(this);

            var user = $('#useridGlobal').val();
            var target = $(this).attr('data-friend');

            var  formData = "user="+user+"&target="+target;

            $.ajax({
                url : "/en/dashboard/ajax/addFriend.php",
                type: "POST",
                data : formData,
                success: function(data)
                {
                    var returned = data;
                    var myKey = /error/;
                    var myMatch = returned.search(myKey);
                    if(myMatch != -1)
                    {
                        //alert("Sorry.. Error while adding friend!");
                        //notify('alert-retrieve-error','danger','floating');
                        return false;
                    }
                    else
                    {
                        //button.text('Request sent').attr('disabled',true);
                        //alert("Successfully added as friend!");
                        console.log("Successfully added friend from addFriendProfile...");

                        button.hide();
                        if($('#user-profile-modal').css("display") == "block") {
                            button.parent().append('<span style="display:block;padding:7.5px 0;">Request sent!</span>');
                            $('#findfriendswrap #friendfav-'+target).replaceWith('Request sent!');
                        } else
                            button.parent().append('Request sent!');

                        $('#friendsfrom').val('0');
                        return false;
                    }
                }
            });
            return false;

        });

    }


    // REMOVE FRIEND
    var removeFriendProfile = function(){

        $('.removeFriendButton').unbind().click(function(e){
            e.preventDefault();

            var button = $(this);

            var user = $('#useridGlobal').val();
            var target = $(this).attr('data-friend');

            var  formData = "user="+user+"&target="+target;

            $.ajax({
                url : "/en/dashboard/ajax/removeFriend.php",
                type: "POST",
                data : formData,
                success: function(data)
                {
                    var returned = data;
                    var myKey = /error/;
                    var myMatch = returned.search(myKey);
                    if(myMatch != -1)
                    {
                        //alert("Sorry.. Error while adding friend!");
                        //notify('alert-retrieve-error','danger','floating');
                        return false;
                    }
                    else
                    {
                        // button.closest('li').remove();



                        var fakeuser = $('#fakeuser').val();

                        if(fakeuser > 0)
                            var statusbtn = '<button class="btn btn-primary btn-sm" data-friend="'+target+'">Add</button>';
                        else
                            var statusbtn = '<button id="friendfav-'+target+'" class="btn btn-primary btn-sm addFriendButton">Add</button>';


                        //button.closest('li').remove();

                        button.replaceWith(statusbtn);

                        addFriendProfile();


                        $('#user-profile-modal .modal-footer').remove();

                        var currentNavFriends = Number($('#profilenavfriends').text());
                        currentNavFriends = currentNavFriends - 1;
                        if(currentNavFriends < 0)
                            currentNavFriends = 0;
                        $('#profilenavfriends').text(currentNavFriends);

                        //if(currentNavFriends == 0)

                        $('#friendsfrom').val('0');
                        //getUserFriends();
                        getFriendRequestsHeader();

                        return false;
                    }
                }
            });

            //adjustFooter();

            return false;

        });

    }



    // ADD teacher
    var addTeacherProfile = function(){

        $('.addTeacherButton').unbind().click(function(e){
            e.preventDefault();

            var button = $(this);

            var user = $('#useridGlobal').val();
            var target = $(this).attr('data-teacher');
            var teacherName = $(this).attr('data-teachername');
            var teacherPhoto = $(this).attr('data-teacherphoto');

            //console.log("teacherName: " + teacherName);
            //console.log("teacherPhoto: " + teacherPhoto);


            var  formData = "user="+user+"&target="+target;

            $.ajax({
                url : "/en/dashboard/ajax/addTeacher.php",
                type: "POST",
                data : formData,
                success: function(data)
                {
                    var returned = data;
                    var myKey = /error/;
                    var myMatch = returned.search(myKey);
                    if(myMatch != -1)
                    {
                        //alert("Sorry.. Error while adding friend!");
                        //notify('alert-retrieve-error','danger','floating');
                        return false;
                    }
                    else
                    {
                        //button.text('Request sent').attr('disabled',true);
                        //alert("Successfully added as friend!");
                        //console.log("Successfully added friend...");
                        //CHANGED START
                        //button.hide();

                        $.getJSON('/en/dashboard/ajax/getTeacherInfo.php?user='+target, function(data) {

                            if ($('#teacher-profile-modal').is(':visible')) {
                                button.parent().prepend('<button style="margin: 4px;" class="btn btn-primary btn-lg msgitem gab-button-teacher-profile" data-friend="'+data.id+'" data-friendname="'+data.name+'"  data-friendphoto="'+data.photothumb+'" data-usertype="teacher" data-dismiss="modal" type="button">Send Message</button>');
                                button.hide();
                            } else {
                                if(data.bgteacher == "1") {
                                    button.parent().append('<button class="btn btn-default btn-sm removeTeacherButton" data-teacher="'+data.id+'">Unfollow</button>');
                                    button.hide();
                                } else {
                                    button.parent().append('<div class="teacher-added-text" style="margin-right:5px;"><div>Following</div><a style="display:block;font-variant:small-caps;" class="btn-link msgitem" data-friend="'+data.id+'" data-friendname="'+data.name+'"  data-friendphoto="'+data.photothumb+'" data-usertype="teacher" data-dismiss="modal" type="button">Send Msg</a></div>');
                                    button.hide();
                                }
                            }
                            //CHANGED END
                        });
                        //button.parent().append('<button class="btn btn-default btn-sm removeTeacherButton" data-teacher="'+target+'">Delete</button>');

                        if($('#teacher-profile-modal').css("display") == "block")
                            $('#findteacherswrap #teacherfav-'+target).replaceWith('<span style="margin-right:9px;">Favorite</span>');

                        openMessageWindow();
                        removeTeacherProfile();

                        var currentNavTeachers = Number($('#profilenavteachers').text());
                        //console.log("currentNavTeachers: " + currentNavTeachers);
                        currentNavTeachers = currentNavTeachers + 1;
                        //console.log("currentNavTeachers new: " + currentNavTeachers);
                        $('#profilenavteachers').text(currentNavTeachers);


                        $('#teachersfrom').val('0');
                        //getUserTeachers();
                        return false;
                    }
                }
            });
            return false;

        });

    }



    // REMOVE teacher
    var removeTeacherProfile = function(){

        $(document).on('click','.removeTeacherButton',function(e){
            e.preventDefault();

            var button = $(this);

            var user = $('#useridGlobal').val();
            var target = $(this).attr('data-teacher');

            var  formData = "user="+user+"&target="+target;

            $.ajax({
                url : "/en/dashboard/ajax/removeTeacher.php",
                type: "POST",
                data : formData,
                success: function(data)
                {
                    var returned = data;
                    var myKey = /error/;
                    var myMatch = returned.search(myKey);
                    if(myMatch != -1)
                    {
                        //alert("Sorry.. Error while adding friend!");
                        //notify('alert-retrieve-error','danger','floating');
                        return false;
                    }
                    else
                    {

                        var fakeuser = $('#fakeuser').val();

                        if(fakeuser > 0)
                            var statusbtn = '<button class="btn btn-primary btn-sm">Follow</button>';
                        else
                            var statusbtn = '<button id="teacherfav-'+target+'" class="btn btn-primary btn-sm addTeacherButton" data-teacher="'+target+'">Follow</button>';


                        //button.closest('li').remove();

                        button.replaceWith(statusbtn);

                        addTeacherProfile();

                        $('#user-profile-modal .modal-footer').remove();

                        var currentNavFriends = Number($('#profilenavteachers').text());
                        currentNavFriends = currentNavFriends - 1;
                        if(currentNavFriends < 0)
                            currentNavFriends = 0;
                        $('#profilenavteachers').text(currentNavFriends);

                        //if(currentNavFriends == 0)

                        $('#teachersfrom').val('0');
                        //getUserTeachers();
                        //getFriendRequestsHeader();



                        return false;
                    }
                }
            });
            return false;

        });

    }





    /*
GET STUDENT FRIENDS
*********************************************************************************************************/
    var getUserFriendsProfile = function(){

        //alert("inline");

        console.log("getUserFriendsProfile TRIGGERED...")

        //$('#friendswrap').prepend('<div class="spinner grey" style="margin: 94px auto;"></div>');

        var friends = '';
        var friendsfrom = $('#friendsfrom').val();

        if(friendsfrom == 0)
            $('#friendswrap').html('');


        if( $('#friendswrap li').length < 1 )
            $('#friendswrap').prepend('<div class="spinner grey" style="margin: 94px auto;"></div>');



        $.getJSON('/en/dashboard/ajax/getUserFriendsProfile.php?user='+$("#userDataId").val()+'&school='+$("#school_id").val()+'&from='+friendsfrom, function(data) {

            if(data !== "" && data !== null && data !== "null")
            {

                $('#friends-tab .empty-settings').addClass('hidden');

                var numfriend = 1;
                $.each(data, function(arrayID,friend) {


                    var location = '';
                    if( friend.city !== "" || friend.country !== "" )
                    {
                        if( friend.city !== "" )
                            location += friend.city + ', ';

                        if( friend.country !== "" )
                            location += friend.countryname;

                        //location = location + ' <span class="flag-icon flag-icon-'+friend.country+'"></span>';
                    }

                    var university = '';
                    if( friend.university !== "" )
                        university = ' | ' + friend.university;

                    university = '';

                    var college = '';
                    if( friend.college !== "" )
                        college = ' | ' + friend.college;

                    college = '';

                    var statusbtn = '';




                    if( friend.myfriendstatus == "0" || friend.myfriendstatus == "1" )
                    {
                        if( friend.myfriendstatus == "1" )
                            statusbtn = '<button class="btn btn-default btn-sm removeFriendButton" data-friend="'+friend.id+'">Delete</button>';
                        else if( friend.myfriendstatus == "0" )
                        {
                            if( friend.myfriendtarget == friend.id )
                                statusbtn = '<span data-friend="'+friend.id+'">Request sent</span>';
                            else {
                                statusbtn = '<button class="btn btn-primary btn-sm acceptFriendButton" data-friend="'+friend.id+'" data-friendname="'+friend.name+'"  data-friendphoto="'+friend.photothumb+'" style="margin-bottom:5px;"><span class="visible-sm visible-lg">Accept</span><span class="visible-xs visible-md"><i class="ion ion-inline ion-checkmark" style="margin-right:0;width:12px;"></i></span></button> <button class="btn btn-default btn-sm removeFriendButton" data-friend="'+friend.id+'" style="margin-bottom:5px;margin-left:5px;float:right;line-height: 12px;padding: 8px;"><i class="ion ion-inline ion-close-round" style="margin-right:0;width:12px;"></i></button>';
                            }
                        }
                    }
                    else
                    {


                        var fakeuser = $('#fakeuser').val();

                        if(fakeuser > 0)
                            statusbtn = '<button class="btn btn-primary btn-sm">Add</button>';
                        else
                            statusbtn = '<button id="friendfav-'+friend.id+'" class="btn btn-primary btn-sm addFriendButtonX addFriendButtonProfile" data-friend="'+friend.id+'">Add</button>';

                    }

                    if( friend.id == $("#useridGlobal").val() )
                        statusbtn = '';

                    if( $("#usertypeGlobal").val() == "teacher" )
                        statusbtn = '';


                    //<button id="friendfav-8111" class="btn btn-primary btn-sm addFriendButton" data-friend="8111"><i class="ion ion-inline ion-person-add" style="margin-right: 6px;"></i>Add</button>




                    friends += '<li class="item" data-friend="'+friend.id+'"><div class="product-img"><a href="https://www.bitgab.com/'+friend.slug+'" data-user="'+friend.id+'" style="border:0;"><img alt="'+friend.name+'" src="'+friend.photothumb+'" class="img-circle"></a></div><div class="product-info"><div class="col-xs-8 no-padding" style="overflow: hidden;text-overflow: ellipsis;"><span style="font-size:18px;color:#777;font-weight:600;margin-right:5px;"><a href="https://www.bitgab.com/'+friend.slug+'" data-user="'+friend.id+'" style="border:0;">'+friend.name+'</a></span><span style="display:inline-block;font-size:16px;color:#777;"><i style="font-size:16px;color:#ffb90f !important;" class="ion ion-android-star"></i> '+friend.score+'</span><span style="display:block;color:#657786;font-size:15px;">'+location+university+college+'</span></div><div style="text-align:right;margin-top:3px;" class="col-xs-4 no-padding">'+statusbtn+'</div></div></li>';

                    numfriend++;

                });

                $('#friendswrap div.spinner').remove();

                $('#friendswrap').append(friends);

                addFriendProfile();

                //var friendsfrom = $( "#friendswrap li.item:last" ).attr('data-friend');


                //if(numfriend > 20)
//      {
//        var loadmorefriends = '<button class="btn btn-default" type="submit" style="display:block;margin:10px auto;" id="loadmorefriends">Ver más</button>';
//        $('#friendswrap').append(loadmorefriends);
//      }
//      else

                $('#loadmorefriends').show();
                $('#loadmorefriendsspinner .spinner').addClass('hidden');

                if(numfriend <= 20)
                    $('#loadmorefriends').remove();
                else
                    $('#loadmorefriends').removeClass('hidden');

                //var searchfrom = $( "#findfriendswrap li.item:last" ).attr('data-friend');
                //$('#searchfrom').val(searchfrom);

                friendsfrom = Number(friendsfrom) + 20;
                $('#friendsfrom').val(friendsfrom);

                $('#loadmorefriends').one('click', function(){
                    //$(this).remove();
                    $('#loadmorefriends').hide();
                    $('#loadmorefriendsspinner .spinner').removeClass('hidden');
                    getUserFriendsProfile();
                });





                removeFriendProfile();
                acceptFriend();
                hideFriend();
                openMessageWindow();

                return false;

            }
            else
            {

                $('#friendswrap div.spinner').remove();
                $('#friendswrap #loadmorefriends').remove();


                //no friend
                // Check if any exist?
                var totalitem = $("#friendswrap li").length;
                //console.log("totalitem: " + totalitem);
                if(totalitem < 1)
                {
                    $('#friends-tab .empty-settings').removeClass('hidden');
                    return false;
                }
            }
        });



    }







    /*
GET STUDENT FRIENDS
*********************************************************************************************************/
    var getTeacherFriendsProfile = function(){


        //$('#friendswrap').prepend('<div class="spinner grey" style="margin: 94px auto;"></div>');

        var friends = '';
        var friendsfrom = $('#friendsfrom').val();

        if(friendsfrom == 0)
            $('#friendswrap').html('');


        if( $('#friendswrap li').length < 1 )
            $('#friendswrap').prepend('<div class="spinner grey" style="margin: 94px auto;"></div>');



        $.getJSON('/en/dashboard/ajax/getTeacherFriendsProfile.php?user='+$("#userDataId").val()+'&school='+$("#school_id").val()+'&from='+friendsfrom, function(data) {

            if(data !== "" && data !== null && data !== "null")
            {

                $('#friends-tab .empty-settings').addClass('hidden');

                var numfriend = 1;
                $.each(data, function(arrayID,friend) {


                    var location = '';
                    if( friend.city !== "" || friend.country !== "" )
                    {
                        if( friend.city !== "" )
                            location += friend.city + ', ';

                        if( friend.country !== "" )
                            location += friend.countryname;

                        //location = location + ' <span class="flag-icon flag-icon-'+friend.country+'"></span>';
                    }

                    var university = '';
                    if( friend.university !== "" )
                        university = ' | ' + friend.university;

                    university = '';

                    var college = '';
                    if( friend.college !== "" )
                        college = ' | ' + friend.college;

                    college = '';

                    var statusbtn = '';



                    if( friend.myfriendstatus == "0" || friend.myfriendstatus == "1" )
                    {
                        if( friend.myfriendstatus == "1" )
                            statusbtn = '<button class="btn btn-default btn-sm removeFriendButton" data-friend="'+friend.id+'">Delete</button>';
                        else if( friend.myfriendstatus == "0" )
                        {
                            if( friend.myfriendtarget == friend.id )
                                statusbtn = '<span data-friend="'+friend.id+'">Request sent</span>';
                            else {
                                statusbtn = '<button class="btn btn-primary btn-sm acceptFriendButton" data-friend="'+friend.id+'" data-friendname="'+friend.name+'"  data-friendphoto="'+friend.photothumb+'" style="margin-bottom:5px;"><span class="visible-sm visible-lg">Accept</span><span class="visible-xs visible-md"><i class="ion ion-inline ion-checkmark" style="margin-right:0;width:12px;"></i></span></button> <button class="btn btn-default btn-sm removeFriendButton" data-friend="'+friend.id+'" style="margin-bottom:5px;margin-left:5px;float:right;line-height: 12px;padding: 8px;"><i class="ion ion-inline ion-close-round" style="margin-right:0;width:12px;"></i></button>';
                            }
                        }
                    }
                    else
                    {

                        var fakeuser = $('#fakeuser').val();

                        if(fakeuser > 0)
                            statusbtn = '<button class="btn btn-primary btn-sm">Add</button>';
                        else
                            statusbtn = '<button id="friendfav-"'+friend.id+'" class="btn btn-primary btn-sm addFriendButton" data-friend="'+friend.id+'">Add</button>';
                    }

                    if( friend.id == $("#useridGlobal").val() )
                        statusbtn = '';


                    if($("#useridGlobal").val() == $("#userDataId").val())
                    {

                        statusbtn = '<button style="width:100px;" class="btn btn-primary btn-sm msgitem" data-friend="'+friend.id+'" data-friendname="'+friend.name+'"  data-friendphoto="'+friend.photothumb+'" data-usertype="student" data-dismiss="modal" type="button">Send Message</button>';

                    }
                    else{
                        if( $("#usertypeGlobal").val() == "teacher" )
                            statusbtn = '';
                    }




                    //<button id="friendfav-8111" class="btn btn-primary btn-sm addFriendButton" data-friend="8111"><i class="ion ion-inline ion-person-add" style="margin-right: 6px;"></i>Add</button>




                    friends += '<li class="item" data-friend="'+friend.id+'"><div class="product-img"><a href="https://www.bitgab.com/'+friend.slug+'" data-user="'+friend.id+'" style="border:0;"><img alt="'+friend.name+'" src="'+friend.photothumb+'" class="img-circle"></a></div><div class="product-info"><div class="col-xs-8 no-padding" style="overflow: hidden;text-overflow: ellipsis;"><span style="font-size:18px;color:#777;font-weight:600;margin-right:5px;"><a href="https://www.bitgab.com/'+friend.slug+'" data-user="'+friend.id+'"style="border:0;">'+friend.name+'</a></span><span style="display:inline-block;font-size:16px;color:#777;"><i style="font-size:16px;color:#ffb90f !important;" class="ion ion-android-star"></i> '+friend.score+'</span><span style="display:block;color:#657786;font-size:15px;">'+location+university+college+'</span></div><div style="text-align:right;margin-top:3px;" class="col-xs-4 no-padding">'+statusbtn+'</div></div></li>';

                    numfriend++;

                });

                $('#friendswrap div.spinner').remove();

                $('#friendswrap').append(friends);



                //var friendsfrom = $( "#friendswrap li.item:last" ).attr('data-friend');


                //if(numfriend > 20)
//      {
//        var loadmorefriends = '<button class="btn btn-default" type="submit" style="display:block;margin:10px auto;" id="loadmorefriends">Ver más</button>';
//        $('#friendswrap').append(loadmorefriends);
//      }
//      else

                $('#loadmorefriends').show();
                $('#loadmorefriendsspinner .spinner').addClass('hidden');

                if(numfriend <= 20)
                    $('#loadmorefriends').remove();
                else
                    $('#loadmorefriends').removeClass('hidden');

                //var searchfrom = $( "#findfriendswrap li.item:last" ).attr('data-friend');
                //$('#searchfrom').val(searchfrom);

                friendsfrom = Number(friendsfrom) + 20;
                $('#friendsfrom').val(friendsfrom);

                $('#loadmorefriends').one('click', function(){
                    //$(this).remove();
                    $('#loadmorefriends').hide();
                    $('#loadmorefriendsspinner .spinner').removeClass('hidden');
                    getTeacherFriendsProfile();
                });




                addFriendProfile();
                removeFriendProfile();
                acceptFriend();
                hideFriend();
                openMessageWindow();

                return false;

            }
            else
            {

                $('#friendswrap div.spinner').remove();
                $('#friendswrap #loadmorefriends').remove();

                //no friend
                // Check if any exist?
                var totalitem = $("#friendswrap li").length;
                //console.log("totalitem: " + totalitem);
                if(totalitem < 1)
                {
                    $('#friends-tab .empty-settings').removeClass('hidden');
                    return false;
                }
            }
        });



    }




    /*
GET GROUPS
*********************************************************************************************************/
    var getUserGroups = function(){


        var groups = '';
        var groupsfrom = $('#groupsfrom').val();

        if(groupsfrom == 0)
            $('#groupsfrom').html('');


        if( $('#friendswrap li').length < 1 )
            $('#friendswrap').prepend('<div class="spinner grey" style="margin: 94px auto;"></div>');



        $.getJSON('/en/dashboard/ajax/getUserGroups.php?user='+$("#userDataId").val()+'&school='+$("#school_id").val()+'&from='+friendsfrom, function(data) {

            if(data !== "" && data !== null && data !== "null")
            {

                $('#friends-tab .empty-settings').addClass('hidden');

                var numgroup = 1;
                $.each(data, function(arrayID,group) {


                    var groupCover = '<div class="groupImgPlaceholder"></div>';
                    if(group.coverthumb !== "")
                    {
                        groupCover = '<div class="groupImgPlaceholder"><img alt="'+group.title+'" src="'+group.coverthumb+'" style="width: 100px;border-radius: 3px;"></div>';
                    }

                    groups += '<li class="item" data-group="'+group.id+'"><div class="product-img"><a href="https://www.bitgab.com/group/'+group.slug+'" data-group="'+group.id+'" style="border:0;">'+groupCover+'</a></div><div class="product-info" style="margin-left: 110px;"><div class="col-xs-12 no-padding" style="overflow: hidden;text-overflow: ellipsis;"><span style="font-size:16px;color:#777;font-weight:600;margin-right:5px;"><a href="https://www.bitgab.com/group/'+group.slug+'" data-group="'+group.id+'"style="border:0;">'+group.title+'</a></span><span style="display:block;color:#657786;font-size:13px; text-transform:capitalize;">'+group.role+'</span></div></div></li>';

                    numgroup++;

                });

                $('#friendswrap div.spinner').remove();

                $('#friendswrap').append(groups);

                $('#loadmorefriends').show();
                $('#loadmorefriendsspinner .spinner').addClass('hidden');

                if(numgroup <= 20)
                    $('#loadmorefriends').remove();
                else
                    $('#loadmorefriends').removeClass('hidden');

                //var searchfrom = $( "#findfriendswrap li.item:last" ).attr('data-friend');
                //$('#searchfrom').val(searchfrom);

                groupsfrom = Number(groupsfrom) + 20;
                $('#groupsfrom').val(groupsfrom);

                $('#loadmorefriends').one('click', function(){
                    //$(this).remove();
                    $('#loadmorefriends').hide();
                    $('#loadmorefriendsspinner .spinner').removeClass('hidden');
                    getUserGroups();
                });

                return false;

            }
            else
            {

                $('#friendswrap div.spinner').remove();
                $('#friendswrap #loadmorefriends').remove();

                //no friend
                // Check if any exist?
                var totalitem = $("#friendswrap li").length;
                //console.log("totalitem: " + totalitem);
                if(totalitem < 1)
                {
                    $('#friends-tab .empty-settings').removeClass('hidden');
                    return false;
                }
            }
        });



    }








    /* GET TEACHERS *******************************************************************************/

    var getUserTeachersProfile = function(){


        var teachers = '';
        var teachersfrom = $('#teachersfrom').val();

        if(teachersfrom == 0)
            $('#teacherswrap').html('');


        if( $('#teacherswrap li').length < 1 )
            $('#teacherswrap').prepend('<div class="spinner grey" style="margin: 94px auto;"></div>');


        $.getJSON('/en/dashboard/ajax/getUserTeachersProfile.php?user='+$('#userDataId').val()+'&school='+$("#school_id").val()+'&from='+teachersfrom, function(data) {

            if(data !== "" && data !== null && data !== "null")
            {

                $('#teachers-tab .empty-settings').addClass('hidden');

                var numteacher = 1;
                $.each(data, function(arrayID,teacher) {


                    var location = '';

                    if( (teacher.city !== "" || teacher.country !== "") )
                    {
                        if( teacher.city !== "" )
                            location += teacher.city + ', ';

                        if( teacher.country !== "" )
                            location += teacher.countryname;

                        //location = location + ' <span class="flag-icon flag-icon-'+teacher.country+'"></span>';
                    }

                    var university = '';
                    if( teacher.university !== "" )
                        university = ' | ' + teacher.university;

                    university = '';

                    var college = '';
                    if( teacher.college !== "" )
                        college = ' | ' + teacher.college;

                    college = '';

                    var statusbtn = '';


                    if( teacher.myteacherstatus == "1" )
                    {
                        var fakeuser = $('#fakeuser').val();

                        if(fakeuser > 0)
                            statusbtn = '<button class="btn btn-default btn-sm">Unfollow</button>';
                        else
                            statusbtn = '<button class="btn btn-default btn-sm removeTeacherButton" data-teacher="'+teacher.id+'">Unfollow</button>';
                    }
                    else
                    {
                        var fakeuser = $('#fakeuser').val();

                        if(fakeuser > 0)
                            statusbtn = '<button class="btn btn-primary btn-sm">Follow</button>';
                        else
                            statusbtn = '<button id="teacherfav-'+teacher.id+'" class="btn btn-primary btn-sm addTeacherButton" data-teacher="'+teacher.id+'">Follow</button>';

                    }

                    if( $("#usertypeGlobal").val() == "teacher" )
                        statusbtn = '';


                    teachers += '<li class="item" data-friend="'+teacher.id+'"><div class="product-img"><a href="https://www.bitgab.com/'+teacher.slug+'" data-user="'+teacher.id+'" style="border:0"><img alt="'+teacher.name+'" src="'+teacher.photothumb+'" class="img-circle"></a></div><div class="product-info"><div class="col-xs-8 col-sm-9 no-padding" style="overflow:hidden;text-overflow:ellipsis"><div style="font-size:18px;color:#777;font-weight:600;margin-right:5px;display:inline-block;vertical-align:middle;"><a href="https://www.bitgab.com/'+teacher.slug+'" data-user="'+teacher.id+'" data-toggle="modal" style="border:0;white-space:nowrap">'+teacher.name+'</a></div> <div style="display:inline-block;font-size:16px;color:#777;vertical-align:middle"><input class="star-rating" id="star-rating-'+numteacher+'" type="number" class="rating form-control hide" data-size="xs" data-show-caption="false" data-show-clear="false" data-disabled="true" value="'+teacher.rating+'"></div> <div style="display:block;color:#657786;font-size:15px">'+location+university+college+'</div></div><div style="text-align:right;margin-top:3px" class="col-xs-4 col-sm-3 no-padding">'+statusbtn+'</div></div>';

                    numteacher++;

                });

                $('#teacherswrap div.spinner').remove();

                $('#teacherswrap').append(teachers);

                $('#teacherswrap input.star-rating').each(function(index, element) {
                    $(this).rating();
                });


                $('#loadmoreteachers').show();
                $('#loadmoreteachersspinner .spinner').addClass('hidden');

                if(numteacher <= 20)
                    $('#loadmoreteachers').addClass('hidden');
                else
                    $('#loadmoreteachers').removeClass('hidden');

                //var searchfrom = $( "#findfriendswrap li.item:last" ).attr('data-friend');
                //$('#searchfrom').val(searchfrom);


                teachersfrom = Number(teachersfrom) + 20;
                $('#teachersfrom').val(teachersfrom);


                //$('#teacherswrap #loadmoreteachers').on('click', function(){
                $('#loadmoreteachers').one('click', function(){
                    //$(this).remove();
                    $('#loadmoreteachers').hide();
                    $('#loadmoreteachersspinner .spinner').removeClass('hidden');
                    getUserTeachersProfile();
                });


                addTeacherProfile();
                removeTeacherProfile();

                return false;

            }
            else
            {

                $('#teacherswrap div.spinner').remove();
                $('#loadmoreteachers').addClass('hidden');

                // Check if any exist?
                var totalitem = $("#teacherswrap li").length;
                //console.log("totalitem: " + totalitem);
                if(totalitem < 1)
                {
                    $('#teachers-tab .empty-settings').removeClass('hidden');
                    return false;
                }
            }
        });



    }





    /*
  GET QUIZ TIMELINE
  *********************************************************************************************************/

    var showNoResult = true;

    var getQuizzes = function(course){

        //$('#friendswrap').prepend('<div class="spinner grey" style="margin: 94px auto;"></div>');

        //console.log("GET QUIZZES CALLED...");


        var quizs = '';
        var quizfrom = $('#quizfrom').val();
        var quizlimit = Number($('#quizlimit').val());
        var userType = $('#usertypeGlobal').val();
        var teacherLang = $('#teacherLang').val();

        if(userType == "teacher")
        {
            if(teacherLang == '6')
                course = "4";
            else
                course = "1";
        }


        //if(quizfrom == 0)
        //$('#quizzeswrap').html('');


        if( $('#quizzeswrap li').length < 1 )
            $('#quizzeswrap').append('<div class="spinner grey" style="margin: 94px auto;"></div>');
        else
            $('#quizzeswrap').append('<div class="spinner grey" style="margin: 20px auto;"></div>');

        //console.log("here yo");
        scrolledCheckQuizzes = true;


        $.getJSON('/en/dashboard/ajax/getQuizzesProfile.php?course='+course+'&owner='+$('#userDataId').val()+'&from='+quizfrom+'&hidecompleted='+$("#hidecompleted").val(), function(data) {

            if(data !== "" && data !== null && data !== "null" && data.length > 0)
            {

                $('#quizzeswrap .empty-settings').addClass('hidden');

                showNoResult = false;

                var numquiz = 1;
                $.each(data, function(arrayID,quiz) {


                    var quizId = quiz.id;

                    var quizmedia = '';
                    if( quiz.video !== "" || quiz.photo !== "" )
                    {
                        if( quiz.video !== "" )
                        {
                            //quizmedia = '<div id="playerWrap" class="playerwrap"><div id="player-'+quiz.id+'"></div></div>';
                            quizmedia = '<div class="youtube-container"><div class="youtube-player" id="player-'+quiz.id+'" data-id="'+quiz.video+'"></div></div>';
                        }
                        else if( quiz.photo !== "" )
                        {
                            quizmedia = '<div class=postImageWrapper><div itemprop=image itemscope itemtype=https://schema.org/ImageObject><img class=img-responsive src="'+quiz.photo+'" onerror="topicImageError(this)" onload="topicImageLoaded(this)"><meta content="'+quiz.photo+'" itemprop=url><meta content=800 itemprop=width><meta content=800 itemprop=height></div></div>';
                        }

                        //location = location + ' <span class="flag-icon flag-icon-'+quiz.country+'"></span>';
                    }



                    var answers = quiz.answers;
                    var quizanswers = '';
                    $.each(answers, function(arrayID2,answer) {

                        //console.log("Answers: " + arrayID2+" ~ " + answer);

                        quizanswers += '<div class="radio"><label><input type="radio" name="answer'+quizId+'" value="'+arrayID2+'" data-quiz="'+quizId+'">'+answer+'</label></div>';


                    });


                    var quizSubmitted = quiz.quizSubmitted;
                    var hideSubmitted = '';
                    if(quizSubmitted > 0)
                    {
                        quizanswers = JSON.parse(quiz.quizSubmittedHtml);
                        hideSubmitted = 'hidden';
                    }


                    var quizScored = quiz.quizScored;
                    var hideScored = '';
                    if(quizScored > 0)
                        hideScored = 'hidden';


                    if(quiz.score > 0)
                        var quizscore = '+' + quiz.score;
                    else
                        var quizscore = quiz.score;


                    if(quiz.hashtags2 !== null && quiz.hashtags2 !== "")
                        var hashtags2 = quiz.hashtags2;
                    else
                        var hashtags2 = '';


                    // Share Buttons
                    var sharequizquestion = quiz.question;
                    sharequizquestion = sharequizquestion.replace(/\-\-+/g,'__________');
                    sharequizquestion = sharequizquestion.replace(/\_\_+/g,'__________');
                    sharequizquestion = sharequizquestion.replace(/\.\.+/g,'__________');

                    var shareTitle = sharequizquestion;

                    //if(quiz.hashtags !== "")
                    //shareTitle += quiz.hashtags;

                    var itemurl = 'https://www.bitgab.com/quiz/' + quiz.slug;
                    var shareUrlFacebook = "https://www.facebook.com/dialog/feed?app_id=247805475565266&display=popup&link="+itemurl+"&redirect_uri=https://facebook.com&picture="+quiz.photo+"&name="+encodeURIComponent(shareTitle);


                    var shareTitleTwitter = sharequizquestion+hashtags2;
                    var shareUrlTwitter = '//twitter.com/share?url='+itemurl+'&amp;text='+encodeURIComponent(shareTitleTwitter);


                    var deletequiz = '';
                    if(quiz.userid === $('#useridGlobal').val() && $('#useridGlobal').val() > 1)
                    {
                        deletequiz = '<li class=divider><li><a href="#" data-toggle=modal class="repostquiz" data-quiz="'+quiz.id+'" style=text-decoration:none!important>Repost this quiz</a></li><li><a href=#delete-quiz-modal data-toggle=modal class="deletequiz" data-quiz="'+quiz.id+'" data-target=#delete-quiz-modal style=text-decoration:none!important>Delete this quiz</a></li>';
                    }


                    var quizquestion = quiz.question;
                    quizquestion = quizquestion.replace(/\-\-+/g,'<span style="border-bottom: 1px solid #999; padding-left: 100px;position: relative;top: -4px;margin: 0 2px;">&nbsp;</span>');

                    quizquestion = quizquestion.replace(/\_\_+/g,'<span style="border-bottom: 1px solid #999; padding-left: 100px;position: relative;top: -4px;margin: 0 2px;">&nbsp;</span>');

                    quizquestion = quizquestion.replace(/\.\.+/g,'<span style="border-bottom: 1px solid #999; padding-left: 100px;position: relative;top: -4px;margin: 0 2px;">&nbsp;</span>');


                    if(quiz.usertype == "student")
                        quiz.usertype = 'user';


                    //console.log("quizlimit: " + quizlimit);


//          if( quizlimit % 3 == 0 )
//            var quizlimitclass=" separator notopic";
//          else
//            var
//            quizlimitclass = "";


                    var hide_completed = '';
                    if(quizSubmitted > 0 && $("#hidecompleted").val() == "1")
                    {
                        hide_completed = 'hidden';
                    }



                    //var shareongroups = '';

                    //if( Number($("#mytotalgroups").val()) > 0 )
                    //{

                    var shareongroups = '<li><a class="shareongroupsquiz" data-quiz="'+quiz.id+'" data-quizurl="https://www.bitgab.com/quiz/'+quiz.slug+'" data-quiztitle="'+quiz.question+'">Share on a Group</a></li>';
                    //}


                    quizs += '<div class="box mar-btm quiz-box '+hide_completed+'" id="quiz-box-'+quiz.id+'"><div class=media-left><a href=#'+quiz.usertype+'-profile-modal class=media-heading data-toggle=modal data-user="'+quiz.userid+'"><img class="img-circle img-sm"src="'+quiz.userphoto+'" alt=""></a></div><div class="media-body pad-hor"><div class=speech><div class=quiz-creator-info><a href=#'+quiz.usertype+'-profile-modal class=media-heading data-toggle=modal data-user="'+quiz.userid+'">'+quiz.username+'</a> <span class=middle-dot>•</span> <small class=speech-time>'+quiz.date+' <!--<span class=middle-dot>•</span> <a href="/en/quiz/user/'+quiz.userslug+'">View all quizzes by '+quiz.username+'</a>--></small></div><div class="btn-group pull-right"role=group><a class="dropdown-toggle quiz-chevron"data-toggle=dropdown aria-expanded=false aria-haspopup=true><i class="ion ion-chevron-down"></i></a><ul class="dropdown-menu focus-menu"style="text-align:left;min-width:150px;padding:9px 0"><li id="repost-spinner" class="hidden" style="position: absolute;width: 100%;background: #fff;"><div class="spinner grey" style="margin: 105px auto;"></div>'+shareongroups+'<li class=""><a href="'+shareUrlFacebook+'" target="_blank">Share on Facebook</a></li><li class=""><a href="'+shareUrlTwitter+'" target="_blank">Share on Twitter</a></li><li><a class="copyquiz" data-quizurl="https://www.bitgab.com/quiz/'+quiz.slug+'">Share Quiz Link</a>'+deletequiz+'</li></ul></div><p>'+quizquestion+' '+quiz.hashtags+''+quizmedia+'<form class="form-self-enabler quizform" id="quizform-'+quiz.id+'"><div class=quiz-options>'+quizanswers+'</div><div class=quiz-bottom><span class="quiz-submit-text quiz-value"style="float:right;margin:0 5px">'+quizscore+'</span> <button class="btn btn-primary quiz-submit '+hideSubmitted+'"id="quizform-'+quiz.id+'" disabled data-quiz="'+quiz.id+'">Submit</button> <span class="quiz-submit-text totalquizentry">'+quiz.totalQuizSubmission+' <span class=hidden-460>answers</span></span> <span class="quiz-like-buttons '+hideScored+'"><a class=quiz-like data-like=1 data-like="1" data-quiz="'+quiz.id+'" id="quizform-'+quiz.id+'"><i class=ion-thumbsup></i></a><a class=quiz-dislike data-like=-1 data-quiz="'+quiz.id+'" id="quizform-'+quiz.id+'"><i class="ion ion-thumbsdown"></i></a></span></div><input name=quiz type=hidden value="'+quiz.id+'" id=quiz> <input name=totalquizentry type=hidden value="'+quiz.totalQuizSubmission+'" id="totalquizentry-'+quiz.id+'"> <input name=quizvalue type=hidden value="'+quiz.score+'" id=quizvalue></form></div></div></div>';


                    numquiz++;
                    quizlimit = Number(quizlimit) + 1;
                    $("#quizlimit").val(quizlimit);
                    //console.log("quizlimit: "+$('#quizlimit').val());

                });


                $('#quizzeswrap div.spinner').remove();

                $('#completed-hider').removeClass('hidden');
                $('#quizzeswrap').append(quizs);


                var current_quizfrom = $("#quizfrom").val();
                var new_quizfrom = Number(current_quizfrom) + 9;
                $('#quizfrom').val(new_quizfrom);


                // Call GetTopics
                /*
        if(withtopics == "1")
          getTopics(course,$("#useridGlobal").val());
        */





                // Handle Submit Buttons
                $('input[type=radio]').change(function() {

                    var quizId = $(this).data("quiz");
                    //alert(quizId);
                    $('#quizform-'+quizId+' .quiz-submit').attr("disabled",false);
                    return false;

                });



                /*
        if(numquiz <= 5)
          $('#loadmorequiz').remove();
        else
          $('#loadmorequiz').removeClass('hidden');
        */
                //var searchfrom = $( "#findquizzeswrap li.item:last" ).attr('data-quiz');
                //$('#searchfrom').val(searchfrom);



//        $('#loadmorequiz').on('click', function(){
//          //$(this).remove();
//          var course = $('#course').val();
//
//          if( $("#sectionfilter").val() == "" && $("#userDataType").val() == "teacher" )
//            getQuizzes(course,0);
//          else if( $("#sectionfilter").val() == "quizzes" || ($("#sectionfilter").val() == "" && $("#userDataType").val() == "student") )
//            getQuizzes(course,0);
//        });



                // Handle Favorites
                $('#completed-check').unbind().click(function(e){
                    var hidecompleted = '0';
                    if( $('#completed-check input:checkbox:checked').length > 0 ){
                        hidecompleted = '1';
                    }

                    //console.log("resetted yoooo");

                    $("#hidecompleted").val(hidecompleted);
                    $("#quizzeswrap").addClass("noJump");
                    $("#quizzeswrap").html('');
                    $('#quizfrom').val('0');
                    getQuizzes(course);
                });



                // Handle Videos
                var v = document.getElementsByClassName("youtube-player");
                for (var n = 0; n < v.length; n++) {
                    var p = document.createElement("div");
                    p.innerHTML = labnolThumb(v[n].dataset.id);
                    p.onclick = labnolIframe;
                    v[n].appendChild(p);
                }







                //quiz-submit

                $('.quiz-submit').unbind().click(function(e){

                    e.preventDefault();


                    var quizId = $(this).data("quiz");

                    //console.log("quizId: " + quizId);


                    $('#errormsg').remove();


                    var names = {};
                    $('#quizform-'+quizId+' :radio').each(function() {
                        names[$(this).attr('name')] = true;
                    });
                    var count = 0;
                    $.each(names, function() {
                        count++;
                    });
                    if ($('#quizform-'+quizId+' :radio:checked').length === count) {
                        //alert("all answered");
                    }
                    else
                    {
                        //alert("all NOT answered");
                        $('#errormsg').remove();
                        $(this).after('<p class="text-danger" id="errormsg">Please answer all the questions!</p>');
                        return false;

                    }

                    //$('.savebutton').attr('disabled',true);
                    $(this).attr('disabled',true);

                    submitQuiz(quizId);
                    return false;
                });

















                $('.quiz-like-buttons a').unbind().click(function(e){

                    e.preventDefault();

                    var quizId = $(this).data("quiz");
                    var liketype = $(this).data("like");

                    //console.log("quizId: " + quizId);


                    var formData = 'quiz='+quizId+'&like='+liketype;
                    //console.log(formData);

                    $.ajax({
                        url : "https://www.bitgab.com/en/dashboard/ajax/valuateQuiz.php",
                        type: "POST",
                        data : formData,
                        success: function(data)
                        {
                            var returned = data;

                            //console.log(returned);
                            //return false;

                            var myKey = /error/;
                            var myMatch = returned.search(myKey);
                            if(myMatch != -1)
                            {
                                //notify('alert-save-error','danger','floating');
                                return false;
                            }
                            else
                            {

                                $('#quizform-'+quizId+' .quiz-like-buttons').hide();

                                //var quizvalue = $('#quizform-'+quizId+' .quiz-value').text();
                                //quizvalue = Number(quizvalue) + Number(returned);
                                $('#quizform-'+quizId+' .quiz-bottom .quiz-value').text(returned);

                                return false;
                            }
                        }
                    });


                    return false;
                });





                $('.copyquiz').unbind().click(function(e){
                    e.preventDefault();
                    var quizUrl = $(this).data("quizurl");
                    $('#quizcopyurl').val(quizUrl);
                    $('#quizcopyurl').click();
                    $('#copy-quiz-modal').modal('show');
                    return false;
                });

                if($(window).width() > 991) {
                    $('#copy-quiz-modal').on('shown.bs.modal', function() {
                        $("#quizcopyurl").focus().select();
                        $('#copy-quiz-modal .copy-quiz-msg').addClass("hidden");
                        $("#copy-quiz-modal .copy-quiz-btn").removeClass("hidden");
                    });
                } else {
                    $('#copy-quiz-modal').on('shown.bs.modal', function() {
                        $('#copy-quiz-modal .copy-quiz-msg').addClass("hidden");
                        $("#copy-quiz-modal .copy-quiz-btn").removeClass("hidden");
                    });
                }




                $('.deletequiz').unbind().click(function(){
                    var quizId = $(this).data("quiz");
                    $('#deletequizvalue').val(quizId);
                });


                $('.deletequizbutton').unbind().click(function(){
                    var deleteQuizId = $('#deletequizvalue').val();
                    deleteQuiz(deleteQuizId);
                });


                //deletequizbutton


                $('.repostquiz').unbind().click(function(e){

                    e.preventDefault();
                    $('li#repost-spinner').removeClass('hidden');

                    var quizId = $(this).data("quiz");
                    //console.log("quizId: " + quizId);

                    var formData = 'id='+quizId;
                    //console.log(formData);

                    $.ajax({
                        url : "https://www.bitgab.com/en/dashboard/ajax/repostQuiz.php",
                        type: "POST",
                        data : formData,
                        success: function(data)
                        {
                            var returned = data;

                            //console.log(returned);
                            //return false;

                            var myKey = /error/;
                            var myMatch = returned.search(myKey);
                            if(myMatch != -1)
                            {
                                //notify('alert-save-error','danger','floating');
                                return false;
                            }
                            else
                            {
                                location.reload();
                                return false;
                            }
                        }
                    });


                    return false;
                });






                $('.shareongroupsquiz').unbind().click(function(e){
                    e.preventDefault();
                    var quizId = $(this).data("quiz");
                    var quizTitle = $(this).data("quiztitle");

                    var quizTitle = quizTitle;
                    quizTitle = quizTitle.replace(/\-\-+/g,'<span style="border-bottom: 1px solid #999; padding-left: 100px;position: relative;top: -4px;margin: 0 2px;">&nbsp;</span>');

                    quizTitle = quizTitle.replace(/\_\_+/g,'<span style="border-bottom: 1px solid #999; padding-left: 100px;position: relative;top: -4px;margin: 0 2px;">&nbsp;</span>');

                    quizTitle = quizTitle.replace(/\.\.+/g,'<span style="border-bottom: 1px solid #999; padding-left: 100px;position: relative;top: -4px;margin: 0 2px;">&nbsp;</span>');

                    var quizUrl = $(this).data("quizurl");
                    $('#shareongroups_quizid').val(quizId);

                    //$('#shareongroupsquiz-modal .shared-topic-info').html('<a href="'+quizUrl+'" target="_bank">'+quizTitle+'</a>');

                    $(this).closest('.btn-group').removeClass('open');

                    $('#shareongroupsquiz-modal').modal('show');
                    return false;
                });


                $('#shareongroupsquiz-modal').on('shown.bs.modal', function() {

                    // Get my groups
                    $.ajax({
                        url : "/en/dashboard/ajax/getMyGroups.php",
                        type: "POST",
                        data : "user="+$('#useridGlobal').val() + "&quiz=" +  $('#shareongroups_quizid').val(),
                        success: function(data)
                        {
                            if(data !== "data")
                            {
                                if(data.trim() == "noresult") {
                                    $("#mygrouplistquiz").html('<div class="group-list no-groups">You have to be an owner or an admin in a group to share this</div>');
                                } else{
                                    $("#shareongroupsquiz-modal label.menu-item-header").removeClass("hidden");
                                    $("#mygrouplistquiz").html('<div class="group-list">'+data+'</div>');
                                }

                                $('#mygrouplistquiz .checkbox label').on('click',function(){
                                    if($('#mygrouplistquiz .checkbox label input[type="checkbox"]:checked').length > 0)
                                        $('#shareongroupsQuizButton').prop("disabled", false);
                                    else
                                        $('#shareongroupsQuizButton').prop("disabled", true);
                                });

                                // Share on groups
                                $("#shareongroupsQuizButton").unbind().click(function(e){
                                    e.preventDefault();

                                    var chkArray = [];
                                    $("#shareongroupsquiz-modal input:checked").each(function() {
                                        chkArray.push($(this).val());
                                    });
                                    var selected;
                                    selected = chkArray.join(',');

                                    var dataUrl = "user="+$('#useridGlobal').val() + "&groups=" + selected + "&quiz=" + $('#shareongroups_quizid').val();

                                    $.ajax({
                                        url : "/en/dashboard/ajax/shareQuizOnGroups.php",
                                        type: "POST",
                                        data : dataUrl,
                                        success: function(data)
                                        {
                                            var returned = data;
                                            var myKey = /error/;
                                            var myMatch = returned.search(myKey);
                                            if(myMatch != -1)
                                            {
                                                //alert("Unknown error!");
                                            }
                                            else
                                            {
                                                $("#shareongroupsquiz-modal").modal("hide");

                                                var text = "Quiz Shared";
                                                notifyChanges(text);
                                                //alert("Successfully shared!");
                                            }
                                            return false;

                                        }
                                    });
                                });




                            }
                        }
                    });


                });



                $('#shareongroupsquiz-modal').on('hidden.bs.modal', function() {

                    $('#mygrouplistquiz .checkbox label input[type="checkbox"]:checked').prop('checked', false);
                    $('#shareongroupsQuizButton').prop("disabled", true);

                });





                /*
        // Handle Filters
        $('.filterlink2').unbind().click(function(e){
          e.preventDefault();

          //$('body').append(footerMiniIndex);
          //$('#footer-mini-index').removeClass('loaded').addClass('hidden');
          $('#endSearch').addClass('hidden');
          $('#index-content .empty-results').addClass('hidden');
          $('#grid .column').html('');
          $('#quizfrom').val('0');
          $('#topicsautotrigger').val('0');


          var user = $('#user').val();
          var filter = $(this).attr('data-filter');

          if(filter == 'learn-spanish')
          {
            $('#cat').val('');
            $('#course').val("4,5,6");
            $('#favorites').val('');
            filter = '<span class="hidden-xs">I want to learn Spanish</span><span class="hidden-sm hidden-md hidden-lg">Spanish</span> <span class="caret"></span>';
            $('h1.page-title').text('Quizzes - Spanish Course');
            $('#footer-mini-index').removeClass('hidden').css('opacity', 0);

            $('#calltoaction-band-learn-english').addClass('hidden');
            $('#calltoaction-band-learn-spanish').removeClass('hidden');

            $('#calltoaction-button-english').addClass('hidden');
            $('#calltoaction-button-spanish').removeClass('hidden');

            var signUpUrl = '/en/learn-spanish';

          }
          else if(filter == 'learn-english')
          {
            $('#cat').val('');
            $('#course').val("1,2,3");
            $('#favorites').val('');
            filter = '<span class="hidden-xs">I want to learn English</span><span class="hidden-sm hidden-md hidden-lg">English</span> <span class="caret"></span>';
            $('h1.page-title').text('Quizzes - English Course');
            $('#footer-mini-index').removeClass('hidden').css('opacity', 0);

            $('#calltoaction-band-learn-spanish').addClass('hidden');
            $('#calltoaction-band-learn-english').removeClass('hidden');

            $('#calltoaction-button-spanish').addClass('hidden');
            $('#calltoaction-button-english').removeClass('hidden');

            var signUpUrl = '/en/learn-english';
          }

          //console.log("course: " + $('#course').val());

          $('#gab-button,#register-now-modal-btn').attr('href',signUpUrl);


          $('#activefilter2').html(filter);
          course = $('#course').val();


          if( $("#sectionfilter").val() == "" && $("#userDataType").val() == "teacher" )
            getQuizzes(course,0);
          else if( $("#sectionfilter").val() == "quizzes" || ($("#sectionfilter").val() == "" && $("#userDataType").val() == "student") )
            getQuizzes(course,0);

        });
        */







                //submitQuiz(quizId);

                //addquiz();
                //removequiz();
                //acceptquiz();
                //hidequiz();

                //return false;

                scrolledCheckQuizzes = false;


            }
            else
            {

                $('#quizzeswrap div.spinner').remove();
                $('#quizzeswrap #loadmorequiz').remove();
                scrolledCheckQuizzes = true;
//        if(showNoResult) {
//
//          $('#endSearch').text("Refresh");
//          $('#endSearch').removeClass('hidden').fadeTo(50,1);
//
//        }


                //no quiz
                // Check if any exist?
                var totalitem = $("#quizzeswrap li").length;
                //console.log("totalitem: " + totalitem);
                if(totalitem < 1)
                {
                    $('#quizzeswrap .empty-settings').removeClass('hidden');
                    return false;
                } else
                    $('#completed-hider').removeClass('hidden');
            }



        });

        return false;

    }















    var cleanup = function(answer){

        //console.log("cleaning answer: " + answer);

        var clean = answer.replace(/\W/g, '');
        clean = clean.toLowerCase();

        //console.log("cleaned answer: " + clean);

        return clean;
    }

    var displayResults = function(newExamId,quizId,score) {

        var loadUrl = "examid="+newExamId+"&quizid="+quizId;
        //console.log(loadUrl);

        $.ajax({
            url : "https://www.bitgab.com/en/dashboard/ajax/quizresult.php",
            type: "GET",
            data : loadUrl,
            success: function(data)
            {
                var returned = data;
                //console.log(returned);
                //return false;

                var myKey = /success/;
                var myMatch = returned.search(myKey);
                if(myMatch != -1)
                {

                    var returnedArr = returned.split(" ~ ");
                    var earnedPoint = returnedArr[1];
                    var htmlResult = returnedArr[2];

                    var currentScore = Number($('#hederScoreNumber').text());
                    earnedPoint = Number(earnedPoint);
                    currentScore = Number(currentScore + earnedPoint);
                    if(currentScore < 0)
                        currentScore = 0;
                    $('#hederScoreNumber').text(currentScore);

                    if(earnedPoint > 0) {
                        earnedPoint = '+' + earnedPoint;
                        $('#headerScoreUpdate').html(earnedPoint).slideDown(75);
                        setTimeout(function(){
                            $('#headerScoreUpdate').slideUp(75);
                        },3000);
                    }


                    //$('#quizform-'+quizId).html(htmlResult);
                    $('#quizform-'+quizId+ ' .quiz-options').html(htmlResult);
                    $('#quizform-'+quizId+ ' .quiz-submit').addClass("hidden");
                    //$('#quizform-'+quizId+ ' .quiz-like-buttons').addClass("hidden");


                    //totalquizentry

                    var totalquizentry = Number($('#totalquizentry-'+quizId).val());
                    $('#totalquizentry-'+quizId).val(totalquizentry + 1);
                    //$('#quizform-'+quizId+' .totalquizentry').fadeOut().text(totalquizentry + 1 + ' answers').fadeIn();
                    $('#quizform-'+quizId+' .totalquizentry').hide().text(totalquizentry + 1 + ' answers').show();




                    //$("html, body").animate({ scrollTop: $('#examTabs').offset().top-68 }, 400);

                    getScoresHeader();




                    return false;
                }
                else
                {
                    return false;

                }
            }
        });


    }




    var submitQuiz = function(quizId){


        //var quizId = $('#quiz').val();
        //console.log("quizId: " + quizId);
        //return false;

        //console.log('serializing..');
        var formData = $('#quizform-'+quizId).serialize();
        //console.log(formData);

        $('#answerButton').hide();
        //$('#questions').html('<div class="examSubmitting"><i class="fa fa-cog fa-spin"></i> <br>Por favor espera...</div>');

        //return false;

        $.ajax({
            url : "https://www.bitgab.com/en/dashboard/ajax/submitQuiz.php",
            type: "POST",
            data : formData,
            success: function(data)
            {
                var returned = data;

                //console.log(returned);
                //return false;

                var myKey = /success/;
                var myMatch = returned.search(myKey);

                var myKey2 = /quota/;
                var myMatch2 = returned.search(myKey2);

                if(myMatch != -1)
                {

                    var returnedArr = returned.split(" ~ ");
                    var newExamId = returnedArr[1];
                    var examPoint = returnedArr[2];

                    //console.log(newExamId);
                    displayResults(newExamId,quizId,examPoint);
                    return false;
                }
                else if(myMatch2 != -1)
                {
                    $('#register-now-modal').modal('show');
                    return false;
                }
                else
                {
                    //notify('alert-save-error','danger','floating');
                    $('.savebutton').attr('disabled',false);
                    //$('.savebutton').text('Save Changes');
                    return false;

                }
            }
        });

    }











    var deleteQuiz = function(quizId){

        var formData = 'quiz='+quizId;
        //console.log(formData);

        $.ajax({
            url : "https://www.bitgab.com/en/dashboard/ajax/deleteQuiz.php",
            type: "POST",
            data : formData,
            success: function(data)
            {
                var returned = data;
                //console.log(returned);

                var myKey = /success/;
                var myMatch = returned.search(myKey);
                if(myMatch != -1)
                {
                    $('#delete-quiz-modal').modal('hide');

                    setTimeout(function(){
                        $('#quiz-box-'+quizId).slideUp(300, function() { $(this).remove(); });
                    }, 500);


                    return false;
                }
                else
                {
                    //notify('alert-save-error','danger','floating');
                    //$('.savebutton').attr('disabled',false);
                    //$('.savebutton').text('Save Changes');
                    return false;

                }
            }
        });

    }

















    function uploadPhotosQuizPhoto(type){

        var elem = document.getElementById('fileupload');
        if(elem && document.createEvent) {
            var evt = document.createEvent("MouseEvents");
            evt.initEvent("click", true, false);
            elem.dispatchEvent(evt);
        }


        var url = '/uploads/profile/quizphoto.php';


        //console.log(url);
        'use strict';
        var filenamez = [];
        var fname = '';
        var filesizez = [];
        var fsize = '';
        var filerow = '';
        var fsizekb = 0;
        var ftype = '';
        var furl = '';
        var fthumbUrl = '';
        var fsizekb_txt = '';
        var imgUrl = '';
        //filethumbUrls

        //$("#progress").hide();


        $('#fileupload').fileupload({
            url: url,
            dataType: 'json',
            done: function (e, data) {
                $.each(data.result.files, function (index, file) {

                    console.log('quiz - ' + type  + ':'  + file);

                    var orfileURL = file.url;

                    if(orfileURL == undefined){

                        console.log("undefined");

                        $('#page-title-wrapper').before('<div style="margin:25px 0 0 0;font-weight:600;" class="alert alert-danger header-alert notify"><button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>'+file.error+'</div>');

                        //$(".savephoto").prop("disabled",true);
                        //$('#imgHolder').after('<div style="text-align:center;"><span class="text-error">'+errmgg+'</span></div>');
                        $(".imgloading").hide();


                        $('.imgUploadError').removeClass('hidden');

                        return false;
                    }
                    else
                    {

                        console.log("type: " + type );

                        //$(".savephoto").prop("disabled",false);
                        $('.imgUploadError').addClass('hidden');

                        if(type == 'profilephoto')
                        {

                            console.log("quiz profile" );

                            var timestamp = new Date().getTime();
                            //imgUrl = file.thumbnailUrl+"?time="+timestamp;
                            imgUrl = file.thumbnailUrl;

                            //$('#newphoto').val(file.url);
                            $('#photo').val(file.thumbnailUrl);

                            imgUrl = imgUrl.replace("http://","https://");

                            $('#photo-placeholder').html('<img class="img-responsive" src="'+imgUrl+'">');
                            $('#photo-placeholder').removeClass("hidden");

                            //$('#changephoto').attr('src',imgUrl);
                            //$('.profilephotolink').attr('src',imgUrl);
                            //$('.headerprofilephoto').attr('src',imgUrl);

                        }
                        else
                        {
                            imgUrl = file.url;
                            var imgUrl = imgUrl.replace("http://","https://");

                            console.log("quiz not profile: " + imgUrl );

                            //$('#newcover').val(file.url);
                            //$('#newcoverthumb').val(file.thumbnailUrl);
                            // $('#bg-cover').css('background-image', 'url(' + imgUrl + ')');
                        }

                        $('.savebuttonPhoto').trigger('click');


                    }
                });
            },
            progressall: function (e, data) {
                //$('#imgHolder img').css({opacity:0.5})
                $(".imgloading").show();
                $("#progress").hide();
                //$("#progress").fadeIn();
                var progress = parseInt(data.loaded / data.total * 100, 10);
                $('#progress .bar').css(
                    'width',
                    progress + '%'
                );
            }
        }).prop('disabled', !$.support.fileInput)
            .parent().addClass($.support.fileInput ? undefined : 'disabled');

    }






    function uploadPhotosPostPhoto(type){

        var elem = document.getElementById('fileupload');
        if(elem && document.createEvent) {
            var evt = document.createEvent("MouseEvents");
            evt.initEvent("click", true, false);
            elem.dispatchEvent(evt);
        }


        var url = '/uploads/profile/postphoto.php';


        //console.log(url);
        'use strict';
        var filenamez = [];
        var fname = '';
        var filesizez = [];
        var fsize = '';
        var filerow = '';
        var fsizekb = 0;
        var ftype = '';
        var furl = '';
        var fthumbUrl = '';
        var fsizekb_txt = '';
        var imgUrl = '';
        //filethumbUrls

        //$("#progress").hide();

        $('#fileupload').fileupload({
            url: url,
            dataType: 'json',
            send: function () {
                $('#photo-placeholder-post').removeClass("hidden");
                $('#photo-placeholder-post').html("<div style='display:flex;align-items:center;justify-content:center;padding: 15px;'><div class='spinner grey'></div></div>");
                $('#sendcommentwrap').slideDown(100);
            },
            done: function (e, data) {
                $.each(data.result.files, function (index, file) {

                    console.log('post - ' + type  + ':'  + file);

                    var orfileURL = file.url;

                    if(orfileURL == undefined){

                        console.log("undefined");

                        $('#page-title-wrapper').before('<div style="margin:25px 0 0 0;font-weight:600;" class="alert alert-danger header-alert notify"><button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>'+file.error+'</div>');

                        //$(".savephoto").prop("disabled",true);
                        //$('#imgHolder').after('<div style="text-align:center;"><span class="text-error">'+errmgg+'</span></div>');
                        $(".imgloading").hide();


                        $('.imgUploadErrorPost').removeClass('hidden');

                        return false;
                    }
                    else
                    {

                        console.log("type: " + type );

                        $('.imgUploadErrorPost').addClass('hidden');

                        if(type == 'profilephoto')
                        {

                            console.log("post profile" );

                            var timestamp = new Date().getTime();
                            //imgUrl = file.thumbnailUrl+"?time="+timestamp;
                            imgUrl = file.thumbnailUrl;

                            var imgUrl = imgUrl.replace("http://","https://");

                            $('#photo-placeholder-post').html('<img class="img-responsive" src="'+imgUrl+'">');
                            //$('#photo-placeholder-post').removeClass("hidden");

                            $('#photo-post').val(imgUrl);

                            setTimeout(function(){
                                $('.savebuttonPost').prop("disabled", false);
                            },0);

                            //$('#sendcommentwrap').slideDown(100);
                        }
                        else
                        {
                            imgUrl = file.url;
                            var imgUrl = imgUrl.replace("http://","https://");

                            console.log("quiz not profile: " + imgUrl );

                            //$('#newcover').val(file.url);
                            //$('#newcoverthumb').val(file.thumbnailUrl);
                            // $('#bg-cover').css('background-image', 'url(' + imgUrl + ')');
                        }

                        $('.savebuttonPhoto').trigger('click');


                    }
                });
            },
            progressall: function (e, data) {
                //$('#imgHolder img').css({opacity:0.5})
                $(".imgloading").show();
                $("#progress").hide();
                //$("#progress").fadeIn();
                var progress = parseInt(data.loaded / data.total * 100, 10);
                $('#progress .bar').css(
                    'width',
                    progress + '%'
                );
            }
        }).prop('disabled', !$.support.fileInput)
            .parent().addClass($.support.fileInput ? undefined : 'disabled');

    }



    function uploadPhotos(type){

        var elem = document.getElementById('fileupload');
        if(elem && document.createEvent) {
            var evt = document.createEvent("MouseEvents");
            evt.initEvent("click", true, false);
            elem.dispatchEvent(evt);
        }

        if(type == 'profilephoto')
            var url = '/uploads/profile/profile.php';
        else
            var url = '/uploads/profile/cover.php';


        //console.log(url);
        'use strict';
        var filenamez = [];
        var fname = '';
        var filesizez = [];
        var fsize = '';
        var filerow = '';
        var fsizekb = 0;
        var ftype = '';
        var furl = '';
        var fthumbUrl = '';
        var fsizekb_txt = '';
        var imgUrl = '';
        //filethumbUrls

        //$("#progress").hide();


        $('#fileupload').fileupload({
            url: url,
            dataType: 'json',
            //submit: function(e, data) {
//          var timestamp = new Date().getTime();
//          var userID = $('#user').val();
//          data.files[0].uploadName = userID+'-'+timestamp+'.jpg';
//          console.log(data.files[0].uploadName);
//        },
            done: function (e, data) {
                $.each(data.result.files, function (index, file) {

                    console.log('profile - ' + type  + ':'  + file);

                    var orfileURL = file.url;

                    if(orfileURL == undefined){

                        $('#page-title-wrapper').before('<div style="margin:25px 0 0 0;font-weight:600;" class="alert alert-danger header-alert notify"><button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>'+file.error+'</div>');

                        //$(".savephoto").prop("disabled",true);
                        //$('#imgHolder').after('<div style="text-align:center;"><span class="text-error">'+errmgg+'</span></div>');
                        $(".imgloading").hide();
                        return false;
                    }
                    else
                    {

                        if(type == 'profilephoto')
                        {

                            imgUrl = file.thumbnailUrl;

                            var imgUrl = imgUrl.replace("http://","https://");

                            $('#newphoto').val(file.url);
                            $('#newphotothumb').val(file.thumbnailUrl);

                            var oldProfilePhoto = $('#changephoto').attr('src');
                            var timestamp = new Date().getTime();
                            var newProfilePhoto = oldProfilePhoto + "?t=" + timestamp;

                            $('#changephoto').attr('src',newProfilePhoto);
                            $('.profilephotolink').attr('src',newProfilePhoto);
                            $('.headerprofilephoto').attr('src',newProfilePhoto);

                        }
                        else
                        {
                            imgUrl = file.showcaseUrl;
                            var imgUrl = imgUrl.replace("http://","https://");
                            console.log("Cover Showcase: " + imgUrl);
                            $('#newcover').val(file.url);
                            $('#newcoverthumb').val(file.thumbnailUrl);
                            $('#newcovershowcase').val(file.showcaseUrl);
                            $('#bg-cover').css('background-image', 'url(' + imgUrl + ')');
                        }

                        $('.savebuttonPhoto').trigger('click');


                    }
                });
            },
            progressall: function (e, data) {
                //$('#imgHolder img').css({opacity:0.5})
                $(".imgloading").show();
                $("#progress").hide();
                //$("#progress").fadeIn();
                var progress = parseInt(data.loaded / data.total * 100, 10);
                $('#progress .bar').css(
                    'width',
                    progress + '%'
                );
            }
        }).prop('disabled', !$.support.fileInput)
            .parent().addClass($.support.fileInput ? undefined : 'disabled');

    }






    var findFriendsProfile = function(){

        var friends = '';
        var searchfrom = $('#searchfrom').val();

        if( $('#findfriendswrap li').length < 1 )
            $('#findfriendswrap').prepend('<div class="spinner grey" style="margin: 98px auto;"></div>');

        var qname = $('#qname').val();
        var qusername = $('#qusername').val();
        var qcity = $('#qcity').val();
        var qcountry = $('#qcountry').val();
        var quniversity = $('#quniversity').val();
        var qcollege = $('#qcollege').val();
        var qprofession = $('#qprofession').val();
        var qlevel = $('#activeqlevel').val();

        $.getJSON('/en/dashboard/ajax/findFriends.php?user='+$('#useridGlobal').val()+'&searchfrom='+searchfrom+'&qname='+qname+'&qusername='+qusername+'&qcity='+qcity+'&qcountry='+qcountry+'&quniversity='+quniversity+'&qcollege='+qcollege+'&qprofession='+qprofession+'&qlevel='+qlevel+'&school='+$("#school_id").val(), function(data2) {

            if(data2 !== "" && data2 !== null)
            {
                var numuser = 1;
                $.each(data2, function(arrayID,friend) {

                    var location = '';
                    if( friend.city !== "" || friend.country !== "" )
                    {
                        if( friend.city !== "" )
                            location += friend.city + ', ';

                        if( friend.country !== "" )
                            location += friend.countryname;

                        //location = location + ' <span class="flag-icon flag-icon-'+friend.country+'"></span>';

                    }

                    var university = '';
                    if( friend.university !== "" )
                        university = ' | ' + friend.university;

                    university = '';

                    var college = '';
                    if( friend.college !== "" )
                        college = ' | ' + friend.college;

                    college = '';

                    var statusbtn = '';
                    if( friend.friendstatus == "0" || friend.friendstatus == "1" )
                    {
                        if( friend.friendstatus == "1" )
                            statusbtn = '<span style="margin-right:9px;">Friend</span>';
                        else if( friend.friendstatus == "0" )
                        {
                            if( friend.isfriendtarget == "1" )
                                statusbtn = '<button class="btn btn-primary btn-sm acceptFriendButton" data-friend="'+friend.id+'" style="margin-bottom:5px;"><span class="visible-sm visible-lg">Accept</span><span class="visible-xs visible-md"><i class="ion ion-inline ion-checkmark" style="margin-right:0;width:12px;"></i></span></button> <button class="btn btn-default btn-sm removeFriendButton" data-friend="'+friend.id+'" style="margin-bottom:5px;margin-left:5px;float:right;line-height: 12px;padding: 8px;"><i class="ion ion-inline ion-close-round" style="margin-right:0;width:12px;"></i></button>';
                            else
                                statusbtn = '<span data-friend="'+friend.id+'">Request sent</span>';
                        }
                    }
                    else {

                        var fakeuser = $('#fakeuser').val();

                        if(fakeuser > 0)
                            statusbtn = '<button class="btn btn-primary btn-sm"><i class="ion ion-inline ion-person-add" style="margin-right: 6px;"></i>Add</button>';
                        else
                            statusbtn = '<button id="friendfav-'+friend.id+'" class="btn btn-primary btn-sm addFriendButton" data-friend="'+friend.id+'"><i class="ion ion-inline ion-person-add" style="margin-right: 6px;"></i>Add</button>';
                    }


                    friends += '<li class="item" data-friend="'+friend.id+'"><div class="product-img"><a href="https://www.bitgab.com/'+friend.slug+'" data-user="'+friend.id+'" style="border:0;"><img alt="'+friend.name+'" src="'+friend.photothumb+'" class="img-circle"></a></div><div class="product-info"><div class="col-xs-8 no-padding" style="overflow: hidden;text-overflow: ellipsis;"><span style="font-size:18px;color:#777;font-weight:600;margin-right:5px;"><a href="https://www.bitgab.com/'+friend.slug+'" data-user="'+friend.id+'" style="border:0;">'+friend.name+'</a></span><span style="display:inline-block;font-size:16px;color:#777;"><i style="font-size:16px;color:#ffb90f !important;" class="ion ion-android-star"></i> '+friend.score+'</span><span style="display:block;color:#657786;font-size:15px;">'+location+university+college+'</span></div><div style="text-align:right;margin-top:3px;" class="col-xs-4 no-padding">'+statusbtn+'</div></div></li>';

                    numuser++;

                });

                if(friends !== "")
                    $('.noresult').remove();


                $('#findfriendswrap div.spinner').remove();
                $('#findfriendswrap').append(friends);

                //console.log("numuser: " + numuser);

                //if(numuser > 20)
                //      {
                //        var loadmorefriends = '<button class="btn btn-default" type="submit" style="display:block;margin:10px auto;" id="loadmorefriends">Ver más</button>';
                //        $('#findfriendswrap').append(loadmorefriends);
                //      }

                $('#loadmorefindfriends').show();
                $('#loadmorefindfriendsspinner .spinner').addClass('hidden');

                if(numuser <= 20)
                    $('#loadmorefindfriends').addClass('hidden');
                else
                    $('#loadmorefindfriends').removeClass('hidden');

                searchfrom = $( "#findfriendswrap li.item:last" ).attr('data-friend');
                $('#searchfrom').val(searchfrom);


                $('#loadmorefindfriends').one('click', function(){
                    $('#loadmorefindfriends').hide();
                    $('#loadmorefindfriendsspinner .spinner').removeClass('hidden');
                    findFriendsProfile();
                    return false;
                });




                addFriend();
                removeFriend();
                acceptFriend();
                hideFriend();

            }
            else
            {
                //no friend
                // Check if any exist?
                var totalitem = $("#findfriendswrap li").length;
                //console.log("totalitem: " + totalitem);
                //$('#loadmorefriends').attr('disabled',true);
                //$('#loadmorefriends').remove();
                $('#loadmorefindfriends').addClass('hidden');
                if(totalitem < 1)
                {
                    $('#findfriendswrap div.spinner').remove();
                    $('#findfriends-tab .empty-settings').removeClass('hidden');
                    //$('#loadmorefriends').addClass('hidden');
                    $('#loadmorefindfriends').addClass('hidden');
                    return false;
                }
            }
        });

    }






    var findTeachersProfile = function(){

        var teachers = '';
        var searchfrom = $('#searchfrom2').val();

        if( $('#findteacherswrap li').length < 1 )
            $('#findteacherswrap').prepend('<div class="spinner grey" style="margin: 98px auto;"></div>');


        //var qpricerange = $('.range-slider').val();  //THIS CAUSES BUG... IF maxPriceRange is not equal to high range of qpricerange, then JSON below returns null
        //var maxPriceRange = $('#maxPriceRange').val(); //EXAMPLE: qpricerange == "0,50" & maxPriceRange == "50" works.... however qpricerange == "0,20" / maxPriceRange = "40" doesn't work

        var maxPriceRange = $('#maxPriceRange').val() * 100; //If not multiplier added, max hourly rate is $32, and teachers with higher hourly rate are not shown - Why we did this?
        var qpricerange = "0,"+maxPriceRange;

        var qname = $('#qname2').val();
        var qcountry = $('#qcountry2').val();
        var qprice = $('#qprice').val();
        var qlang = $('#qlang').val();
        var qbgteacher = $('#qbgteacherval').val();
        //console.log(searchfrom+" "+qname+" "+qcountry+" "+qlang+" "+qpricerange+" "+maxPriceRange);

        $.getJSON('/en/dashboard/ajax/findTeachers.php?user='+$('#useridGlobal').val()+'&qbgteacher='+qbgteacher+'&searchfrom='+searchfrom+'&qname='+qname+'&qcountry='+qcountry+'&qlang='+qlang+'&qprice='+qpricerange+'&qmaxpricerange='+maxPriceRange+'&school='+$("#school_id").val(), function(data2) {

            if(data2 !== "" && data2 !== null)
            {
                var numuser = 1;
                $.each(data2, function(arrayID,teacher) {

                    //console.log("teacherid: " + teacher.id);


                    var location = '';
                    if( teacher.city !== "" || teacher.country !== "" )
                    {
                        if( teacher.city !== "" )
                            location += teacher.city + ', ';

                        if( teacher.country !== "" )
                            location += teacher.countryname;

                        //location = location + ' <span class="flag-icon flag-icon-'+teacher.country+'"></span>';

                    }

                    var university = '';
                    if( teacher.university !== "" )
                        university = ' | ' + teacher.university;

                    university = '';

                    var college = '';
                    if( teacher.college !== "" )
                        college = ' | ' + teacher.college;

                    college = '';

                    var statusbtn = '';
                    if( teacher.teacherstatus == "1" )
                    {
                        statusbtn = '<span style="margin-right:9px;">Favorite</span>';
                    }
                    else
                        statusbtn = '<button id="teacherfav-'+teacher.id+'" class="btn btn-primary btn-sm addTeacherButton" data-teacher="'+teacher.id+'" data-teachername="'+teacher.name+'" data-teacherphoto="'+teacher.photothumb+'">Favorite</button>';


                    //teachers += '<li class="item" data-teacher="'+teacher.id+'"><div class="product-img"><a href="#user-profile-modal" data-user="'+teacher.id+'" data-toggle="modal" style="border:0;"><img alt="User Avatar" src="'+teacher.photothumb+'" class="img-circle"></a></div><div class="product-info"><div class="col-xs-8 no-padding"><span style="font-size:18px;color:#777;font-weight:600;margin-right:5px;"><a href="#user-profile-modal" data-user="'+teacher.id+'" data-toggle="modal" style="border:0;">'+teacher.name+'</a></span><span style="display:inline-block;font-size:16px;color:#777;"><i style="font-size:16px;color:#ffb90f !important;" class="ion ion-android-star"></i> '+teacher.score+'</span><span style="display:block;color:#657786;font-size:15px;">'+location+university+college+'</span></div><div style="text-align:right;margin-top:3px;" class="col-xs-4 no-padding">'+statusbtn+'</div></div></li>';


                    teachers += '<li class="item" data-teacher="'+teacher.id+'"><div class="product-img"><a href="https://www.bitgab.com/'+teacher.slug+'" data-user="'+teacher.id+'" style="border:0"><img alt="'+teacher.name+'" src="'+teacher.photothumb+'" class="img-circle"></a></div><div class="product-info"><div class="col-xs-8 col-sm-9 no-padding" style="overflow:hidden;text-overflow:ellipsis"><div style="font-size:18px;color:#777;font-weight:600;margin-right:5px;display:inline-block;vertical-align:middle;"><a href="https://www.bitgab.com/'+teacher.slug+'" data-user="'+teacher.id+'" style="border:0;white-space:nowrap">'+teacher.name+'</a></div> <div style="display:inline-block;font-size:16px;color:#777;vertical-align:middle"><input class="star-rating" id="star-rating-'+numuser+'" type="number" class="rating form-control hide" data-size="xs" data-show-caption="false" data-show-clear="false" data-disabled="true" value="'+teacher.rating+'"></div> <div style="display:block;color:#657786;font-size:15px">'+location+university+college+'</div></div><div style="text-align:right;margin-top:3px" class="col-xs-4 col-sm-3 no-padding">'+statusbtn+'</div></div>';

                    numuser++;

                });

                if(teachers !== "")
                    $('.noresult').remove();


                $('#findteacherswrap div.spinner').remove();
                $('#findteacherswrap').append(teachers);

                $('#findteacherswrap input.star-rating').each(function(index, element) {
                    $(this).rating();
                });

                /* jRange DISABLED
        // Update the range values

        var activeRange = $('#qrange').val();
        var activeRangeArr = activeRange.split(",");
        //$('.range-slider').jRange('updateRange', activeRangeArr[0], activeRangeArr[1]);

        //$('.slider').jRange('updateRange', '0,100', '25,50');

        // Update the range values
        var maxPriceRange = $('#maxPriceRange').val();
        var maxPriceRange1 = maxPriceRange / 4;
        var maxPriceRange2 = maxPriceRange / 4 * 2;
        var maxPriceRange3 = maxPriceRange / 4 * 3;
        var maxPriceRange4 = maxPriceRange + "+";
        $('.range-slider').jRange('updateRange', '0,'+maxPriceRange, activeRangeArr[0]+','+activeRangeArr[1]);
        */
                //console.log("range: " + activeRangeArr[0] + " ~ " + activeRangeArr[1]);

                //console.log(numuser);


                //if(numuser > 20)
                //      {
                //        var loadmorefriends = '<button class="btn btn-default" type="submit" style="display:block;margin:10px auto;" id="loadmorefriends">Ver más</button>';
                //        $('#findfriendswrap').append(loadmorefriends);
                //      }

                $('#loadmorefindteachers').show();
                $('#loadmorefindteachersspinner .spinner').addClass('hidden');

                if(numuser <= 20)
                    $('#loadmorefindteachers').addClass('hidden');
                else
                    $('#loadmorefindteachers').removeClass('hidden');

                var searchfrom = $( "#findteacherswrap li.item:last" ).attr('data-teacher');
                $('#searchfrom2').val(searchfrom);


                $('#loadmorefindteachers').one('click', function(){
                    $('#loadmorefindteachers').hide();
                    $('#loadmorefindteachersspinner .spinner').removeClass('hidden');
                    findTeachersProfile();
                    return false;
                });


                addTeacherProfile();
                removeTeacherProfile();

            }
            else
            {
                /* jRange DISABLED
        var activeRange = $('#qrange').val();
        var activeRangeArr = activeRange.split(",");

        // Update the range values
        var maxPriceRange = $('#maxPriceRange').val();
        var maxPriceRange1 = maxPriceRange / 4;
        var maxPriceRange2 = maxPriceRange / 4 * 2;
        var maxPriceRange3 = maxPriceRange / 4 * 3;
        var maxPriceRange4 = maxPriceRange + "+";
        $('.range-slider').jRange('updateRange', '0,'+maxPriceRange, activeRangeArr[0]+','+activeRangeArr[1]);
        */
                //console.log("range: " + activeRangeArr[0] + " ~ " + activeRangeArr[1]);

                //console.log(numuser);
                //no teacher
                // Check if any exist?
                var totalitem = $("#findteacherswrap li").length;
                //console.log("totalitem: " + totalitem);
                //$('#loadmoreteachers').attr('disabled',true);
                //$('#findfriendswrap #loadmoreteachers').remove();
                $('#loadmorefindteachers').addClass('hidden');
                if(totalitem < 1)
                {
                    $('#findteacherswrap div.spinner').remove();
                    $('#findteachers-tab .empty-settings').removeClass('hidden');
                    //$('#loadmoreteachers').addClass('hidden');
                    $('#loadmorefindteachers').addClass('hidden');
                    return false;
                }
            }
        });

    }





    var findGroupsProfile = function(){

        var groups = '';
        var searchfrom = $('#searchfrom3').val();

        if( $('#findgroupswrap li').length < 1 )
            $('#findgroupswrap').prepend('<div class="spinner grey" style="margin: 98px auto;"></div>');


        $.getJSON('/en/dashboard/ajax/findGroups.php?user='+$('#useridGlobal').val()+'&searchfrom='+searchfrom+'&school='+$("#school_id").val(), function(data2) {

            if(data2 !== "" && data2 !== null)
            {
                var numgroup = 1;
                $.each(data2, function(arrayID,group) {

                    var member_type = '';

                    if(group.membertype == "") {
                        if(group.jointype == 1)
                            member_type = 'Public group';
                        else if(group.jointype == 2)
                            member_type = 'Private group';
                        else if(group.jointype == 3)
                            member_type = 'Invite Only group';
                    } else
                        member_type = group.membertype;

                    member_type = member_type[0].toUpperCase() + member_type.slice(1);


                    var group_cover = '';
                    if(group.coverthumb !== "")
                        group_cover = '<img alt="'+group.title+'" src="'+group.coverthumb+'" style="width: 100px;border-radius: 3px;">';


                    groups += '<li class="item" data-group="'+group.id+'"><div class="product-img"><a href="https://www.bitgab.com/group/'+group.slug+'" data-group="'+group.jointype+'" style="border:0;"><div class="groupImgPlaceholder">'+group_cover+'</div></a></div><div class="product-info" style="margin-left: 110px;"><div class="col-xs-12 no-padding" style="overflow: hidden;text-overflow: ellipsis;"><span style="font-size:16px;color:#777;font-weight:600;margin-right:5px;"><a href="https://www.bitgab.com/group/'+group.slug+'" data-group="'+group.jointype+'" style="border:0;">'+group.title+'</a></span><span style="display:block;color:#657786;font-size:13px;">'+member_type+'</span></div></div></li>';

                    numgroup++;

                });

                if(groups !== "")
                    $('.noresult').remove();


                $('#findgroupswrap div.spinner').remove();
                $('#findgroupswrap').append(groups);

                //$('#findgroupswrap input.star-rating').each(function(index, element) {
                //    $(this).rating();
                //});



                $('#loadmorefindgroups').show();
                $('#loadmorefindgroupsspinner .spinner').addClass('hidden');

                //alert(numgroup);

                if(numgroup <= 20)
                    $('#loadmorefindgroups').addClass('hidden');
                else
                    $('#loadmorefindgroups').removeClass('hidden');

                var searchfrom = $( "#findgroupswrap li.item:last" ).attr('data-group');
                $('#searchfrom3').val(searchfrom);


                $('#loadmorefindgroups').one('click', function(){
                    $('#loadmorefindgroups').hide();
                    $('#loadmorefindgroupsspinner .spinner').removeClass('hidden');
                    findGroupsProfile();
                    return false;
                });


                //addTeacher();
                //removeTeacher();

            }
            else
            {
                // Check if any exist?
                var totalitem = $("#findgroupswrap li").length;
                //console.log("totalitem: " + totalitem);
                //$('#loadmoreteachers').attr('disabled',true);
                //$('#findfriendswrap #loadmoreteachers').remove();
                $('#loadmorefindgroups').addClass('hidden');
                if(totalitem < 1)
                {
                    $('#findgroupswrap div.spinner').remove();
                    $('#findgroups-tab .empty-settings').removeClass('hidden');
                    //$('#loadmoreteachers').addClass('hidden');
                    $('#loadmorefindgroups').addClass('hidden');
                    return false;
                }
            }
        });

    }






    /*
  QUESTION ANSWERS HANDLER
  ***************************************************************************************************************/
    function replyBoard(entry){

        $('.replybox').remove();

        var replyHtml = '<div class="panel-footer replybox" id="replybox-'+entry+'" data-reply="'+entry+'" style="margin: 10px 0px 5px 0;display:none;"><div class="row"><form class="form-self-enabler"><div class="col-xs-12"><textarea id="message" name="message" placeholder="Write a reply..." class="form-control chat-input"></textarea></div><div class="col-xs-12 pull-right" style="text-align:right; margin:10px 0 0 0;" id="sendcommentwrap2"><button class="btn btn-default btn-sm cancelcomment" style="margin-right:8px;width:60px;" type="button" data-reply="'+entry+'">Cancel</button><button class="btn btn-primary btn-sm savebutton2" type="submit" data-reply="'+entry+'" style="width:60px;">Send</button></div></form></div></div>';

        if($('#view-post-modal.in').length < 1)
            $('#board-'+entry + ' .speech').after(replyHtml);
        else
            $('#view-post-modal #board-'+entry + ' .speech').after(replyHtml);

        setTimeout(function(){
            $('#replybox-'+entry).slideDown(150, function() {
                if($(window).width() > 991)
                    $('#replybox-'+entry + ' #message').focus();
            });
        }, 50);

        $('.savebutton2').unbind().click(function(e){


            e.preventDefault();



            var fakeuser = $('#fakeuser').val();
            if(fakeuser > 0)
            {
                e.preventDefault();
                $('#register-now-modal').modal('show');
                return false;
            }
            else
            {

                if( $('#replybox-'+entry + ' #message').val() == "" || $('#sessionid').val() == "")
                {
                    //console.log("oppss.. cant reply this..");
                    //notify('alert-save-error','danger','floating');
                    return false;
                }

                //$('#replybox-'+entry + ' .savebutton2').attr('disabled',true);
                //$('#replybox-'+entry + ' .savebutton2').text('Enviando...');

                var replyTo = $(this).attr('data-reply');
                var replyMsg = $("#replybox-"+replyTo+" #message").val();
                sendReply(replyTo,replyMsg);
                $('.replybtn').removeClass('shown');
                $('#sendcommentwrap').slideUp(100);
                return false;
            }




        });

        $('#replybox-'+entry + ' .cancelcomment').click(function(){
            $('#replybox-'+entry).slideUp(300, function() { $(this).remove(); });
            $('#replybox-'+entry).closest('li.mar-btm').find('.replybtn.shown').removeClass('shown');
        });

        formSerializer();

        return false;

    }


    function sendReply(reply,msg){

        var  formData = "user="+$('#useridGlobal').val() + "&group="+$('#groupid').val() + "&message="+encodeURIComponent(msg) + "&reply="+reply;

        //console.log(formData);

        $.ajax({
            url : "/en/dashboard/ajax/addPostReply.php",
            type: "POST",
            data : formData,
            success: function(data)
            {
                var returned = data;
                var myKey = /errorcommentenrty/;
                var myMatch = returned.search(myKey);
                if(myMatch != -1)
                {
                    //console.log("an error occured...");
                    //notify('alert-save-error','danger','floating');
                    //$('.savebutton2').attr('disabled',false);
                    //$('.savebutton2').text('Enviar');
                    return false;
                }
                else
                {

                    $('.nopost').remove();
                    $('#replybox-'+reply).remove();
                    var replyof = $('#board-'+reply).attr("data-replyof");


                    var last1 = 'repliedof-'+replyof;

                    //var last = $('li.'+last1+':last');
                    var last = $('#demo-chat-body li.'+last1+':last');
                    var lastParent = last.closest('.post-box').find('.post-replies .quote-wrap');

                    lastParent.closest('.post-box').addClass('has-replies');

                    lastParent.append(returned);

                    var lastReply = $('#board-'+reply).closest('.post-box').find('.post-replies .quote-wrap');

                    if(lastReply.find('li.replied').length > 0)
                        lastReply = $('#board-'+reply).closest('.post-box').find('.post-replies .quote-wrap li.replied:last');

                    if($('#view-post-modal.in').length < 1) {
                        var eOffset = lastReply.offset().top - 200; // Y-offset of element and 200px offset
                        //var eHeight = lastReply.height(); // Height of element
                        $('html, body').animate({
                            //scrollTop: (eOffset - eHeight)
                            scrollTop: eOffset
                        }, 300);

                    } else {
                        $('#view-post-modal .post-box').addClass('has-replies');
                        $('#view-post-modal .post-replies .quote-wrap').append(returned);
                        $('#view-post-modal').animate({ scrollTop: $('#view-post-modal .modal-dialog').height() }, 300);
                    }

                    //$('#replybox-'+reply+' .savebutton2').attr('disabled',false);
                    //$('#replybox-'+reply+' .savebutton2').text('Enviar');
                    $('#replybox-'+reply+' #message').val('');

                    // Scroll to bottom
                    var height = 0;
                    $('.nano-content ul .mar-btm').each(function(i, value){
                        height += parseInt($(this).height());
                    });
                    //height += '';

                    //console.log("height" + height);

                    $('.nano-content').animate({scrollTop: height});
                    //$("html, body").animate({ scrollTop: "100px" });

                    $('.replybtn').unbind().click(function(){
                        var boardid = $(this).attr('data-board');
                        if(!$(this).hasClass('shown'))
                            replyBoard(boardid);
                        $('.replybtn').removeClass('shown');
                        $(this).addClass('shown');
                        $('#sendcommentwrap').slideUp(100);
                        return false;
                    });
                }
            }
        });

        formSerializer();

        return false;

    }


    //var retrieveChecker = true;

    function retrieveBoards(){

        var from = Number($('#boardsfrom').val());

        var  formData = "group=" + $('#groupid').val() + "&user=" + $('#userDataId').val() + "&from=" + from + "&hidecompleted=" + $("#hidecompleted").val() + "&myposts=1";


        scrolledCheckPosts = true;


        $("#demo-chat-body .empty-settings").addClass("hidden");


        if( $('#demo-chat-body div.post-box').length < 1 )
            $('#demo-chat-body').append('<div class="spinnerWrapper"><div class="spinner grey" style="margin: 94px auto;"></div></div>');
        else
            $('#demo-chat-body').append('<div class="spinnerWrapper" style="border-top:1px solid #e8e8e8;"><div class="spinner grey" style="margin: 20px auto;"></div></div>');

        //console.log(formData);
        $.ajax({
            url : "/en/dashboard/ajax/retrievePostsProfile.php",
            type: "POST",
            data : formData,
            success: function(data)
            {

                var returned = data;
                var myKey = /errorcommentenrty/;
                var myMatch = returned.search(myKey);
                var myKey2 = /nopost/;
                var myMatch2 = returned.search(myKey2);
                if(myMatch != -1)
                {
                    //console.log("error retrieving...");
                    //notify('alert-retrieve-error','danger','floating');
                    return false;
                }
                else if(myMatch2 != -1)
                {
                    //console.log("nopost...");

                    $('#demo-chat-body div.spinnerWrapper').remove();

                    if(from == "0"){
                        $("#demo-chat-body .empty-settings").removeClass("hidden");
                    }


                    //retrieveChecker = true;
                    $(document).off('scroll.board');

                    $('#morecomments').remove();

                }
                else
                {
                    $('.nopost').remove();

                    $('#demo-chat-body div.spinnerWrapper').remove();

                    $('#demo-chat-body #messages').append(returned);

                    // Scroll to bottom
                    var height = 0;
                    $('.nano-content ul .mar-btm').each(function(i, value){
                        height += parseInt($(this).height());
                    });
                    height += '';
                    $('.nano-content').animate({scrollTop: height});

                    $('.replybtn').unbind().click(function(){
                        var boardid = $(this).attr('data-board');
                        if(!$(this).hasClass('shown'))
                            replyBoard(boardid);
                        $('.replybtn').removeClass('shown');
                        $(this).addClass('shown');
                        $('#sendcommentwrap').slideUp(100);
                        return false;
                    });


                    var latestBoard = $( "#demo-chat-body #messages li.mainboard:last" ).attr('data-mainboard');
                    var retrievedComments = $("#demo-chat-body #messages li.mainboard").length;



                    $('#boardsfrom').val(latestBoard);

                    //console.log(retrievedComments);

                    if(retrievedComments < 5)
                        $('#morecomments').remove();




                    scrolledCheckPosts = false;

                    // Open post modal
                    $(".view-post-link").unbind().click(function(){

                        $("#view-post-modal").modal("show");
                        var postid = $(this).data("postid");
                        retrieveBoardsModal(postid);

                        $("#view-post-modal").on('hidden.bs.modal', function(e) {
                            $("#boardsfrommodal").val("0");
                            $("#view-post-modal #messagesmodal").html("");
                        });


                        return false;
                    });

                    // Handle Favorites
                    $('#completed-check-posts').unbind().click(function(e){
                        var hidecompleted = '0';
                        if( $('#completed-check-posts input:checkbox:checked').length > 0 ){
                            hidecompleted = '1';
                        }
                        $("#hidecompleted").val(hidecompleted);
                        $('#boardsfrom').val('0');
                        $("#demo-chat-body #messages").addClass("noJump");
                        $("#demo-chat-body #messages").html('');
                        retrieveBoards();
                    });

                    return false;
                }

            }
        });
        formSerializer();
        return false;

    }
    /*
  QUESTION ANSWERS HANDLER END
  ***************************************************************************************************************/





    var addBoard = function(){

        var  formData = "user="+$('#useridGlobal').val() + "&group="+$('#groupid').val() + "&message="+encodeURIComponent($('#message').val()) + "&photo="+$('#photo-post').val();

        //console.log(formData);

        $.ajax({
            url : "/en/dashboard/ajax/addPost.php",
            type: "POST",
            data : formData,
            success: function(data)
            {
                var returned = data;
                var myKey = /errorcommentenrty/;
                var myMatch = returned.search(myKey);
                if(myMatch != -1)
                {
                    //console.log("error while adding board");
                    //notify('alert-save-error','danger','floating');
                    //$('.savebutton').attr('disabled',false);
                    //$('.savebutton').text('Enviar');
                    return false;
                }
                else
                {
                    var newPost = returned;

                    $("#demo-chat-body .empty-settings").addClass("hidden");

                    //returned = returned.replace(/\r?\n/g, '<br />');
                    $('#demo-chat-body #messages').prepend(newPost);

                    $("#photo-placeholder-post").html("");
                    $("#photo-placeholder-post").addClass("hidden");
                    $("#photo-post").val("");


                    $('.replybtn').unbind().click(function(){
                        var boardid = $(this).attr('data-board');
                        if(!$(this).hasClass('shown'))
                            replyBoard(boardid);
                        $('.replybtn').removeClass('shown');
                        $(this).addClass('shown');
                        $('#sendcommentwrap').slideUp(100);
                        return false;
                    });


                    //scrollToElement('#qawrap', 200);

                    //$('.savebutton').attr('disabled',false);
                    //$('.savebutton').text('Enviar');
                    $('#message').val('');

                    // Scroll to bottom
                    var height = 0;
                    $('.nano-content ul .mar-btm').each(function(i, value){
                        height += parseInt($(this).height());
                    });
                    height += '';

                    //console.log("height" + height);

                    $('.nano-content').animate({scrollTop: height});
                    //$("html, body").animate({ scrollTop: "100px" });


                    var latestBoard = $( "#demo-chat-body #messages li.mainboard:last" ).attr('data-mainboard');
                    $('#boardsfrom').val(latestBoard);
                    return false;


                }
            }
        });

        return false;
    }












    function retrieveBoardsModal(postid){

        if($('#view-post-modal .modal-body .spinner').length < 1)
            $('#view-post-modal .modal-body').append('<div class="spinnerWrapper" style="height: 400px;display: flex;align-items: center;justify-content: center;"><div class="spinner grey"></div></div>');

        var from = Number($('#boardsfrommodal').val());

        var  formData = "post=" + postid + "&user=" + $('#useridGlobal').val() + "&from=" + $('#boardsfrommodal').val();

        //console.log(formData);
        $.ajax({
            url : "/en/dashboard/ajax/retrievePost.php",
            type: "POST",
            data : formData,
            success: function(data)
            {
                var returned = data;
                var myKey = /errorcommentenrty/;
                var myMatch = returned.search(myKey);
                var myKey2 = /nopost/;
                var myMatch2 = returned.search(myKey2);
                if(myMatch != -1)
                {
                    //console.log("error retrieving...");
                    //notify('alert-retrieve-error','danger','floating');
                    return false;
                }
                else if(myMatch2 != -1)
                {
                    //console.log("nopost...");

                    if(from == "0")
                        $('#view-post-modal #messagesmodal').html('<div class="nopost" style="padding:50px 10px;text-align:center;">No post</div>');

                    //retrieveChecker = true;
                    $(document).off('scroll.board');

                    $('#morecommentsmodal').remove();

                }
                else
                {
                    $('.nopost').remove();
                    $('#view-post-modal .modal-body .spinnerWrapper').remove();
                    $('#view-post-modal #messagesmodal').append(returned);

                    // Scroll to bottom
                    var height = 0;
                    $('.nano-content ul .mar-btm').each(function(i, value){
                        height += parseInt($(this).height());
                    });
                    height += '';
                    $('.nano-content').animate({scrollTop: height});

                    $('.replybtn').unbind().click(function(){
                        var boardid = $(this).attr('data-board');
                        if(!$(this).hasClass('shown'))
                            replyBoard(boardid);
                        $('.replybtn').removeClass('shown');
                        $(this).addClass('shown');
                        $('#sendcommentwrap').slideUp(100);
                        return false;
                    });


                    var latestBoard = $( "#view-post-modal #messagesmodal li.mainboard:last" ).attr('data-mainboard');
                    var retrievedComments = $("#view-post-modal #messagesmodal li.mainboard").length;

                    $('#boardsfrommodal').val(latestBoard);
                    //retrieveChecker = false;

                    return false;
                }
            }
        });
        formSerializer();
        return false;

    }
    /*
  QUESTION ANSWERS HANDLER END
  ***************************************************************************************************************/





    var notifyChanges = function(text){

        $("#notifier-text").text(text);
        $("#notifier").slideDown();

        setTimeout(function(){
            $("#notifier").slideUp(300, function() { $("#notifier-text").text(''); });
        },2000);
    }





    $(document).ready(function(){

        $('#gab-button,#register-now-modal-btn').attr('href','/en/learn-spanish');





        $(document).on("click",".delete-post-trigger",function(e){

            e.preventDefault();

            var postId = $(this).data("postid");

            $('#delete-post-modal .delete-post-link').data("postid", postId);

            if($(this).hasClass('mainboard'))
                $('#delete-post-modal .delete-post-link').addClass('mainboard');
            else
                $('#delete-post-modal .delete-post-link').removeClass('mainboard');

            if($('#view-post-modal.in').length > 0)
                $('#view-post-modal.in').addClass('blurred-modal');

            $('#delete-post-modal').modal('show');

        });

        $("#delete-post-modal").on('hidden.bs.modal', function(){

            if($('#view-post-modal.in').length > 0) {
                $('body').addClass('modal-open');
                $('#view-post-modal.in').removeClass('blurred-modal');
            }

        });


        $(document).on("click",".delete-post-link",function(){

            var finalPostId = $(this).data("postid");

            if( $(this).hasClass("mainboard") ){
                var removalSelector = $(".repliedof-" + $(this).data("postid")).closest('.post-box');
                var removalSelectorTimeline = $("#demo-chat-body .repliedof-" + $(this).data("postid")).closest('.post-box');
                var modalCloser = true;
            }
            else{
                var removalSelector = $("#board-" + $(this).data("postid"));
                var removalSelectorTimeline = $("#demo-chat-body-modal #board-" + $(this).data("postid"));
                var modalCloser = false;
            }

            var formData = "user=" + $("#useridGlobal").val() + "&post=" + $(this).data("postid");
            $.ajax({
                url : "/en/dashboard/ajax/deletePost.php",
                type: "POST",
                data : formData,
                success: function(data)
                {

                    //console.log(data);
                    //return false;

                    var returned = data.trim();
                    var myKey = /error/;
                    var myMatch = returned.search(myKey);
                    if(myMatch != -1)
                    {
                        //notify('alert-save-error','danger','floating');
                        //$('.savebutton').attr('disabled',false);
                        //$('.savebutton').text('Save Changes');

                        return false;
                    }
                    else
                    {
                        $('#delete-post-modal').modal('hide');

                        removalSelector.slideUp(300, function() {
                            if($(this).siblings().length === 0) {
                                $(this).closest('.post-box').removeClass('has-replies');
                            }
                            $(this).remove();
                            if($('#demo-chat-body .post-box').children(':visible').length === 0) {
                                $("#demo-chat-body .empty-settings").css("display", "none").removeClass("hidden");
                                $("#demo-chat-body .empty-settings").slideDown({
                                    duration: 300,
                                    start: function () {
                                        $(this).css({
                                            display: "flex"
                                        })
                                    }
                                });
                            }
                        });
                        if($('#view-post-modal.in').length > 0) {
                            removalSelectorTimeline.slideUp(300, function() { $(this).remove(); });
                            if(modalCloser) {
                                $('#view-post-modal').modal('hide');
                            }

                        }


                        return false;
                    }
                }
            });

            return false;

        });






        if ($('#bg-cover').prop('style').background == '') {

            var thisIsMe = $('#thisIsMe').val();
            if(thisIsMe == 0) {

                var userName = $('#userpage-usernamewrapper').text();
                var colors = ["#1693A5","#ADD8C7","#FBB829","#FF0066","#CDD7B6","#FCFBE3","#C3FF68","#FF9900","#FE4365","#D31996"];
                var rand = Math.floor(Math.random()*colors.length);
                var fixedColor = '';
                if (typeof(Storage) !== "undefined") {

                    if(localStorage.getItem("userName") != userName) {
                        $('#bg-cover').css("background-color", colors[rand]);
                        fixedColor = localStorage.setItem("fixedColor", colors[rand]);
                    } else {
                        $('#bg-cover').css("background-color", localStorage.getItem("fixedColor"));
                    }

                    localStorage.setItem("userName", userName);

                } else {
                    $('#bg-cover').css("background-color", colors[rand]);
                }

            } else {
                $('#bg-cover').css("background-color", "#47AADA");
            }

        } else {
            var src = $('#bg-cover').css('background-image');
            var url = src.match(/\((.*)\)/)[1].replace(/('|")/g,'');

            var img = new Image();
            img.onload = function() {
                $('#bg-cover').fadeTo(150,1);
            }
            img.src = url;
            if (img.complete) img.onload();
        }


        if($(document).width() > 1024) {
            var timesRun = 0;
            var interval = setInterval(function(){
                timesRun += 1;
                if(timesRun === 16){
                    clearInterval(interval);
                }
                userpageScrollerMeasurer();
            }, 20);
        }


        $(window).on('resize', function(){
            if($(document).width() > 1024) {
                var timesRun = 0;
                var interval = setInterval(function(){
                    timesRun += 1;
                    if(timesRun === 16){
                        clearInterval(interval);
                    }
                    userpageScrollerMeasurer();
                }, 20);
            }
        });


        if( $("#userDataType").val() == "teacher" )
        {
            if( $("#sectionfilter").val() == "topics" )
                $("a.section-topics").addClass("active");
            else if( $("#sectionfilter").val() == "quizzes" )
                $("a.section-quizzes").addClass("active");
            else if( $("#sectionfilter").val() == "followers" )
                $("a.section-followers").addClass("active");
            else if( $("#sectionfilter").val() == "groups" )
                $("a.section-groups").addClass("active");
            else if( $("#sectionfilter").val() == "friends" )
                $("a.section-friends").addClass("active");
            else if( $("#sectionfilter").val() == "posts" )
                $("a.section-posts").addClass("active");
            else
                $("a.section-topics").addClass("active");
        }
        else
        {
            if( $("#sectionfilter").val() == "quizzes" )
                $("a.section-quizzes").addClass("active");
            else if( $("#sectionfilter").val() == "groups" )
                $("a.section-groups").addClass("active");
            else if( $("#sectionfilter").val() == "favorite-teachers" )
                $("a.section-favorite-teachers").addClass("active");
            else if( $("#sectionfilter").val() == "friends" )
                $("a.section-friends").addClass("active");
            else if( $("#sectionfilter").val() == "posts" )
                $("a.section-posts").addClass("active");
            else
                $("#a.section-posts").addClass("active");
        }






        $('#quizfrom').val('0');  // Reset Timeline

        var course = $('#course').val();
        var user = $('#userDataId').val();


        if( $("#sectionfilter").val() == "" && $("#userDataType").val() == "teacher" )
            getTopics(course,user);
        else if( $("#sectionfilter").val() == "quizzes" )
            getQuizzes(course);
        else if( $("#sectionfilter").val() == "posts" || $("#sectionfilter").val() == "" )
        {
            if($('#retrievedBoards').val() == 0) {
                $('#retrievedBoards').val('1');
                retrieveBoards();
            }
        }



        var validateQuizForm = function(){

            var checkQuizFormErrors = 0;

            // Check for question
            if( $('#create-quiz-modal .questioninput').val() === "" )
            {
                checkQuizFormErrors++;
            }

            // Check for answers
            $('#quiz-wrapper .form-group input').each(function(index, elem) {
                if( $(elem).val() === "" )
                {
                    checkQuizFormErrors++;
                }
            });

            // Check for selection
            if( $('#correct').val() === "" )
                checkQuizFormErrors++;

            if(checkQuizFormErrors > 0)
                $('#create-quiz-modal button.savebutton').attr("disabled",true);
            else
                $('#create-quiz-modal button.savebutton').attr("disabled",false);

        }




        // Validate Quiz Form
        $('#create-quiz-modal').on('shown.bs.modal', function (event) {
            $('#create-quiz-modal .questioninput, #quiz-wrapper .form-group input').blur(function(){
                validateQuizForm();
            });
            $('#create-quiz-modal #correct').bind("keydown change", function(){
                validateQuizForm();
            });
        });
        validateQuizForm();



        $('#create-quiz-modal').on('hidden.bs.modal', function (event) {
            $('#create-quiz-modal .imgUploadError').addClass('hidden');
        });



        $('#userpage-scroller-trigger').on('click', function(e){
            e.preventDefault();
            $("html, body").animate({ scrollTop: 0 }, 300);

        });



        $('#search-results-hider a').on('click', function(){

            var myURL = window.location.href;
            var myDir = myURL.substring( 0, myURL.lastIndexOf( "/" ) + 1);

            window.location.href = myDir;

        });






        $(document).on('click', '.btn-add', function(e)
        {

            e.preventDefault();

            var numAnswers = $('#numAnswers').val();

            var cloneRow = '<div class="form-group"><input type="text" name="answers[]" placeholder="Choice '+(Number(numAnswers) + 1)+'" class="form-control quiz-extra-choice" value="" style="font-size: 20px;height: 50px;"><button type="button" class="close quiz-extra-choice-remove" aria-label="Close"><span aria-hidden="true">×</span></button></div>';

            $("#quiz-wrapper").append(cloneRow);
            numAnswers++;

            $('#correct').append('<option value="'+numAnswers+'">Choice '+numAnswers+'</option>');
            $('#numAnswers').val(numAnswers);

            if(numAnswers >= 6)
                $('.btn-add').parent('div').addClass("hidden");

            validateQuizForm();




        }).on('click', '.quiz-extra-choice-remove', function(e)
        {
            var numAnswers = $('#numAnswers').val();

            $(this).parents('.form-group:first').remove();

            $("select[name=correct] option:last").remove();

            numAnswers--;
            $('#numAnswers').val(numAnswers);


            // Resort quiz options
            $('#quiz-wrapper .form-group input').each(function(index, element) {
                var choiceNo = 'Choice ' + (Number(index) + 1);
                $(element).attr('placeholder', choiceNo);
            });

            if(numAnswers < 6)
                $('.btn-add').parent('div').removeClass("hidden");

            validateQuizForm();

            e.preventDefault();
            return false;
        });







//    var $modal = $('#create-quiz-modal');
//
//    //when hidden
//    $modal.on('hidden.bs.modal', function(e) {
//      return this.render(); //DOM destroyer
//    });





        //retrieveQuestions();

        $('.savebutton').click(function(e){

            e.preventDefault();
            $('.savebutton').attr('disabled',true);

            //$('.savebutton').attr('disabled',true);
            //$('.savebutton').text('Saving...');

            if( $('#question').val() == "")
            {
                notify('alert-save-warning','warning','floating');
                //$('.savebutton').attr('disabled',false);
                //$('.savebutton').text('Save Changes');
                return false;
            }


            var formData = $('#questionsForm').serialize();
            //$.post('url', data);


            //var  formData = "material="+ + "&from="+$('#from').val() + "&from2="+$('#starttime').val() + "&to="+$('#to').val() + "&to2="+$('#endtime').val() + "&instructor="+ + "&url="+$('#url').val() + "&video="+$('#video').val();

            //console.log(formData);

            //return false;

            $.ajax({
                url : "/en/dashboard/ajax/addQuiz.php",
                type: "POST",
                data : formData,
                success: function(data)
                {

                    //console.log(data);
                    //return false;

                    var returned = data.trim();
                    var myKey = /error/;
                    var myMatch = returned.search(myKey);
                    if(myMatch != -1)
                    {
                        //notify('alert-save-error','danger','floating');
                        $('.savebutton').attr('disabled',false);
                        //$('.savebutton').text('Save Changes');
                        return false;
                    }
                    else
                    {
                        //$('.savebutton').attr('disabled',false);
                        window.location = 'https://www.bitgab.com/baijinge/quizzes';
                    }
                }
            });

            return false;

        });










        // Upload Photo ################################################################################################
        $('.photolink-quiz').click(function(e){
            e.preventDefault();
            uploadPhotosQuizPhoto('profilephoto');
        });

        // Upload Photo Posts ################################################################################################
        $('.photolink-posts').click(function(e){
            e.preventDefault();
            uploadPhotosPostPhoto('profilephoto');
        });

        // Upload Photo ################################################################################################
        $('.photolink').click(function(){
            var thislink = $(this).attr('id');
            if(thislink == 'profileImgChanger')
            {
                uploadPhotos('profilephoto');
            }
            else
                uploadPhotos('profilecover');
        });



        // Update Profile Photo
        $('.savebuttonPhoto').click(function(e){

            e.preventDefault();

            $('.notify').remove();

            var  formData = "userid="+$('#useridGlobal').val() + "&photo="+$('#photo').val() + "&newphoto="+$('#newphoto').val() + "&newphotothumb="+$('#newphotothumb').val() + "&cover="+$('#cover').val() + "&newcover="+$('#newcover').val() + "&newcoverthumb="+$('#newcoverthumb').val() + "&newcovershowcase="+$('#newcovershowcase').val();

            $.ajax({
                url : "/en/dashboard/ajax/saveProfilePhoto.php",
                type: "POST",
                data : formData,
                success: function(data)
                {
                    var returned = data;
                    var myKey = /success/;
                    var myMatch = returned.search(myKey);
                    if(myMatch != -1)
                    {
                        var returnedArr = returned.split(" ~ ");
                        imgUrl = returnedArr[1];

                        var imgUrl = imgUrl.replace("http://","https://");
                        $('#newphotothumb').val(imgUrl);
                        var timestamp = new Date().getTime();
                        $('#changephoto').attr('src',imgUrl+ "?t=" + timestamp);
                        $('.profilephotolink').attr('src',imgUrl+ "?t=" + timestamp);
                        $('.headerprofilephoto').attr('src',imgUrl+ "?t=" + timestamp);



                        // Cover thumbnail
                        var coverUrl = returnedArr[2];
                        var coverUrl = coverUrl.replace("http://","https://");
                        var coverShowcaseUrl = returnedArr[3];
                        var coverShowcaseUrl = coverShowcaseUrl.replace("http://","https://");
                        $('#newcover').val(coverUrl);
                        $('#newcoverthumb').val(coverUrl);
                        $('#newcovershowcase').val(coverShowcaseUrl);
                        $('#bg-cover').css('background-image', 'url(' + coverShowcaseUrl + ')');
                        //console.log("You're here...file upload success...");
                        return false;
                    }
                    else
                    {
                        //console.log("You're here...error...");
                        return false;
                    }
                }
            });

            return false;

        });



        // Upload Video ################################################################################################
        $('.videolink').click(function(e){
            e.preventDefault();
            $('#videowrapper').show();
        });

        $('#videowrapper .close').unbind().click(function(e){
            e.preventDefault();
            $('#videowrapper').hide();
        });











        // Save bio
        $('#bio-save-button').click(function(e){

            e.preventDefault();


            var formData = "bio="+encodeURIComponent($('#entered-bio').val());
            $.ajax({
                url : "/en/dashboard/ajax/saveUserBio.php",
                type: "POST",
                data : formData,
                success: function(data)
                {

                    var returned = data.trim();
                    var myKey = /error/;
                    var myMatch = returned.search(myKey);
                    if(myMatch != -1)
                    {
                        $('.savebutton').attr('disabled',false);
                        return false;
                    }
                    else
                    {
                        $('.savebutton').attr('disabled',false);
                        //location.reload();

                        if( $('#entered-bio').val() == ""){
                            $("#bio-wrapper").html('<li id="bio-wrapper"><a href="#enter-bio-modal" data-toggle="modal" data-target="#enter-bio-modal" style="font-weight:600;">Add bio</a></li>');
                        }
                        else
                        {
                            $("#bio-wrapper").html('<div>'+$('#entered-bio').val()+'</div><a href="#enter-bio-modal" data-toggle="modal" data-target="#enter-bio-modal" style="font-weight:600;">Edit</a> | <a href="#" id="remove-bio-button" style="font-weight:600;">Remove</a>');
                        }




                        $("#enter-bio-modal").modal("hide");
                    }

                }
            });

            return false;

        });

        // Remove bio
        $(document).on("click","#remove-bio-button",function(e){
            e.preventDefault();
            $('#entered-bio').val("");
            $('#bio-save-button').trigger("click");
        });






        // Initialize GET TOPICS FUNCTIONS
        // Retrieve Topics
        var course = $('#course').val();
        var user = $('#user').val();
        var fakeuser = $('#fakeuser').val();
        var s = $('#s').val();
        $('#topicsfrom').val("0");

        //console.log("course: " + course);
        //console.log("user: " + user);

        // Get topics only
        if( $("#sectionfilter").val() == "topics" )
            getTopics(course,user);



        // Get friends only
        if( $("#sectionfilter").val() == "friends" ){
            $(".section-friends").addClass("active");
            getUserFriendsProfile();
        }

        // Get teachers only
        if( $("#sectionfilter").val() == "favorite-teachers" ){
            $(".section-followers").addClass("active");
            getUserTeachersProfile();
        }

        // Get teachers only
        if( $("#sectionfilter").val() == "followers" ){
            $(".section-followers").addClass("active");
            getTeacherFriendsProfile();
        }

        // Get teachers only
        if( $("#sectionfilter").val() == "groups" ){
            $(".section-groups").addClass("active");
            getUserGroups();
        }







        $('.complete-later-btn').on('click', function() {
            $('#application-not-complete-warning').removeClass('hidden');
        });

        $('.complete-profile-later-btn').on('click', function() {
            $('#application-not-complete-warning').addClass('hidden');
            $('#application-on-review-warning').removeClass('hidden');
        });

        if(fakeuser < 1) {

//      if(typeof(Storage) !== "undefined") {
//        if (sessionStorage.loadCount) {
//          sessionStorage.loadCount++;
//        } else {
//          sessionStorage.loadCount = 0;
//            sessionStorage.nextMessage = 0;
//        }
//
//        var remainder = sessionStorage.loadCount % 2;
//
//        if(remainder == 0) {
//          if(sessionStorage.nextMessage == 0) {
//          $('#free-lessons-extension').removeClass('hidden');
//          $('#unlimited-access-extension').addClass('hidden');
//          $('#ask-questions-extension').addClass('hidden');
//          sessionStorage.nextMessage = 1;
//        } else if(sessionStorage.nextMessage == 1){
//          $('#free-lessons-extension').addClass('hidden');
//          $('#unlimited-access-extension').removeClass('hidden');
//          $('#ask-questions-extension').addClass('hidden');
//          sessionStorage.nextMessage = 2;
//        } else if(sessionStorage.nextMessage == 2){
//          $('#free-lessons-extension').addClass('hidden');
//          $('#unlimited-access-extension').addClass('hidden');
//          $('#ask-questions-extension').removeClass('hidden');
//          sessionStorage.nextMessage = 0;
//        }
//        $('#subscribe-and-reserve-free-lessons').removeClass('hidden');
//
//        } else
//          $('#subscribe-and-reserve-free-lessons').addClass('hidden');
//      }

            bookingNotification();



            // CODE TO SHOW SUBSCRIPTION MODAL ON URL HASH
            var hash = window.location.hash;

            if (hash){
                if(hash == "#subscribe")
                    hash = "#payment-modal";

                if ($(hash).hasClass('modal') && $(hash).css('display')=='none'){
                    if(hash == "#payment-modal")
                        $(hash+' .modal-body .subscription-feature-explainer').removeClass('hidden');

                    $(hash).modal('show');
                }
            }






        } else {
            $(document).on('click', '#quizTimeline ul.products-list li.item button', function(e) {
                e.preventDefault();

                $("#register-now-modal").modal('show');

            });
        }

        $(document).scroll(function() {
            if($(window).scrollTop() + $(window).height() > $(document).height() - $(document).height()*0.10) {
                console.log(scrolledCheckQuizzes);
                if(!scrolledCheckTopics) {
                    scrolledCheckTopics = true;
                    course = $('#course').val();

                    // Get topics only
                    if( $("#sectionfilter").val() == "" && $("#userDataType").val() == "teacher" )
                        getTopics(course,user);
                    if( $("#sectionfilter").val() == "topics" )
                        getTopics(course,user);
                }

                if(!scrolledCheckQuizzes) {
                    scrolledCheckQuizzes = true;
                    course = $('#course').val();

                    if( $("#sectionfilter").val() == "quizzes" && $("#userDataType").val() == "teacher" )
                        getQuizzes(course);
                    else if( $("#sectionfilter").val() == "quizzes" || ($("#sectionfilter").val() == "" && $("#userDataType").val() == "student") )
                        getQuizzes(course);

                }

                if(!scrolledCheckPosts) {
                    scrolledCheckPosts = true;
                    if( $("#sectionfilter").val() == "posts" )
                        retrieveBoards();
                }


            }

            var userpageScrollerHeight = Math.abs(parseInt($('#userpage-scroller').css("top")));

            if(($('.footer-mini').offset().top + $('.footer-mini').height() - $(window).scrollTop()) < 0) {
                $('#userpage-scroller').addClass("visionable").css("transform", "translateY("+userpageScrollerHeight+"px)");
            } else {
                $('#userpage-scroller').removeClass("visionable").css("transform", "");
            }
        });




        //});



        if( $("#userDataType").val() == "teacher" ){
            getTeacherInfoProfile();
        }
        else if( $("#userDataType").val() == "student" ){
            getUserInfoProfile();
        }

        addFriendProfile();
        openMessageWindow();





        if($('#issearchprofile').val() == "1")
            findFriendsProfile();

        if($('#issearchprofile2').val() == "1")
            findTeachersProfile();


        if($('#issearchprofile3').val() == "1")
            findGroupsProfile();



        $("#qbgteacher").val( $("#qbgteacherval").val() );






        // HANDLE POSTS
        $("#message").bind('paste', function(e) {
            var self = this;
            /*setTimeout(function(e) {
          $('.savebutton').attr('disabled',false);
          }, 0);*/
        });

        $('#message').focus(function(){
            $('#sendcommentwrap').slideDown(100);
            $('.replybox').slideUp(100);
            $('.replybtn').removeClass('shown');
            return false;
        });
        /*$('#message').blur(function(){
        $('#sendcommentwrap').slideUp(100);
        return false;
      });*/
        /*$('#message').blur(function(){
        if (!$.trim($("#message").val())) {
          $('.savebutton').attr('disabled',true);
        }
        else
          $('.savebutton').attr('disabled',false);
      });*/


        $('#cancelcomment').click(function(){
            $('#sendcommentwrap').slideUp(100);
            return false;
        });

        /*$('#message').keydown(function(){
        if( $(this).val() !== "" )
          $('.savebutton').attr('disabled',false);
        else
          $('.savebutton').attr('disabled',true);
      });*/

        /*if (!$.trim($("#message").val())) {
        $('.savebutton').attr('disabled',true);
      }
      else
        $('.savebutton').attr('disabled',false);*/



        /*$('input').keypress(function (e) {
        if (e.which == 13) {
        $('.savebutton').trigger('click');
        return false;    //<---- Add this line
        }
      });*/




        //$('#boardsfrom').val('0');

        if($('#retrievedBoards').val() == 0) {

            $('#retrievedBoards').val('1');
            retrieveBoards();

        }

        /*$('#refresh').click(function(){

        $('#qawrap #messages').html('Loading...');
        retrieveBoards();
      });*/

        $('#morecomments').click(function(){
            //$('#qawrap #messages').html('Loading...');
            retrieveBoards();
        });


        /*$('#newmessage').click(function(){
         $("html, body").animate({ scrollTop: $(document).height() }, 1000);
          $('#message').focus();
      });*/

        $('.savebuttonPost').unbind().click(function(e){

            $(this).prop('disabled', true);
            e.preventDefault();


            var fakeuser = $('#fakeuser').val();
            if(fakeuser > 0)
            {
                e.preventDefault();
                $('#register-now-modal').modal('show');
                return false;
            }
            else
            {

                //if( $('#message').val() == "" || $('#sessionid').val() == "")
                if( $('#sessionid').val() == "")
                {
                    //console.log("error here...");
                    return false;
                }

                addBoard();
            }

        });


        $('#ask-question-box textarea#message').focus(function() {
            $(this).attr('placeholder', 'You may add a YouTube video by pasting its link')
        }).blur(function() {
            $(this).attr('placeholder', 'Share a thought, ask a question or start a new discussion...')
        });
    });



    function labnolThumb(id) {
        return '<img class="youtube-thumb img-responsive" src="//i.ytimg.com/vi/' + id + '/hqdefault.jpg"><div class="play-button"></div>';
    }

    function labnolIframe() {
        var iframe = document.createElement("iframe");
        iframe.setAttribute("src", "//www.youtube.com/embed/" + this.parentNode.dataset.id + "?autoplay=1&autohide=2&border=0&wmode=opaque&enablejsapi=1&controls=0&showinfo=0&rel=0&playsinline=1");
        iframe.setAttribute("frameborder", "0");
        iframe.setAttribute("id", "youtube-iframe");
        this.parentNode.replaceChild(iframe, this);
    }



</script>

</body>
</html>